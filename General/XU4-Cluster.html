<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
  <head>
      <meta http-equiv="content-type" content="application/xhtml+xml; charset=windows-1252" />
      <meta name="Building a ODroid XU4 Cluster" content="author: Bhaskar.S, category: arm, linux">
      <title>Building a ODroid XU4 Cluster</title>
      <link href="../css/polarsparc-v2.4.css" type="text/css" rel="stylesheet" />
  </head>
  <body>
    <br/>
    <table borber="0">
      <tr>
        <td valign="bottom"><span id="ps-home"></span></td>
        <td valign="bottom"><span id="home-a"><a id="home-a" href="https://polarsparc.github.io/">PolarSPARC</a></span></td>
      </tr>
    </table>
    <br/>
    <div id="title-div">
      <p>Building a ODroid XU4 Cluster</p>
    </div>
    <br />
    <table id="ad-table">
      <tbody>
        <tr>
          <td class="author-td">Bhaskar S</td>
          <td class="date-td">02/16/2019</td>
        </tr>
      </tbody>
    </table>
    <hr class="line-hr" /> <br />
      <div id="section-div">
        <p>Part 1</p>
      </div>
    <div id="para-div">
      <p>In this article, we will lay out the ingredients to build a 5-node home lab cluster using the in-expensive <a href
        ="https://www.hardkernel.com/shop/odroid-xu4/" target="_blank"><span class="hi-yellow">ODroid XU4</span></a>, which
        is a small and powerful <span class="bold">SBC</span> that sports a powerful octa-core ARM-based Samsung Exynos5422
        CPU with two sets of quad-cores (also referred to as the <span class="hi-yellow">big.LITTLE</span>) with Cortex A15
        running at 2 Ghz and Cortex A7 running at 1.4 Ghz. In addition, it comes with a temperature controlled heatsink
        pre-mounted, has 2 GB of LPDDR3 on-board memory, and a 1G ethernet port.</p>
      <p>The following are the necessary items needed to build a 5-node <span class="bold">ODroid XU4</span> cluster:</p>
      <ul id="blue-sqr-ul">
        <li>
          <p>Five <a href="https://ameridroid.com/collections/single-board-computer/products/odroid-xu4" target="_blank">
            <span class="bold">ODroid XU4</span></a> single-board computers</p>
          <div id="img-outer-div"> <img src="./images/xu4-01.png" class="img-cls" alt="ODroid XU4" />
            <div class="img-cap">ODroid XU4</div>
          </div>
        </li>
        <li>
          <p>Five <a href="https://ameridroid.com/products/5v-4a-power-supply" target="_blank"><span class="bold">5V/4A</span>
            </a> power adapters</p>
          <div id="img-outer-div"> <img src="./images/xu4-02.png" class="img-cls" alt="PowerAdapter" />
            <div class="img-cap">5V/4A Adapter</div>
          </div>
        </li>
        <li>
          <p>Five <a href="https://www.amazon.com/gp/product/B073JYVKNX/" target="_blank"><span class="bold">Class 10
            64 GB</span></a> microSDXC cards</p>
          <div id="img-outer-div"> <img src="./images/rpc-03.png" class="img-cls" alt="MicroSDXC Card" />
            <div class="img-cap">MicroSDXC Card</div>
          </div>
        </li>
        <li>
          <p>Five <a href="https://www.amazon.com/Cable-Matters-160021-Snagless-Ethernet/dp/B00E5I7VJG" target="_blank">
            <span class="bold">Ethernet</span></a> network cables</p>
          <div id="img-outer-div"> <img src="./images/rpc-04.png" class="img-cls" alt="Ethernet Cable" />
            <div class="img-cap">Ethernet Cable</div>
          </div>
        </li>
        <li>
          <p>One pack of <a href="https://www.amazon.com/gp/product/B00AO432J8" target="_blank"><span class="bold">M3 40mm
            </span></a> male-female brass spacers</p>
          <div id="img-outer-div"> <img src="./images/xu4-03.png" class="img-cls" alt="40mm Spacers" />
            <div class="img-cap">40mm Spacers</div>
          </div>
        </li>
        <li>
          <p>One pack of <a href="https://www.amazon.com/uxcell-Thread-Standoff-Spacer-Copper/dp/B07H3RHFZR" target="_blank">
            <span class="bold">M3 10mm</span></a> male-female brass spacers</p>
          <div id="img-outer-div"> <img src="./images/xu4-04.png" class="img-cls" alt="10mm Spacers" />
            <div class="img-cap">10mm Spacers</div>
          </div>
        </li>
        <li>
          <p>One <a href="https://www.amazon.com/TP-Link-Ethernet-Splitter-Unmanaged-TL-SF1008D/dp/B0034CL3MA"
            target="_blank"><span class="bold">Multi-port Ethernet</span></a> switch (if your home network switch
            does not have enough of available ports)</p>
          <div id="img-outer-div"> <img src="./images/rpc-07.png" class="img-cls" alt="Ethernet Switch" />
            <div class="img-cap">Ethernet Switch</div>
          </div>
        <p>In my case, did not need one since have a 24-port <span class="bold">Ethernet Switch</span> with enough of
          free ports to use</p>
        </li>
        <li>
          <p>One <a href="https://www.amazon.com/Anker-Portable-Reader-RS-MMC-Micro/dp/B006T9B6R2" target="_blank">
            <span class="bold">Portable USB</span></a> card reader (if your desktop does not have a built-in media
            card reader)</p>
          <div id="img-outer-div"> <img src="./images/rpc-08.png" class="img-cls" alt="USB Card Reader" />
            <div class="img-cap">USB Card Reader</div>
          </div>
        <p>In my case, did not need one since my desktop has a built-in media card reader</p>
        </li>
        <li>
          <p>One <a href="https://www.amazon.com/Belkin-BE112230-08-12-Outlet-Power-Protector/dp/B000J2EN4S" target="_blank">
            <span class="bold">Belkin BE112230-08</span></a> 12-outlet power strip</p>
          <div id="img-outer-div"> <img src="./images/xu4-07.png" class="img-cls" alt="Power Strip" />
            <div class="img-cap">Power Strip</div>
          </div>
        </li>
      </ul>
    </div>
    <div id="section-div">
      <p>Part 2</p>
    </div>
    <div id="para-div">
      <p>Now comes the next stage - assemble the items to build the 5-node <span class="bold">ODroid XU4</span> cluster.</p>
      <ul id="blue-sqr-ul">
        <li>
          <p>Insert the 10mm M3 brass spacers on to the 4 sides of the <span class="bold">ODroid XU4</span> from the bottom
            and screw them on top with the 40mm M3 brass spacers. Layer another <span class="bold">ODroid XU4</span> on top
            of the 40mm M3 brass spacers and screw them on top with another set of the 40mm M3 brass spacers shown in the
            illustration below:</p>
          <div id="img-outer-div"> <img src="./images/xu4-05.png" class="img-cls" alt="Mounted Brass Columns" />
            <div class="img-cap">Mounted Brass Columns</div>
          </div>
          <p>Continue this process for the remaining units</p>
        </li>
        <li>
          <p>The final finished cluster rack should look something like the illustration as shown below:</p>
          <div id="img-outer-div"> <img src="./images/xu4-06.png" class="img-cls" alt="Finished Rack" />
            <div class="img-cap">Finished Rack</div>
          </div>
        </li>
        <li>
          <p>Next, download the latest stable release of <a href="https://www.armbian.com/odroid-xu4/"
            target="_blank"><span class="bold">Armbian</span></a> Linux operating system (based on Ubuntu Bionic 18.04)
            as shown in the illustration below:</p>
          <div id="img-outer-div"> <img src="./images/xu4-08.png" class="img-cls" alt="Download Armbian" />
            <div class="img-cap">Download Armbian</div>
          </div>
          <p>At the time of this writing, the version of Armbian was <span class="hi-yellow">5.72</span>. Once the
            download is complete, extract the image to a known directory (say, <span class="bold">
            /home/polarsparc/Downloads</span>). The image will be called
            <span class="hi-yellow">Armbian_5.72_Odroidxu4_Ubuntu_bionic_next_4.14.87_desktop.img</span></p>
        </li>
        <li>
          <p>Download the latest stable release of <a href="https://www.balena.io/etcher/" target="_blank">
            <span class="bold">Etcher</span></a>. This tool will be used to burn the Armbian operating system image
            onto each of the microSDXC cards</p>
        </li>
        <li>
          <p>Insert a microSDXC card into the card reader, launch <span class="bold">Etcher</span>, select the
            Armbian image (say from <span class="bold"> /home/polarsparc/Downloads</span>). Then press the
            <span class="hi-blue">Flash!</span> button to burn the image onto the microSDXC card as shown in the
            illustration below:</p>
          <div id="img-outer-div"> <img src="./images/rpc-14.png" class="img-cls" alt="Flash OS Image" />
            <div class="img-cap">Flash OS Image</div>
          </div>
        </li>
        <li>
          <p>Insert each of the flashed microSDXC cards into each of the <span class="bold">ODroid XU4</span>
            card slots as shown in the illustration below:</p>
          <div id="img-outer-div"> <img src="./images/xu4-06.png" class="img-cls" alt="ODroid XU4 with SDXC" />
            <div class="img-cap">ODroid XU4 with SDXC</div>
          </div>
        </li>
        <li>
          <p>Ensure the toggle switch on the <span class="bold">ODroid XU4</span> card has been positioned at
            <span class="hi-blue">&mu;SD</span> instead of <span class="bold">eMMC</span> as shown in the
            illustration below:</p>
          <div id="img-outer-div"> <img src="./images/xu4-06-1.png" class="img-cls" alt="Toggle Switch" />
            <div class="img-cap">Toggle Switch</div>
          </div>
        </li>
      </ul>
    </div>
    <div id="section-div">
      <p>Part 3</p>
    </div>
    <div id="para-div">
      <p>Now comes the final stage - prepare each of the <span class="bold">ODroid XU4</span> nodes for operation.
        Note, we want to connect, power-up, and setup each of the <span class="bold">ODroid XU4</span> cards
        *<span class="underbold">ONE</span>* at a time.</p>
      <ul id="blue-sqr-ul">
        <li>
          <p>Attach the barrel end of the power adapter to the power slot on <span class="bold">ODroid XU4</span> and
            plug the other end to the power strip. Similarly, attached one of the Ethernet cable to the RJ45 slot on 
            <span class="bold">ODroid XU4</span> and the other end to the Ethernet Switch as shown in the
            illustration below:</p>
          <div id="img-outer-div"> <img src="./images/xu4-09.png" class="img-cls" alt="ODroid XU4 Connected" />
            <div class="img-cap">ODroid XU4 Connected</div>
          </div>
        </li>
        <li>
          <p>Connect a HDMI monitor to the <span class="bold">ODroid XU4</span> using HDMI and power up the power
            strip. The <span class="bold">ODroid XU4</span> should take few seconds to boot up and if all goes well,
            will present a login prompt. The default user-id is <span class="hi-green">root</span> and the default
            password is <span class="hi-yellow">1234</span>. Enter the default user-id and the default password to
            login. We will be prompted to change the default password. Enter the default current password, followed
            by the new stronger password and then re-confirm the newer (stronger) password.</p>
          <p>Next, we will be prompted to create a new user-id followed by a prompt to assign a password. We will
            create the user-id <span class="hi-blue">xu4</span> and assign a password.</p>
          <p>After the new user-id is created, it will launch the <span class="bold">Armbian</span> desktop as shown
            in the illustration below:</p>
          <div id="img-outer-div"> <img src="./images/xu4-09-1.png" class="img-cls" alt="Armbian Desktop" />
            <div class="img-cap">Armbian Desktop</div>
          </div>
        </li>
        <li>
          <p>Open a terminal window by clicking on the <span class="hi-yellow">Applications</span> icon on the top
            left corner and then choosing the <span class="hi-yellow">Terminal</span> option from the drop-down. In
            the terminal window, execute the following command:</p>
          <div id="cmd-div">
            <p>$ sudo armbian-config</p>
          </div>
          <p>This will open a screen as shown below:</p>
          <div id="img-outer-div"> <img src="./images/xu4-10.png" class="img-cls" alt="Armbian Config" />
            <div class="img-cap">Armbian Config</div>
          </div>
          <p>We will refer to this screen as the <span class="bold">MAIN</span> screen</p>
        </li>
        <li>
          <p>Choose the first option <span class="hi-yellow">System</span> from the <span class="bold">MAIN</span> main
            screen. Press the tab key to navigate to the <span class="bold">&lt;OK&gt;</span> button and press enter.
            This will open a screen as shown below:</p>
          <div id="img-outer-div"> <img src="./images/xu4-11.png" class="img-cls" alt="System Settings" />
            <div class="img-cap">System Settings</div>
          </div>
          <p>We will refer to this screen as the <span class="bold">System Setting</span> screen.</p>
          <p>Choose the option <span class="hi-yellow">SSH</span> to install and enable the SSH server. Press the tab key
            to navigate to the <span class="bold">&lt;OK&gt;</span> button and press enter. This will display the SSHD
            options screen as shown below:</p>
          <div id="img-outer-div"> <img src="./images/xu4-12.png" class="img-cls" alt="SSHD Options" />
            <div class="img-cap">SSHD Options</div>
          </div>
          <p>Uncheck the first option <span class="hi-yellow">PermitRootLogin</span> and press the tab key to navigate to
            the <span class="bold">&lt;Save&gt;</span> button and press enter. This will save the configuration. Next,
            press the tab key to navigate to the <span class="bold">&lt;Cancel&gt;</span> button to exit this screen.
            This will take us back to the <span class="bold">System Setting</span> screen</p>
        </li>
        <li>
          <p>Choose the option <span class="hi-yellow">DTB</span> to optimize the board configuration as shown below:</p>
          <div id="img-outer-div"> <img src="./images/xu4-13.png" class="img-cls" alt="DTB Option" />
            <div class="img-cap">DTP Option</div>
          </div>
          <p>Press the tab key to navigate to the <span class="bold">&lt;OK&gt;</span> button and press enter. This will
            display a screen with a list of board(s) to choose from as shown below:</p>
          <div id="img-outer-div"> <img src="./images/xu4-14.png" class="img-cls" alt="Choose Board" />
            <div class="img-cap">Board Configuration</div>
          </div>
          <p>Select the first option <span class="hi-yellow">Odroid XU4</span> and press the tab key to navigate to
            the <span class="bold">&lt;OK&gt;</span> button and press enter. This will display a screen prompting if we
            want to reboot the device as shown below:</p>
          <div id="img-outer-div"> <img src="./images/xu4-15.png" class="img-cls" alt="Reboot Board" />
            <div class="img-cap">Reboot Board</div>
          </div>
          <p>Press the tab key to navigate to the <span class="bold">&lt;OK&gt;</span> button and press enter. This will
            reboot the board and take us back to the <span class="bold">Armbian</span> desktop.</p>
          <p>Once again open a terminal window and execute the following command:</p>
          <div id="cmd-div">
            <p>$ sudo armbian-config</p>
          </div>
          <p>Choose the first option <span class="bold">System</span> from the <span class="bold">MAIN</span> main screen.
            Press the tab key to navigate to the <span class="bold">&lt;OK&gt;</span> button and press enter to go back to
            the <span class="bold">System Setting</span> screen</p>
        </li>
        <li>
          <p>Choose the option <span class="hi-yellow">Firmware</span> to update the system as shown below:</p>
          <div id="img-outer-div"> <img src="./images/xu4-16.png" class="img-cls" alt="Firmware" />
            <div class="img-cap">Firmware</div>
          </div>
          <p>Press the tab key to navigate to the <span class="bold">&lt;OK&gt;</span> button and press enter. We will
            be prompted to confirm as shown below:</p>
          <div id="img-outer-div"> <img src="./images/xu4-17.png" class="img-cls" alt="Confirm Update" />
            <div class="img-cap">Confirm Update</div>
          </div>
          <p>Press the tab key to navigate to the <span class="bold">&lt;Yes&gt;</span> button and press enter. This will
            start the update process and after a few minutes we will be prompted to reboot the board once again as shown
            below:</p>
          <div id="img-outer-div"> <img src="./images/xu4-18.png" class="img-cls" alt="Confirm Reboot" />
            <div class="img-cap">Confirm Reboot</div>
          </div>
          <p>Press the tab key to navigate to the <span class="bold">&lt;Yes&gt;</span> button and press enter. This will
            reboot the board and take us back to the <span class="bold">Armbian</span> desktop.</p>
          <p>Once again open a terminal window and execute the following command:</p>
          <div id="cmd-div">
            <p>$ sudo armbian-config</p>
          </div>
          <p>Choose the first option <span class="bold">System</span> from the <span class="bold">MAIN</span> main screen.
            Press the tab key to navigate to the <span class="bold">&lt;OK&gt;</span> button and press enter to go back to
            the <span class="bold">System Setting</span> screen</p>
        </li>
        <li>
          <p>Choose the option <span class="hi-yellow">Desktop</span> to disable the desktop as shown below:</p>
          <div id="img-outer-div"> <img src="./images/xu4-19.png" class="img-cls" alt="Desktop" />
            <div class="img-cap">Desktop</div>
          </div>
          <p>Press the tab key to navigate to the <span class="bold">&lt;OK&gt;</span> button and press enter. We will
            be prompted to confirm if we want to disable the desktop as shown below:</p>
          <div id="img-outer-div"> <img src="./images/xu4-20.png" class="img-cls" alt="Disable Desktop" />
            <div class="img-cap">Disable Desktop</div>
          </div>
          <p>Press the tab key to navigate to the <span class="bold">&lt;Stop&gt;</span> button and press enter. This will
            stop and disable the desktop. This will take us to system login prompt. Login as the user <span class="bold">
            xu4</span>. At the system prompt execute the following command:</p>
          <div id="cmd-div">
            <p>$ sudo armbian-config</p>
          </div>
          <p>This will take us to the <span class="bold">MAIN</span> screen</p>
        </li>
        <li>
          <p>Choose the option <span class="hi-yellow">Network</span> to configure the network settings as shown below:</p>
          <div id="img-outer-div"> <img src="./images/xu4-21.png" class="img-cls" alt="Network" />
            <div class="img-cap">Network</div>
          </div>
          <p>We will refer to this screen as the <span class="bold">Network</span> screen.</p>
          <p>Press the tab key to navigate to the <span class="bold">&lt;OK&gt;</span> button and press enter. This will
            open the network options screen as shown below:</p>
          <div id="img-outer-div"> <img src="./images/xu4-22.png" class="img-cls" alt="Network Options" />
            <div class="img-cap">Network Options</div>
          </div>
          <p>Select the first option <span class="hi-yellow">IP</span> to assign ip-address for this card. Press the tab key
            to navigate to the <span class="bold">&lt;OK&gt;</span> button and press enter. This will display a screen to
          choose the type of ip-address as shown below:</p>
          <div id="img-outer-div"> <img src="./images/xu4-23.png" class="img-cls" alt="IP Type" />
            <div class="img-cap">IP Type</div>
          </div>
          <p>We desire to assign static ip-addresses to our cards (so there is predictability the next time we boot). Press
            the tab key to navigate to the <span class="bold">&lt;Static&gt;</span> button and press enter. This will open
            the static ip configuration screen as shown below:</p>
          <div id="img-outer-div"> <img src="./images/xu4-24.png" class="img-cls" alt="Static IP" />
            <div class="img-cap">Static IP</div>
          </div>
          <p>Assign a desired static ip-address for this card. In this case, we choose to assign the ip-address
            <span class="hi-green">192.168.1.31</span> for this card. For each of the remaining 4 cards we will assign
            the addresses from <span class="hi-vanila">192.168.1.32</span> through <span class="hi-vanila">192.168.1.35</span>.</p>
          <p>After assigning the desired ip-address, press the tab key to navigate to the <span class="bold">&lt;OK&gt;</span>
            button and press enter.</p>
          <p>Press the tab key to navigate to the <span class="bold">&lt;Cancel&gt;</span> button and press enter to return
            to the <span class="bold">Network</span> screen. Once again, press the tab key to navigate to the <span class="bold">
            &lt;Cancel&gt;</span> button and press enter to return to the <span class="bold">MAIN</span> screen</p>
        </li>
        <li>
          <p>On the <span class="bold">MAIN</span> screen navigate to the option <span class="hi-yellow">Personal</span> as
            shown below:</p>
          <div id="img-outer-div"> <img src="./images/xu4-25.png" class="img-cls" alt="Personal" />
            <div class="img-cap">Personal</div>
          </div>
          <p>Press the tab key to navigate to the <span class="bold">&lt;OK&gt;</span> and press enter. This will open a screen
            as shown below:</p>
          <div id="img-outer-div"> <img src="./images/xu4-26.png" class="img-cls" alt="Personal Settings" />
            <div class="img-cap">Personal Settings</div>
          </div>
          <p>We will refer to this screen as the <span class="bold">Personal Setting</span> screen.</p>
          <p>Choose the option <span class="hi-yellow">Hostname</span> to assign a host-name for this card. Press the tab key
            to navigate to the <span class="bold">&lt;OK&gt;</span> and press enter. This will open a screen as shown below:</p>
          <div id="img-outer-div"> <img src="./images/xu4-27.png" class="img-cls" alt="Change Hostname" />
            <div class="img-cap">Change Hostname</div>
          </div>
          <p>Assign a desired host-name for this card. In this case, we choose to assign the host-name
            <span class="hi-green">my-xu4-1</span> for this card. For each of the remaining 4 cards we will assign
            the host-names from <span class="hi-vanila">my-xu4-2</span> through <span class="hi-vanila">my-xu4-5</span>.</p>
          <p>Press the tab key to navigate to the <span class="bold">&lt;OK&gt;</span> button and press enter. This will open
            a screen as shown below:</p>
          <div id="img-outer-div"> <img src="./images/xu4-28.png" class="img-cls" alt="Info" />
            <div class="img-cap">Info</div>
          </div>
          <p>Press enter on the <span class="bold">&lt;OK&gt;</span> button to return to the <span class="bold">MAIN</span>
            screen.</p>
          <p>On the <span class="bold">MAIN</span> screen, press the tab key to navigate to the <span class="bold">&lt;Cancel&gt;
            </span> button and press enter. This will exit the <span class="bold">armbian-config</span> tool</p>
        </li>
        <li>
          <p>At the command prompt, execute the following command:</p>
          <div id="cmd-div">
            <p>$ sudo shutdown -h now</p>
          </div>
          <p>This will safely shutdown the <span class="bold">ODroid XU4</span> device</p>
        </li>
      </ul>
      <p>Perform the above steps for each of the remaining <span class="bold">ODroid XU4</span> devices. Note that
        as we boot each of the remaining <span class="bold">ODroid XU4</span> cards, they each will get a different
        ip address assigned.</p>
      <p><span class="hi-green">Hurray !!!</span> At this point our <span class="bold">ODroid XU4</span> cluster
        is ready for action.</p>
    </div>
    <div id="section-div">
      <p>References</p>
    </div>
    <div id="para-div">
      <p><a href="https://www.hardkernel.com/shop/odroid-xu4/" target="_blank"><span class="bold">HardKernel - ODROID-XU4</span></a></p>
      <p><a href="https://wiki.odroid.com/odroid-xu4/odroid-xu4" target="_blank"><span class="bold">ODROID-XU4 Wiki</span></a></p>
    </div>
    <br/>
    <hr class="line-hr" />
    <div>
      <a id="footer-a" href="https://polarsparc.github.io/">&copy;&nbsp;PolarSPARC</a>
    </div>
  </body>
</html>
