<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="content-type" content="application/xhtml+xml; charset=windows-1252" />
    <meta name="Introduction to Ethereum - Part 2" content="author: Bhaskar.S, category: blockchain, ethereum, solidity">
    <title>Introduction to Ethereum - Part 2</title>
    <link href="../css/polarsparc-v2.0.css" type="text/css" rel="stylesheet" />
  </head>
  <body> <br />
    <div id="title-div">
      <p>Introduction to Ethereum - Part 2</p>
    </div>
    <br />
    <table id="ad-table">
      <tbody>
        <tr>
          <td class="author-td">Bhaskar S</td>
          <td class="date-td">12/22/2017</td>
        </tr>
      </tbody>
    </table>
    <hr class="line-hr" /> <br />
    <div id="step-div">
      <p>Overview</p>
    </div>
    <div id="para-div">
	    <p>In the previous article <a href="http://www.polarsparc.com/Ethereum/Ethereum-1.html" target="_blank"><span class="bold">
	      Part 1</span></a> of this series, we introduced some basic concepts in and got our hands dirty with
        <span class="bold">Ethereum</span> by setting up a private network with 4 accounts and sending a transaction between
        accounts.</p>
    </div>
    <div id="para-div">
	    <p>In this article, we will explore how to build, deploy, and trigger <span class="bold">Smart Contracts</span> in
        <span class="bold">Ethereum</span> using <a href="https://solidity.readthedocs.io/en/develop/" target="_blank">
        <span class="hi-yellow">Solidity</span></a>, a high-level, contract-oriented, statically typed, compiled to bytecode,
        programming language.</p>
    </div>
    <div id="para-div">
      <p>So, what are <span class="bold">Smart Contract</span>s really ??? Lets us refer back to our first article,
        <a href="http://www.polarsparc.com/Blockchain/Blockchain.html" target="_blank"><span class="bold">Introduction to
        Blockchain</span></a>, where we indicated a <span class="bold">Smart Contract</span> is a digital legal contract
        that consists of some state (data representing the conditions of the contract), along with some code (logic that
        implements the contract process), and resides in the <span class="bold">Blockchain</span>.</p>
      <p>When some event (another transaction) satisfying the terms and conditions of the contract occurs, the code
        associated with the contract self-executes, legalizing and enforcing the terms of the contract, and potentially
        updating the state (recording the conditions of the contract) in the <span class="bold">Blockchain</span>, as well
        as possibly generating additional transaction(s), without the involvement of any third party agents (notaries,
        lawyers, etc).</p>
      <p>So, whats the big deal ??? Efficiency, Immutability, and Transparency. Imagine a complex multi-step contract
        process involving multiple third party agents. Using <span class="bold">Blockchain</span> and
        <span class="bold">Smart Contract</span>s, the entire contract process can be automated and simplified, thereby
        making the whole process efficient, in addition to increasing transparency of the transactions, and establishing
        trust/credibility amongst the involved parties.</p>
    </div>
    <div id="step-div">
      <p>Installation</p>
    </div>
    <div id="para-div">
      <p>The installation will be on a <span class="bold">Ubuntu 16.04 LTS</span> (and above) based Linux desktop.</p>
      <p>We will assume a hypothetical user called <span class="bold">polarsparc</span> with the home directory
        located at <span class="bold">/home/polarsparc</span>.</p>
    </div>
    <div id="para-div">
      <p>Assuming that we are logged in as <span class="bold">polarsparc</span> and the current working directory
        is the home directory <span class="bold">/home/polarsparc</span>, we will create two additional sub-directories
        by executing the following commands:</p>
    </div>
    <div id="cmd-div">
      <p>$ mkdir -p Ethereum/src</p>
      <p>$ mkdir -p Ethereum/bin</p>
    </div>
    <div id="para-div">
      <p>Now, change the current working directory to the directory <span class="bold">/home/polarsparc/Ethereum</span>.</p>
    </div>
    <div id="para-div">
      <p>To install the <span class="bold">Solidity</span> compiler, execute the following commands:</p>
    </div>
    <div id="cmd-div">
      <p>$ sudo apt-get update</p>
      <p>$ sudo apt-get install solc</p>
    </div>
    <div id="para-div">
      <p>Once the installation complete, execute the following command to check everything was ok:</p>
    </div>
    <div id="cmd-div">
      <p>$ solc --version</p>
    </div>
    <div id="para-div">
      <p>The following would be the typical output:</p>
    </div>
    <div id="out-div">
      <h4>Output.1</h4>
      <pre>solc, the solidity compiler commandline interface
Version: 0.4.19+commit.c4cbbb05.Linux.g++</pre>
    </div>
    <div id="para-div">
        <p><span class="bold">NOTE:&nbsp;</span>The <span class="bold">Solidity</span> compiler is being continuously improved
          and enhanced, so the version is likely to change.</p>
    </div>
    <div id="step-div">
      <p>Hands-on with Smart Contracts using Solidity</p>
    </div>
    <div id="para-div">
      <p>We will assume that we have started the single <span class="bold">Ethereum</span> node in our private network,
        and have the <span class="bold">geth</span> Javascript shell prompt ready.</p>
    </div>
    <div id="para-div">
      <p>In order to get started with <span class="bold">Smart Contract</span>s in <span class="bold">Ethereum</span>, we
        need to write the contract logic using <span class="bold">Solidity</span>.</p>
    </div>
    <div id="para-div">
      <p>Referring to our first article, <a href="http://www.polarsparc.com/Blockchain/Blockchain.html" target="_blank">
        <span class="bold">Introduction to Blockchain</span></a>, we will implement the simple usecase of the transfer of
        a vehicle from the dealer to the buyer. We will start simple and evolve as we go along.</p>
    </div>
    <div id="para-div">
      <p>The following is the <span class="bold">Solidity</span> source code named <span class="hi-yellow">Vehicle.sol</span>
        located in the directory <span class="bold">/home/polarsparc/Ethereum/src</span>:</p>
    </div>
    <fieldset id="sc-fieldset"> <legend>Vehicle.sol</legend>
      <pre>pragma solidity ^0.4.15;

/*
 * A Vehicle instance is first created in the Ethereum blockchain by the dealer.
 * Once the payment is received, the dealer transfers ownership to the buyer.
 */

contract Vehicle {
    uint vin_no;
    address owner;
    
    function getVinNo() public view returns (uint) {
        return vin_no;
    }
    
    function getOwner() public view returns (address) {
        return owner;
    }
    
    function soldTo(address buyer) public {
        // Only the current owner can transfer ownership
        if (msg.sender == owner) {
            owner = buyer;
        }
    }
    
    function Vehicle(uint vin, address dealer) public {
        vin_no = vin;
        owner = dealer;
    }
}</pre>
    </fieldset>
    <div id="para-div">
      <p>Let us explain some of the important keywords used in the <span class="bold">Vehicle.sol</span> file shown above.</p>
      <p>A <span class="bold">Solidity</span> source file must always begin with a version pragma. In our case it is the
        first line <span class="hi-yellow">pragma solidity ^0.4.15</span>. This indicates that the source code will not
        compile with a <span class="bold">Solidity</span> compiler with version earlier than <span class="bold">0.4.15</span>
        or starting from <span class="bold">0.5.0</span>.</p>
      <p>The keyword <span class="hi-yellow">contract</span> is similar to the keyword <span class="bold">class</span> in
        many popular object-oriented programming languages like C++, Java, etc. It encapsulates state variables, functions,
        etc</p>
      <p>The keyword <span class="hi-yellow">uint</span> is a built-in data-type and indicates an unsigned integer that is
        256 bits long.</p>
      <p>The keyword <span class="hi-yellow">address</span> is a built-in data-type and indicates the 20 byte hexadecimal
        account address.</p>
      <p>The variables <span class="hi-blue">vin_no</span> and <span class="hi-blue">owner</span> represent the contract's
        state information and will be permanently stored in a block in <span class="bold">Ethereum</span> (often referred
        to as the contract storage).</p>
      <p>The keyword <span class="hi-yellow">public</span> in the <span class="bold">function</span> definition indicates
        that the function can either be called internally or via messages.</p>
      <p>The keyword <span class="hi-yellow">view</span> in the <span class="bold">function</span> definition indicates
        that the function will not modify any state variables.</p>
      <p>The global variable <span class="hi-yellow">msg.sender</span> captures the account address of the caller or sender
        of the transaction message.</p>
    </div>
    <div id="para-div">
      <p>To compile <span class="bold">Vehicle.sol</span> using the <span class="bold">Solidity</span> compiler, execute
        the following command:</p>
    </div>
    <div id="cmd-div">
      <p>$ solc -o ./bin --abi --bin --gas ./src/Vehicle.sol</p>
    </div>
    <div id="para-div">
      <p>The following would be the typical output:</p>
    </div>
    <div id="out-div">
      <h4>Output.2</h4>
      <pre>======= ./src/Vehicle.sol:Vehicle =======
Gas estimation:
construction:
   40527 + 105000 = 145527
external:
   getOwner():  486
   getVinNo():  416
   soldTo(address): 20710</pre>
    </div>
    <div id="para-div">
      <p>From the Output.2 above, one can infer the amount of <span class="bold">gas</span> that will be needed to
        deploy (construction) and/or invoke the different contract functions (once deployed)</p>
    </div>
    <div id="para-div">
      <p>There will be two generated files, namely, <span class="bold">Vehicle.abi</span> and
        <span class="hi-yellow">Vehicle.bin</span> located in the directory <span class="bold">/home/polarsparc/Ethereum/bin</span>.</p>
    </div>
    <div id="para-div">
      <p>The option <span class="hi-yellow">--gas</span> passed to the <span class="bold">Solidity</span> compiler enables
        one to get an estimate of the <span class="bold">gas</span> required to create/deploy a contract and to interact with
        its functions.</p>
    </div>
    <div id="para-div">
      <p>The option <span class="hi-yellow">--abi</span> passed to the <span class="bold">Solidity</span> compiler enables
        the creation of the <span class="hi-yellow">Vehicle.abi</span> file. <span class="hi-blue">ABI</span> stands for
        <span class="bold">Application Binary Interface</span> and is a language neutral contract specification, which
        details all of the publicly accessible contract methods and their associated parameters. For a contract function
        written in <span class="bold">Solidity</span> to call another contract function written in another language, say,
        <span class="bold">Serpent</span>, they both need to implement the same approach to serialize and deserialize data
        - hence the need for a common ABI specification. In other words, ABI  is intended to serve as the standard for
        encoding and decoding of data in to and out of transactions.</p>
    </div>
    <div id="para-div">
      <p>The following is a pretty version of the contents of the file <span class="bold">Vehicle.abi</span> located in the
        directory <span class="bold">/home/polarsparc/Ethereum/bin</span>:</p>
    </div>
    <fieldset id="sc-fieldset"> <legend>Vehicle.abi</legend>
      <pre>[
    {
        "constant": false,
        "inputs": [
            {
                "name": "buyer",
                "type": "address"
            }
        ],
        "name": "soldTo",
        "outputs": [],
        "payable": false,
        "stateMutability": "nonpayable",
        "type": "function"
    },
    {
        "constant": true,
        "inputs": [],
        "name": "getVinNo",
        "outputs": [
            {
                "name": "",
                "type": "uint256"
            }
        ],
        "payable": false,
        "stateMutability": "view",
        "type": "function"
    },
    {
        "constant": true,
        "inputs": [],
        "name": "getOwner",
        "outputs": [
            {
                "name": "",
                "type": "address"
            }
        ],
        "payable": false,
        "stateMutability": "view",
        "type": "function"
    },
    {
        "inputs": [
            {
                "name": "vin",
                "type": "uint256"
            },
            {
                "name": "dealer",
                "type": "address"
            }
        ],
        "payable": false,
        "stateMutability": "nonpayable",
        "type": "constructor"
    }
]</pre>
    </fieldset>
    <div id="para-div">
      <p>The option <span class="hi-yellow">--bin</span> passed to the <span class="bold">Solidity</span> compiler enables
        the creation of the <span class="hi-yellow">Vehicle.bin</span> binary file containing the hex-encoded binary. This
        file contains the bytecode for the specified contract source file <span class="bold">Vehicle.sol</span>. This bytecode
        will be executed by the <span class="bold">Ethereum Virtual Machine</span> (EVM), which serves as a runtime environment
        for smart contracts.</p>
    </div>
    <div id="para-div">
      <p>The following is a pretty version of the contents of the file <span class="bold">Vehicle.bin</span> located in the
        directory <span class="bold">/home/polarsparc/Ethereum/bin</span>:</p>
    </div>
    <fieldset id="sc-fieldset"> <legend>Vehicle.bin</legend>
      <pre>6060604052341561000f57600080fd5b60405160408061029a833981016040528080519060200190919080519060200190919050508160008190
555080600160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffff
ffffff160217905550505061020d8061008d6000396000f300606060405260043610610057576000357c01000000000000000000000000000000
00000000000000000000000000900463ffffffff168063683c80741461005c5780636c41597a14610095578063893d20e8146100be575b600080
fd5b341561006757600080fd5b610093600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091905050610113565b00
5b34156100a057600080fd5b6100a86101ae565b6040518082815260200191505060405180910390f35b34156100c957600080fd5b6100d16101
b7565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191
505060405180910390f35b600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffff
ffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614156101ab5780600160006101000a81548173ffffffffffff
ffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055505b50565b6000805490509056
5b6000600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff169050905600a165627a7a72305820bceb3476d0c8
33c549d1f9f84d71bcfd86b3e23e2ec8c4641a2f71225675fe7f0029</pre>
    </fieldset>
    <div id="para-div">
      <p>Unfortunately, there is no easy way to load these two files <span class="bold">Vehicle.abi</span> and
        <span class="bold">Vehicle.bin</span> via the <span class="bold">geth</span> Javascript shell. Found an excellent
        article written by <span class="bold">Gustavo (Gus) Guimaraes</span> (link included in the References) addressing
        this issue.</p>
    </div>
    <div id="para-div">
      <p>To compile <span class="bold">Vehicle.sol</span> using the <span class="bold">Solidity</span> compiler to generate
        a Javascript file (with <span class="bold">.js</span> file extension) that will contain both the ABI as well as the
        bytecode, execute the following command:</p>
    </div>
    <div id="cmd-div">
      <p>$ echo "var vehicle=`solc --optimize --combined-json abi,bin,interface src/Vehicle.sol`" > bin/Vehicle.js</p>
    </div>
    <div id="para-div">
      <p>The above command will generate a Javascript file called <span class="hi-yellow">Vehicle.js</span> located in
        directory <span class="bold">/home/polarsparc/Ethereum/bin</span> with both the ABI and bytecode for the
        specified contract <span class="bold">Vehicle.sol</span> encoded as JSON.</p>
    </div>
    <div id="para-div">
      <p>To load the above generated Javascript file <span class="bold">Vehicle.js</span>, execute the following command
        in the <span class="bold">geth</span> Javascript shell prompt:</p>
    </div>
    <div id="cmd-div">
      <p>> loadScript("./bin/Vehicle.js")</p>
    </div>
    <div id="para-div">
      <p>The following would be the typical output:</p>
    </div>
    <div id="out-div">
      <h4>Output.3</h4>
      <pre>true</pre>
    </div>
    <div id="para-div">
      <p>To check the value stored in the variable <span class="bold">vehicle</span>, execute the following command
        in the Javascript shell prompt:</p>
    </div>
    <div id="cmd-div">
      <p>> vehicle</p>
    </div>
    <div id="para-div">
      <p>The following would be the typical output:</p>
    </div>
    <div id="out-div">
      <h4>Output.4</h4>
      <pre>{
  contracts: {
    src/Vehicle.sol:Vehicle: {
      abi: "[{\"constant\":false,\"inputs\":[{\"name\":\"buyer\",\"type\":\"address\"}],\"name\":\"soldTo\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"getVinNo\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"getOwner\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"name\":\"vin\",\"type\":\"uint256\"},{\"name\":\"dealer\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"}]",
      bin: "6060604052341561000f57600080fd5b6040516040806101f48339810160405280805191906020018051600093845560018054600160a060020a031916600160a060020a03909216919091179055506101959182915061005f90396000f3006060604052600436106100565763ffffffff7c0100000000000000000000000000000000000000000000000000000000600035041663683c8074811461005b5780636c41597a14610089578063893d20e8146100ae575b600080fd5b341561006657600080fd5b61008773ffffffffffffffffffffffffffffffffffffffff600435166100ea565b005b341561009457600080fd5b61009c610147565b60405190815260200160405180910390f35b34156100b957600080fd5b6100c161014d565b60405173ffffffffffffffffffffffffffffffffffffffff909116815260200160405180910390f35b6001543373ffffffffffffffffffffffffffffffffffffffff90811691161415610144576001805473ffffffffffffffffffffffffffffffffffffffff191673ffffffffffffffffffffffffffffffffffffffff83161790555b50565b60005490565b60015473ffffffffffffffffffffffffffffffffffffffff16905600a165627a7a72305820ead3ff4e0d30a244745dab2015896c6d3ddcbd2ba949323e6386ca18620d7a960029"
    }
  },
  version: "0.4.19+commit.c4cbbb05.Linux.g++"
}</pre>
    </div>
    <div id="para-div">
      <p>To retrieve the <span class="bold">abi</span> value from the variable <span class="bold">vehicle</span>, execute the
        following command in the Javascript shell prompt:</p>
    </div>
    <div id="cmd-div">
      <p>> vehicle.contracts['src/Vehicle.sol:Vehicle'].abi</p>
    </div>
    <div id="para-div">
      <p>The following would be the typical output:</p>
    </div>
    <div id="out-div">
      <h4>Output.5</h4>
      <pre>"[{\"constant\":false,\"inputs\":[{\"name\":\"buyer\",\"type\":\"address\"}],\"name\":\"soldTo\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"getVinNo\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"getOwner\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"name\":\"vin\",\"type\":\"uint256\"},{\"name\":\"dealer\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"}]"</pre>
    </div>
    <div id="para-div">
      <p>Similarly, to retrieve the <span class="bold">bin</span> value from the variable <span class="bold">vehicle</span>, execute
        the following command in the Javascript shell prompt:</p>
    </div>
    <div id="cmd-div">
      <p>> vehicle.contracts['src/Vehicle.sol:Vehicle'].bin</p>
    </div>
    <div id="para-div">
      <p>The following would be the typical output:</p>
    </div>
    <div id="out-div">
      <h4>Output.6</h4>
      <pre>"6060604052341561000f57600080fd5b6040516040806101f48339810160405280805191906020018051600093845560018054600160a060020a031916600160a060020a03909216919091179055506101959182915061005f90396000f3006060604052600436106100565763ffffffff7c0100000000000000000000000000000000000000000000000000000000600035041663683c8074811461005b5780636c41597a14610089578063893d20e8146100ae575b600080fd5b341561006657600080fd5b61008773ffffffffffffffffffffffffffffffffffffffff600435166100ea565b005b341561009457600080fd5b61009c610147565b60405190815260200160405180910390f35b34156100b957600080fd5b6100c161014d565b60405173ffffffffffffffffffffffffffffffffffffffff909116815260200160405180910390f35b6001543373ffffffffffffffffffffffffffffffffffffffff90811691161415610144576001805473ffffffffffffffffffffffffffffffffffffffff191673ffffffffffffffffffffffffffffffffffffffff83161790555b50565b60005490565b60015473ffffffffffffffffffffffffffffffffffffffff16905600a165627a7a72305820ead3ff4e0d30a244745dab2015896c6d3ddcbd2ba949323e6386ca18620d7a960029"</pre>
    </div>
    <div id="para-div">
      <p>For convenience and ease of use, let us assign the addresses of the 2nd and 3rd accounts to variables named
        <span class="hi-yellow">buyer</span> and <span class="hi-yellow">dealer</span> using the Javascript shell
        as shown below:</p>
    </div>
    <div id="cmd-div">
      <p>> buyer = "0x35ddac855e0029676f489dafca9ab405a348317c"</p>
      <p>> dealer = "0x46bf8994c8702919434271d89bcad8abec915612"</p>
    </div>
    <div id="para-div">
      <p>Now we are at a point ready to deploy our first <span class="bold">Smart Contract</span> called <span class="bold">Vehicle</span>
        into our private <span class="bold">Ethereum</span> network.</p>
    </div>
    <div id="para-div">
      <p>The first step is to create a contract object. To create a contract object called <span class="hi-blue">vehicle_contract</span>,
        execute the following command in the Javascript shell prompt:</p>
    </div>
    <div id="cmd-div">
      <p>> var vehicle_contract = eth.contract(JSON.parse(vehicle.contracts['src/Vehicle.sol:Vehicle'].abi))</p>
    </div>
    <div id="para-div">
      <p>The following would be the typical output:</p>
    </div>
    <div id="out-div">
      <h4>Output.7</h4>
      <pre>undefined</pre>
    </div>
    <div id="para-div">
      <p>To check the value of the contract object variable <span class="bold">vehicle_contract</span>, execute the following command
      in the Javascript shell prompt:</p>
    </div>
    <div id="cmd-div">
      <p>> vehicle_contract</p>
    </div>
    <div id="para-div">
      <p>The following would be the typical output:</p>
    </div>
    <div id="out-div">
      <h4>Output.8</h4>
      <pre>{
  abi: [{
      constant: false,
      inputs: [{...}],
      name: "soldTo",
      outputs: [],
      payable: false,
      stateMutability: "nonpayable",
      type: "function"
  }, {
      constant: true,
      inputs: [],
      name: "getVinNo",
      outputs: [{...}],
      payable: false,
      stateMutability: "view",
      type: "function"
  }, {
      constant: true,
      inputs: [],
      name: "getOwner",
      outputs: [{...}],
      payable: false,
      stateMutability: "view",
      type: "function"
  }, {
      inputs: [{...}, {...}],
      payable: false,
      stateMutability: "nonpayable",
      type: "constructor"
  }],
  eth: {
    accounts: ["0xef17ec5df3116dea3b7abaf1ff3045639453cc76", "0x35ddac855e0029676f489dafca9ab405a348317c", "0x46bf8994c8702919434271d89bcad8abec915612", "0x518a6377a3863201aef3310da41f3448d959a310"],
    blockNumber: 83,
    coinbase: "0xef17ec5df3116dea3b7abaf1ff3045639453cc76",
    compile: {
      lll: function(),
      serpent: function(),
      solidity: function()
    },
    defaultAccount: undefined,
    defaultBlock: "latest",
    gasPrice: 18000000000,
    hashrate: 0,
    mining: false,
    pendingTransactions: [],
    protocolVersion: "0x3f",
    syncing: false,
    call: function(),
    contract: function(abi),
    estimateGas: function(),
    filter: function(options, callback, filterCreationErrorCallback),
    getAccounts: function(callback),
    getBalance: function(),
    getBlock: function(),
    getBlockNumber: function(callback),
    getBlockTransactionCount: function(),
    getBlockUncleCount: function(),
    getCode: function(),
    getCoinbase: function(callback),
    getCompilers: function(),
    getGasPrice: function(callback),
    getHashrate: function(callback),
    getMining: function(callback),
    getPendingTransactions: function(callback),
    getProtocolVersion: function(callback),
    getRawTransaction: function(),
    getRawTransactionFromBlock: function(),
    getStorageAt: function(),
    getSyncing: function(callback),
    getTransaction: function(),
    getTransactionCount: function(),
    getTransactionFromBlock: function(),
    getTransactionReceipt: function(),
    getUncle: function(),
    getWork: function(),
    iban: function(iban),
    icapNamereg: function(),
    isSyncing: function(callback),
    namereg: function(),
    resend: function(),
    sendIBANTransaction: function(),
    sendRawTransaction: function(),
    sendTransaction: function(),
    sign: function(),
    signTransaction: function(),
    submitTransaction: function(),
    submitWork: function()
  },
  at: function(address, callback),
  getData: function(),
  new: function()
}</pre>
    </div>
    <div id="para-div">
      <p>Next, we will define 3 variables, namely, <span class="hi-yellow">vin</span>, <span class="hi-yellow">gas_price</span>,
        and <span class="hi-yellow">contract_transaction</span> with values representing the Vehicle Identification Number (VIN),
        the gas price paid for the contract creation, and the contract transaction object that encapsulates the address of the
        account creating the contract, the bytecode of the contract, and the gas price. Execute the following statements in the
        Javascript shell as shown below:</p>
    </div>
    <div id="cmd-div">
      <p>> var vin = 1234567890</p>
      <p>> var gas_price = 1000000</p>
      <p>> var contract_transaction = { from: dealer, data: '0x'+vehicle.contracts['src/Vehicle.sol:Vehicle'].bin, gas: gas_price }</p>
    </div>
    <div id="para-div">
      <p>To check the value of the contract transaction object variable <span class="bold">contract_transaction</span>, execute the
        following command in the Javascript shell prompt:</p>
    </div>
    <div id="cmd-div">
      <p>> contract_transaction</p>
    </div>
    <div id="para-div">
      <p>The following would be the typical output:</p>
    </div>
    <div id="out-div">
      <h4>Output.9</h4>
      <pre>{
  data: "0x6060604052341561000f57600080fd5b6040516040806101f48339810160405280805191906020018051600093845560018054600160a060020a031916600160a060020a03909216919091179055506101959182915061005f90396000f3006060604052600436106100565763ffffffff7c0100000000000000000000000000000000000000000000000000000000600035041663683c8074811461005b5780636c41597a14610089578063893d20e8146100ae575b600080fd5b341561006657600080fd5b61008773ffffffffffffffffffffffffffffffffffffffff600435166100ea565b005b341561009457600080fd5b61009c610147565b60405190815260200160405180910390f35b34156100b957600080fd5b6100c161014d565b60405173ffffffffffffffffffffffffffffffffffffffff909116815260200160405180910390f35b6001543373ffffffffffffffffffffffffffffffffffffffff90811691161415610144576001805473ffffffffffffffffffffffffffffffffffffffff191673ffffffffffffffffffffffffffffffffffffffff83161790555b50565b60005490565b60015473ffffffffffffffffffffffffffffffffffffffff16905600a165627a7a72305820ead3ff4e0d30a244745dab2015896c6d3ddcbd2ba949323e6386ca18620d7a96002900000000000000000000000000000000000000000000000000000000499602d200000000000000000000000046bf8994c8702919434271d89bcad8abec915612",
  from: "0x46bf8994c8702919434271d89bcad8abec915612",
  gas: "0xf4240"
}</pre>
    </div>
    <div id="para-div">
      <p>Since the contract is deployed by the dealer, we need to unlock the dealer account before proceeding further.</p>
      <p>To unlock the dealer account, execute the following command in the Javascript shell prompt:</p>
    </div>
    <div id="cmd-div">
      <p>> personal.unlockAccount(dealer)</p>
    </div>
    <div id="para-div">
      <p>This will prompt us for the password for the dealer account. The following would be the typical output:</p>
    </div>
    <div id="out-div">
      <h4>Output.10</h4>
      <pre>Unlock account 0x46bf8994c8702919434271d89bcad8abec915612
Passphrase: dealer
true</pre>
    </div>
    <div id="para-div">
      <p>The second step is to create an instance of the contract object by calling the <span class="hi-yellow">new</span>
        method on the contract object <span class="bold">vehicle_contract</span>, passing in the required arguments. Execute
        the following command in the Javascript shell prompt:</p>
    </div>
    <div id="cmd-div">
      <p>> var vehicle_contract_inst = vehicle_contract.new(vin, dealer, contract_transaction)</p>
    </div>
    <div id="para-div">
      <p>The following would be the typical output:</p>
    </div>
    <div id="out-div">
      <h4>Output.11</h4>
      <pre>undefined</pre>
    </div>
    <div id="para-div">
      <p>To check the value of the contract instance variable <span class="bold">vehicle_contract_inst</span>, execute the
        following command in the Javascript shell prompt:</p>
    </div>
    <div id="cmd-div">
      <p>> vehicle_contract_inst</p>
    </div>
    <div id="para-div">
      <p>The following would be the typical output:</p>
    </div>
    <div id="out-div">
      <h4>Output.12</h4>
      <pre>{
  abi: [{
      constant: false,
      inputs: [{...}],
      name: "soldTo",
      outputs: [],
      payable: false,
      stateMutability: "nonpayable",
      type: "function"
  }, {
      constant: true,
      inputs: [],
      name: "getVinNo",
      outputs: [{...}],
      payable: false,
      stateMutability: "view",
      type: "function"
  }, {
      constant: true,
      inputs: [],
      name: "getOwner",
      outputs: [{...}],
      payable: false,
      stateMutability: "view",
      type: "function"
  }, {
      inputs: [{...}, {...}],
      payable: false,
      stateMutability: "nonpayable",
      type: "constructor"
  }],
  address: undefined,
  transactionHash: "0x56eb85db9905d2b6f33a832f1bae745b59dabc34c54db31346cffe453dec2910"
}</pre>
    </div>
    <div id="para-div">
      <p>The above contract instance creation command will create an <span class="bold">Ethereum</span> transaction that needs
        to be mined for the contract to be deployed on the private <span class="bold">Blockchain</span> network.</p>
      <p>From the Output.12, we see the <span class="hi-yellow">transactionHash</span> for the contract deployment transaction.</p>
    </div>
    <div id="para-div">
      <p>To start the miner with one mining thread, execute the following command in the Javascript shell prompt:</p>
    </div>
    <div id="cmd-div">
      <p>> miner.start(1)</p>
    </div>
    <div id="para-div">
      <p>In a few seconds (about 5 to 10), the contract deployment transaction will be mined and the contract will be deployed
        to our private <span class="bold">Blockchain</span> network.</p>
    </div>
    <div id="para-div">
      <p>To stop the miner, execute the following command in the Javascript shell prompt:</p>
    </div>
    <div id="cmd-div">
      <p>> miner.stop()</p>
    </div>
    <div id="para-div">
      <p>To retrieve the transaction details of the just sent transaction 0x56eb85db9905d2b6f33a832f1bae745b59dabc34c54db31346cffe453dec2910,
        execute the following command in the Javascript shell prompt:</p>
    </div>
    <div id="cmd-div">
      <p>> eth.getTransactionReceipt(vehicle_contract_inst.transactionHash)</p>
    </div>
    <div id="para-div">
      <p>The following would be the typical output:</p>
    </div>
    <div id="out-div">
      <h4>Output.13</h4>
      <pre>{
  blockHash: "0x2a4cd01691866665382342f80d8714ffa125691c65128ef8c06e41be65468499",
  blockNumber: 84,
  contractAddress: "0xfa332003301955dd8526f0ef3aa7c670bda5f4fa",
  cumulativeGasUsed: 206925,
  from: "0x46bf8994c8702919434271d89bcad8abec915612",
  gasUsed: 206925,
  logs: [],
  logsBloom: "0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
  root: "0x2d7fa49d64b631e3818ecad7813305f63cc9785ce99b3afe1d0120b02a9ad664",
  to: null,
  transactionHash: "0x56eb85db9905d2b6f33a832f1bae745b59dabc34c54db31346cffe453dec2910",
  transactionIndex: 0
}</pre>
    </div>
    <div id="para-div">
      <p>The presence of a value for the <span class="hi-yellow">contractAddress</span> indicates that the contract has been
        successfully deployed to our private <span class="bold">Blockchain</span> network.</p>
    </div>
    <div id="para-div">
      <p>To check the bytecode of the just deployed contract 0xfa332003301955dd8526f0ef3aa7c670bda5f4fa, execute the following
        command in the Javascript shell prompt:</p>
    </div>
    <div id="cmd-div">
      <p>> eth.getCode(eth.getTransactionReceipt(vehicle_contract_inst.transactionHash).contractAddress)</p>
    </div>
    <div id="para-div">
      <p>The following would be the typical output:</p>
    </div>
    <div id="out-div">
      <h4>Output.14</h4>
      <pre>"0x6060604052600436106100565763ffffffff7c0100000000000000000000000000000000000000000000000000000000600035041663683c8074811461005b5780636c41597a14610089578063893d20e8146100ae575b600080fd5b341561006657600080fd5b61008773ffffffffffffffffffffffffffffffffffffffff600435166100ea565b005b341561009457600080fd5b61009c610147565b60405190815260200160405180910390f35b34156100b957600080fd5b6100c161014d565b60405173ffffffffffffffffffffffffffffffffffffffff909116815260200160405180910390f35b6001543373ffffffffffffffffffffffffffffffffffffffff90811691161415610144576001805473ffffffffffffffffffffffffffffffffffffffff191673ffffffffffffffffffffffffffffffffffffffff83161790555b50565b60005490565b60015473ffffffffffffffffffffffffffffffffffffffff16905600a165627a7a72305820ead3ff4e0d30a244745dab2015896c6d3ddcbd2ba949323e6386ca18620d7a960029"</pre>
    </div>
    <div id="para-div">
      <p>The last step is to create an instance of the <span class="bold">Vehicle</span> contract that was just deployed to
        our private <span class="bold">Blockchain</span>, so we can invoke the contract function(s). To create a instance of
        the <span class="bold">Vehicle</span> contract, we need to invoke the <span class="hi-yellow">at</span> method on the
        contract object <span class="bold">vehicle_contract</span>, passing in the value of <span class="bold">contractAddress</span>
        as the argument. Execute the following command in the Javascript shell prompt:</p>
    </div>
    <div id="cmd-div">
      <p>> var vehicle_inst = vehicle_contract.at(eth.getTransactionReceipt(vehicle_contract_inst.transactionHash).contractAddress)</p>
    </div>
    <div id="para-div">
      <p>The following would be the typical output:</p>
    </div>
    <div id="out-div">
      <h4>Output.15</h4>
      <pre>undefined</pre>
    </div>
    <div id="para-div">
      <p>To check the value of the contract instance variable <span class="bold">vehicle_inst</span>, execute the following command
        in the Javascript shell prompt:</p>
    </div>
    <div id="cmd-div">
      <p>> vehicle_inst</p>
    </div>
    <div id="para-div">
      <p>The following would be the typical output:</p>
    </div>
    <div id="out-div">
      <h4>Output.16</h4>
      <pre>{
  abi: [{
      constant: false,
      inputs: [{...}],
      name: "soldTo",
      outputs: [],
      payable: false,
      stateMutability: "nonpayable",
      type: "function"
  }, {
      constant: true,
      inputs: [],
      name: "getVinNo",
      outputs: [{...}],
      payable: false,
      stateMutability: "view",
      type: "function"
  }, {
      constant: true,
      inputs: [],
      name: "getOwner",
      outputs: [{...}],
      payable: false,
      stateMutability: "view",
      type: "function"
  }, {
      inputs: [{...}, {...}],
      payable: false,
      stateMutability: "nonpayable",
      type: "constructor"
  }],
  address: "0xfa332003301955dd8526f0ef3aa7c670bda5f4fa",
  transactionHash: null,
  allEvents: function(),
  getOwner: function(),
  getVinNo: function(),
  soldTo: function()
}</pre>
    </div>
    <div id="para-div">
      <p>To invoke the <span class="hi-blue">getOwner</span> method on the contract instance <span class="bold">vehicle_inst</span>,
        execute the following command in the Javascript shell prompt:</p>
    </div>
    <div id="cmd-div">
      <p>> vehicle_inst.getOwner.call()</p>
    </div>
    <div id="para-div">
      <p>The following would be the typical output:</p>
    </div>
    <div id="out-div">
      <h4>Output.17</h4>
      <pre>"0x46bf8994c8702919434271d89bcad8abec915612"</pre>
    </div>
    <div id="para-div">
      <p>Similarly, to invoke the <span class="hi-blue">getVinNo</span> method, execute the following command in the Javascript
        shell prompt:</p>
    </div>
    <div id="cmd-div">
      <p>> vehicle_inst.getVinNo.call()</p>
    </div>
    <div id="para-div">
      <p>The following would be the typical output:</p>
    </div>
    <div id="out-div">
      <h4>Output.18</h4>
      <pre>1234567890</pre>
    </div>
    <div id="para-div">
      <p>By using the <span class="hi-blue">call()</span> method, the contract methods are executed locally on the connected
        <span class="bold">Ethereum</span> node without costing any <span class="bold">gas</span>. This also means that any
        changes made to the contract state (such as calling the <span class="hi-blue">soldTo</span> method) will not be
        persisted or stored in our private <span class="bold">Blockchain</span>.</p>
    </div>
    <div id="section-div">
      <p>References</p>
    </div>
    <div id="para-div">
      <p><a href="http://www.polarsparc.com/Ethereum/Ethereum-1.html" target="_blank"><span class="bold">Introduction to Ethereum - Part 1
        </span></a></p>
      <p><a href="https://solidity.readthedocs.io/en/develop/" target="_blank"><span class="bold">Official Solidity Documentation</span>
        </a></p>
      <p><a href="https://medium.com/@gus_tavo_guim/deploying-a-smart-contract-the-hard-way-8aae778d4f2a" target="_blank">
        <span class="bold">Deploying A Smart Contract, The Hard Way</span>
        </a></p>
    </div>
  </body>
</html>
