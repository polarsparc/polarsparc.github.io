<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="content-type" content="application/xhtml+xml; charset=windows-1252" />
    <meta name="author" content="Bhaskar.S">
    <meta name="description" content="DHT22 Sensor with ESP32 - Setup and Test">
    <meta name="subject" content="DHT22 Sensor with ESP32 - Setup and Test">
    <meta name="keywords" content="esp32, iot">
    <meta name="robots" content="index, follow">
    <meta name="googlebot" content="index, follow">
    <title>DHT22 Sensor with ESP32 - Setup and Test</title>
    <link href="../css/polarsparc-v2.4.css" type="text/css" rel="stylesheet" />
  </head>
  <body>
    <br/>
    <table borber="0">
      <tr>
        <td valign="bottom"><span id="ps-home"></span></td>
        <td valign="bottom"><span id="home-a"><a id="home-a" href="https://polarsparc.github.io/">PolarSPARC</a></span></td>
      </tr>
    </table>
    <br/>
    <div id="title-div">
      <p>DHT22 Sensor with ESP32 - Setup and Test</p>
    </div>
    <br />
    <table id="ad-table">
      <tbody>
        <tr>
          <td class="author-td">Bhaskar S</td>
          <td class="date-td">01/02/2026</td>
        </tr>
      </tbody>
    </table>
    <hr class="line-hr"/>
    <br/>
    <div id="section-div">
      <p>Overview</p>
    </div>
    <div id="para-div">
      <p><span class="hi-purple">DHT22</span> is a a humidity and temperatur sensor with the following features:</p>
      <ul id="blue-sqr-ul">
        <li><p>Working voltage between <span class="bold">3</span>V to <span class="bold">5.5</span>V</p></li>
        <li><p>Humidity measurements between <span class="bold">0</span> % RH to <span class="bold">100</span> % RH with accuracy of
          <span class="bold">2</span>%</p></li>
        <li><p>Temperature measurements between <span class="bold">-40</span> degrees C to <span class="bold">80</span> degrees C
          with accuracy of <span class="bold">0.5</span>%</p></li>
        <li><p>Signal output is digital</p></li>
        <li><p>Measurement resolution of <span class="bold">16</span> bits</p></li>
      </ul>
    </div>
    <div id="para-div">
      <p>The DHT22 sensor can be wired to the ESP32 microcontroller (via a breadboard) to read the room humidity and temperature at
        frequent intervals.</p>
    </div>
    <div id="para-div">
      <p>The following illustration depicts the wiring schematic ESP32 with DHT22 on a breadboard:</p>
    </div>
    <br/>
    <div id="img-outer-div"> <img src="./images/esp32-17.png" class="img-cls" alt="DHT22 with ESP32" />
      <div class="img-cap">Figure.1</div>
    </div>
    <br/>
    <div id="para-div">
      <p>The red wire connects the first pin marked <span class="hi-red">3.3</span> volts on the ESP32 to the power pin (marked +)
        on the DHT22.</p>
      <p>The black wire connects the pin marked <span class="hi-grey">GND</span> on the ESP32 to the ground pin (marked -) on the
        DHT22.</p>
      <p>The blue wire connects the GPIO pin marked <span class="hi-blue">D4</span> on the ESP32 to the middle pin (marked OUT) on
        the DHT22.</p>
      <p>The yellow wire connects one end of a <span class="hi-yellow">10K</span> ohm resistor to the power line (where the red wires
        connect), while the other end connects to the sensor out line (where the blue wires connect).</p>
    </div>
    <div id="para-div">
      <p>The following illustration depicts the breadboard with the actual wiring with the components:</p>
    </div>
    <br/>
    <div id="img-outer-div"> <img src="./images/esp32-18.png" class="img-cls" alt="Wiring Components" />
      <div class="img-cap">Figure.2</div>
    </div>
    <br/>
    <br/>
    <div id="section-div">
      <p>Hands-on ESP32 with DHT22</p>
    </div>
    <div id="para-div">
      <p>The DHT22 sensor project using the ESP32 microcontroller will be called <span class="bold">DHT22Sensor</span>, whose purpose
        would be to read the sensor measurements every 5 seconds in a loop.</p>
    </div>
    <div id="para-div">
      <p>To create our DHT22 sensor project, click on the <span class="bold">New Project</span> button on the <span class="bold">PIO
        Home</span> screen, enter the project name as <span class="bold">DHT22Sensor</span>, select the board as <span class="bold">
        Expressif ESP32 Dev Module</span>, leave the framework to the defaulted <span class="bold">Arduino</span>, uncheck the box
        and select the directory location for the project, and finally click on the <span class="bold">Finish</span> button.</p>
    </div>
    <div id="para-div">
      <p>This will take a few seconds to initialize and setup.</p>
    </div>
    <div id="para-div">
      <p>For interfacing with the DHT22 sensor, we need to add a library to the PlatformIO development environment. In order to do
        just that, click on the <span class="bold">Libraries</span> icon. This will open the library registry screen with a textbox
        to search for libraries. Enter <span class="bold">DHT22</span> in the textbox and click on the search icon as shown in the
        illustration below:</p>
    </div>
    <br/>
    <div id="img-outer-div"> <img src="./images/esp32-19.png" class="img-cls" alt="Search Library" />
      <div class="img-cap">Figure.3</div>
    </div>
    <br/>
    <div id="para-div">
      <p>Choose the library labeled <span class="bold">DHT sensor library</span> (by Adafruit) by clicking on it as it support the
        <span class="bold">Expressif 32</span> as shown in the illustration below:</p>
    </div>
    <br/>
    <div id="img-outer-div"> <img src="./images/esp32-20.png" class="img-cls" alt="Choose Library" />
      <div class="img-cap">Figure.4</div>
    </div>
    <br/>
    <div id="para-div">
      <p>Click on the <span class="bold">Add to project</span> to include the chosen library as the dependency for a given project
        as shown in the illustration below:</p>
    </div>
    <br/>
    <div id="img-outer-div"> <img src="./images/esp32-21.png" class="img-cls" alt="Library Dependency" />
      <div class="img-cap">Figure.5</div>
    </div>
    <br/>
    <div id="para-div">
      <p>Select the project <span class="bold">DHT22Sensor</span> to include the <span class="bold">DHT sensor library</span> library
        and click on the <span class="bold">Add</span> button as shown in the illustration below:</p>
    </div>
    <br/>
    <div id="img-outer-div"> <img src="./images/esp32-22.png" class="img-cls" alt="Library to Project" />
      <div class="img-cap">Figure.6</div>
    </div>
    <br/>
    <div id="para-div">
      <p>We will modify the code in <span class="bold">main.cpp</span> with the following content, which implements the desired logic
        of reading DHT22 sensor measurements and displaying the results via the serial output:</p>
    </div>
    <br/>
    <div id="src-outer-div-1">
      <div class="gen-src-body">
<pre>/*
 * Name:   DHT22 Sensor for Temperature & Humidity
 * Author: Bhaskar S
 * Date:   01/02/2026
 * Blog:   https://polarsparc.github.io
 */

#include &lt;Arduino.h&gt;
#include &lt;DHT.h&gt;
#include &lt;DHT_U.h&gt;

// DHT sensor type
#define DHTTYPE DHT22

// GPIO Pin 4 (D4 on the board)
const int GPIO4 = 4;

// Initialize DHT sensor
DHT_Unified dht(GPIO4, DHTTYPE);

void setup() {
  Serial.begin(9600);
  Serial.println(F("DHT22 - Setup"));

  sensor_t sensor;

  // Display temperature sensor details
  dht.temperature().getSensor(&sensor);
  Serial.println(F("------------------------------------"));
  Serial.println(F("Temperature Sensor"));
  Serial.print  (F("Sensor Type: ")); Serial.println(sensor.name);
  Serial.print  (F("Driver Ver:  ")); Serial.println(sensor.version);
  Serial.print  (F("Unique ID:   ")); Serial.println(sensor.sensor_id);
  Serial.print  (F("Max Value:   ")); Serial.print(sensor.max_value); Serial.println(F("째C"));
  Serial.print  (F("Min Value:   ")); Serial.print(sensor.min_value); Serial.println(F("째C"));
  Serial.print  (F("Resolution:  ")); Serial.print(sensor.resolution); Serial.println(F("째C"));
  Serial.println(F("------------------------------------"));

  // Display humidity sensor details
  dht.humidity().getSensor(&sensor);
  Serial.println(F("Humidity Sensor"));
  Serial.print  (F("Sensor Type: ")); Serial.println(sensor.name);
  Serial.print  (F("Driver Ver:  ")); Serial.println(sensor.version);
  Serial.print  (F("Unique ID:   ")); Serial.println(sensor.sensor_id);
  Serial.print  (F("Max Value:   ")); Serial.print(sensor.max_value); Serial.println(F("%"));
  Serial.print  (F("Min Value:   ")); Serial.print(sensor.min_value); Serial.println(F("%"));
  Serial.print  (F("Resolution:  ")); Serial.print(sensor.resolution); Serial.println(F("%"));
  Serial.println(F("------------------------------------"));

  dht.begin();
}

void loop() {
  // 5 seconds delay between measurements
  delay(5000);

  // Sensor event for reading data
  sensors_event_t event;

  float temperature = 0.0;

  // Read Temperature
  dht.temperature().getEvent(&event);
  if (! isnan(event.temperature)) {
    temperature = event.temperature;
  }

  float humidity = 0.0;

  // Read Humidity
  dht.humidity().getEvent(&event);
  if (! isnan(event.relative_humidity)) {
    humidity = event.relative_humidity;
  }

  // Check if any of the read events failed
  if (isnan(event.temperature) || isnan(event.relative_humidity)) {
    Serial.println(F("DHT22 - Read event failed !!!"));
    return;
  }

  Serial.print(F("Humidity: "));
  Serial.print(humidity);
  Serial.print(F("%  Temperature: "));
  Serial.print(temperature);
  Serial.println(F("째C"));
}</pre>
      </div>
    </div>
    <br/>
    <div id="para-div">
      <p>To build the code for the <span class="bold">DHT22Sensor</span> project, click on the checkmark icon located on the bottom
        left corner of the status area as shown in the illustration below:</p>
    </div>
    <br/>
    <div id="img-outer-div"> <img src="./images/esp32-23.png" class="img-cls" alt="Code Build" />
      <div class="img-cap">Figure.7</div>
    </div>
    <br/>
    <div id="para-div">
      <p>The build will kick-off in the <span class="bold">Terminal</span> window at the bottom and if the code for the ESP32 project
        is error-free, it will display the percentage of flash used by this image and a successful build message as shown in the
        illustration below:</p>
    </div>
    <br/>
    <div id="img-outer-div"> <img src="./images/esp32-24.png" class="img-cls" alt="Successful Image" />
      <div class="img-cap">Figure.8</div>
    </div>
    <br/>
    <div id="para-div">
      <p>The next step is to flash the ESP32 microcontroller with the just built image. To upload the image for the <span class="bold">
        DHT22Sensor</span> project, click on the left arrow icon located on the bottom left corner of the status area as shown in the
        illustration below:</p>
    </div>
    <br/>
    <div id="img-outer-div"> <img src="./images/esp32-25.png" class="img-cls" alt="Upload Image" />
      <div class="img-cap">Figure.9</div>
    </div>
    <br/>
    <div id="para-div">
      <p>Once the image upload for the <span class="bold">DHT22Sensor</span> project completes, the <span class="bold">Terminal</span>
        window at the bottom will display a success message as shown in the illustration below:</p>
    </div>
    <br/>
    <div id="img-outer-div"> <img src="./images/esp32-26.png" class="img-cls" alt="Upload Success" />
      <div class="img-cap">Figure.10</div>
    </div>
    <br/>
    <div id="para-div">
      <p>To observe the DHT22 sensor readings from the serial line, click on the plug icon located on the bottom left corner of the
        status area as shown in the illustration below:</p>
    </div>
    <br/>
    <div id="img-outer-div"> <img src="./images/esp32-27.png" class="img-cls" alt="Serial Display" />
      <div class="img-cap">Figure.11</div>
    </div>
    <br/>
    <div id="para-div">
      <p>The illustration below depicts the readings being printed on the console. Notice the humidity readings going up as a result
        of me exhaling steam from mouth on the sensor:</p>
    </div>
    <br/>
    <div id="img-outer-div"> <img src="./images/esp32-28.png" class="img-cls" alt="Measurements on Console" />
      <div class="img-cap">Figure.12</div>
    </div>
    <br/>
    <div id="para-div">
      <p>With this, we conclude our hands-on demonstration of the test of the DHT22 sensor with the ESP32 microcontroller !!!</p>
    </div>
    <br/>
    <div id="section-div">
      <p>References</p>
    </div>
    <div id="para-div">
      <p><a href="https://www.espboards.dev/esp32/esp32doit-devkit-v1/" target="_blank"><span class="bold">ESP32 DevKit V1</span></a></p>
    </div>
    <br/>
    <hr class="line-hr" />
    <div>
      <a id="footer-a" href="https://polarsparc.github.io/">&copy;&nbsp;PolarSPARC</a>
    </div>
  </body>
</html>
