<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="content-type" content="application/xhtml+xml; charset=windows-1252" />
    <meta name="author" content="Bhaskar.S">
    <meta name="description" content="Introduction to Linux firewalld">
    <meta name="subject" content="Introduction to Linux firewalld">
    <meta name="keywords" content="linux, firewalld, security">
    <meta name="robots" content="index, follow">
    <meta name="googlebot" content="index, follow">
    <title>Introduction to Linux firewalld</title>
    <link rel="stylesheet" type="text/css" href="../css/polarsparc-v2.4.css" />
  </head>
  <body>
    <br/>
    <table borber="0">
      <tr>
        <td valign="bottom"><span id="ps-home"></span></td>
        <td valign="bottom"><span id="home-a"><a id="home-a" href="https://polarsparc.github.io/">PolarSPARC</a></span></td>
      </tr>
    </table>
    <br/>
    <div id="title-div">
      <p>Introduction to Linux firewalld</p>
    </div>
    <br />
    <table id="ad-table">
      <tbody>
        <tr>
          <td class="author-td">Bhaskar S</td>
          <td class="date-td">01/02/2020</td>
        </tr>
      </tbody>
    </table>
    <hr class="line-hr" /> <br />
    <div id="section-div">
      <p>Overview</p>
    </div>
    <div id="para-div">
      <p>A <span class="hi-yellow">Firewall</span> is a layer of defense with a set of rules that either allow or deny the
        passage of traffic through the network system. Both inbound and outbound <span class="bold">IP</span> packets are
        intercepted and inspected by the <span class="bold">firewall</span> (also referred to as a <span class="hi-yellow">
        Packet Filter</span>) and validated against the rules to either permit or reject the further flow of the packets.</p>
      <p>In <span class="bold">Linux</span>, the <span class="bold">IP</span> packet filtering capability is implemented via
        the kernel-space <span class="hi-yellow">Netfilter</span> module.</p>
      <p>The user-space <span class="hi-green">iptables</span> command-line utility allows one to configure and manage the
        packet filtering rules in the kernel-space <span class="bold">netfilter</span> module. Many consider the syntax and
        usage of <span class="bold">iptables</span> to be a bit obscure. There was a need for a higher-level tool that was
        user-friendly and easier to use - this is where <span class="hi-yellow">firewalld</span> comes into play.</p>
      <p><span class="bold">firewalld</span> consists of three components:</p>
      <ul id="blue-sqr-ul">
        <li>
          <p><span class="hi-yellow">firewalld</span> :: a daemon that acts as the front-end controller for <span class="bold">
            iptables</span>
        </li>
        <li>
          <p><span class="hi-green">firewall-cmd</span> :: a command-line utility to interact with the <span class="bold">
            firewalld</span> daemon</p>
        </li>
        <li>
          <p><span class="hi-green">firewall-config</span> :: a GUI utility to interact with the <span class="bold">firewalld
            </span> daemon</p>
        </li>
      </ul>
      <p>Both the command-line utility <span class="bold">firewall-cmd</span> and the GUI utility <span class="bold">
        firewall-config</span> interact with the daemon <span class="bold">firewalld</span> via the <span class="hi-yellow">
        D-BUS</span> (short for <span class="underbold">D</span>esktop <span class="underbold">BUS</span>, an inter-process
        communication channel for programs to communicate with each other on the <span class="bold">Linux</span> machine).</p>
    </div>
    <div id="para-div">
      <p>The following Figure-1 illustrates the high-level architecture view of <span class="bold">firewalld</span>:</p>
    </div>
    <div id="img-outer-div"> <img src="./images/firewalld.png" class="img-cls" alt="Firewalld"/>
      <div class="img-cap">Figure-1</div>
    </div>
    <div id="section-div">
      <p>Setup</p>
    </div>
    <div id="para-div">
      <p>To get our hands dirty with <span class="bold">firewalld</span>, we will setup a virtual machine on <a target="_blank"
        href="https://www.virtualbox.org/wiki/Downloads"><span class="bold">VirtualBox 6.x</span></a> running <a target="_blank"
        href="https://getfedora.org/en/workstation/download/"><span class="bold">Fedora 31 Workstation</span></a>. Once the
        <span class="bold">Fedora</span> virtual machine boots-up, login and open a <span class="bold">Terminal</span> window.</p>
    </div>
    <div id="para-div">
      <p>Ensure the service <span class="bold">firewalld</span> is up and running by executing the following command:</p>
    </div>
    <div id="cmd-div">
      <p>$ systemctl status firewalld</p>
    </div>
    <div id="para-div">
      <p>The following would be a typical output:</p>
    </div>
    <div id="out-div">
      <h4>Output.1</h4>
      <pre>* firewalld.service - firewalld - dynamic firewall daemon
   Loaded: loaded (/usr/lib/systemd/system/firewalld.service; enabled; vendor preset: enabled)
   Active: active (running) since Tue 2019-12-31 12:20:38 EST; 5min ago
     Docs: man:firewalld(1)
 Main PID: 736 (firewalld)
    Tasks: 2 (limit: 4680)
   Memory: 41.5M
      CPU: 1.003s
   CGroup: /system.slice/firewalld.service
           |--736 /usr/bin/python3 /usr/sbin/firewalld --nofork --nopid

Dec 31 12:20:36 fedora-vm-1 systemd[1]: Starting firewalld - dynamic firewall daemon...
Dec 31 12:20:38 fedora-vm-1 systemd[1]: Started firewalld - dynamic firewall daemon.</pre>
    </div>
    <div id="para-div">
      <p>Next, we will install the <span class="bold">nginx</span> webserver by executing the following command:</p>
    </div>
    <div id="cmd-div">
      <p>$ sudo dnf install nginx</p>
    </div>
    <div id="para-div">
      <p>The following would be a typical output:</p>
    </div>
    <div id="out-div">
      <h4>Output.2</h4>
      <pre>Last metadata expiration check: 2:36:20 ago on Tue 31 Dec 2019 21:11:54 PM EST.
Dependencies resolved.
====================================================================================================================================
 Package                             Architecture              Version                              Repository                 Size
====================================================================================================================================
Installing:
 nginx                               x86_64                    1:1.16.1-1.fc31                      fedora                    564 k
Installing dependencies:
 gperftools-libs                     x86_64                    2.7-6.fc31                           fedora                    322 k
 nginx-filesystem                    noarch                    1:1.16.1-1.fc31                      fedora                     10 k
 nginx-mimetypes                     noarch                    2.1.48-6.fc31                        fedora                     19 k

Transaction Summary
====================================================================================================================================
Install  4 Packages

Total download size: 915 k
Installed size: 3.5 M
Is this ok [y/N]: y
Downloading Packages:
(1/4): nginx-filesystem-1.16.1-1.fc31.noarch.rpm                                                    149 kB/s |  10 kB     00:00    
(2/4): nginx-mimetypes-2.1.48-6.fc31.noarch.rpm                                                     646 kB/s |  19 kB     00:00    
(3/4): gperftools-libs-2.7-6.fc31.x86_64.rpm                                                        1.4 MB/s | 322 kB     00:00    
(4/4): nginx-1.16.1-1.fc31.x86_64.rpm                                                               1.8 MB/s | 564 kB     00:00    
------------------------------------------------------------------------------------------------------------------------------------
Total                                                                                               1.6 MB/s | 915 kB     00:00     
Running transaction check
Transaction check succeeded.
Running transaction test
Transaction test succeeded.
Running transaction
  Preparing        :                                                                                                            1/1 
  Running scriptlet: nginx-filesystem-1:1.16.1-1.fc31.noarch                                                                    1/4 
  Installing       : nginx-filesystem-1:1.16.1-1.fc31.noarch                                                                    1/4 
  Installing       : nginx-mimetypes-2.1.48-6.fc31.noarch                                                                       2/4 
  Installing       : gperftools-libs-2.7-6.fc31.x86_64                                                                          3/4 
  Installing       : nginx-1:1.16.1-1.fc31.x86_64                                                                               4/4 
  Running scriptlet: nginx-1:1.16.1-1.fc31.x86_64                                                                               4/4 
  Verifying        : gperftools-libs-2.7-6.fc31.x86_64                                                                          1/4 
  Verifying        : nginx-1:1.16.1-1.fc31.x86_64                                                                               2/4 
  Verifying        : nginx-filesystem-1:1.16.1-1.fc31.noarch                                                                    3/4 
  Verifying        : nginx-mimetypes-2.1.48-6.fc31.noarch                                                                       4/4 

Installed:
  nginx-1:1.16.1-1.fc31.x86_64               gperftools-libs-2.7-6.fc31.x86_64       nginx-filesystem-1:1.16.1-1.fc31.noarch      
  nginx-mimetypes-2.1.48-6.fc31.noarch      

Complete!</pre>
    </div>
    <div id="para-div">
      <p>Enable the service <span class="bold">nginx</span> by executing the following command:</p>
    </div>
    <div id="cmd-div">
      <p>$ sudo systemctl enable nginx</p>
    </div>
    <div id="para-div">
      <p>The following would be a typical output:</p>
    </div>
    <div id="out-div">
      <h4>Output.3</h4>
      <pre>Created symlink /etc/systemd/system/multi-user.target.wants/nginx.service → /usr/lib/systemd/system/nginx.service.</pre>
    </div>
    <div id="para-div">
      <p>Start the service <span class="bold">nginx</span> by executing the following command:</p>
    </div>
    <div id="cmd-div">
      <p>$ sudo systemctl start nginx</p>
    </div>
    <div id="para-div">
      <p>Ensure the service <span class="bold">nginx</span> is up and running by executing the following command:</p>
    </div>
    <div id="cmd-div">
      <p>$ systemctl status nginx</p>
    </div>
    <div id="para-div">
      <p>The following would be a typical output:</p>
    </div>
    <div id="out-div">
      <h4>Output.4</h4>
      <pre>* nginx.service - The nginx HTTP and reverse proxy server
   Loaded: loaded (/usr/lib/systemd/system/nginx.service; enabled; vendor preset: disabled)
   Active: active (running) since Tue 2019-12-31 21:13:54 EST; 15s ago
  Process: 9913 ExecStartPre=/usr/bin/rm -f /run/nginx.pid (code=exited, status=0/SUCCESS)
  Process: 9914 ExecStartPre=/usr/sbin/nginx -t (code=exited, status=0/SUCCESS)
  Process: 9915 ExecStart=/usr/sbin/nginx (code=exited, status=0/SUCCESS)
 Main PID: 9916 (nginx)
    Tasks: 2 (limit: 4680)
   Memory: 2.5M
      CPU: 35ms
   CGroup: /system.slice/nginx.service
           |--9916 nginx: master process /usr/sbin/nginx
           |--9917 nginx: worker process

Dec 31 21:13:54 fedora-vm-1 systemd[1]: Starting The nginx HTTP and reverse proxy server...
Dec 31 21:13:54 fedora-vm-1 nginx[9914]: nginx: [warn] could not build optimal types_hash, you should increase either types_hash_ma>
Dec 31 21:13:54 fedora-vm-1 nginx[9914]: nginx: the configuration file /etc/nginx/nginx.conf syntax is ok
Dec 31 21:13:54 fedora-vm-1 nginx[9914]: nginx: configuration file /etc/nginx/nginx.conf test is successful
Dec 31 21:13:54 fedora-vm-1 nginx[9915]: nginx: [warn] could not build optimal types_hash, you should increase either types_hash_ma>
Dec 31 21:13:54 fedora-vm-1 systemd[1]: nginx.service: Failed to parse PID from file /run/nginx.pid: Invalid argument
Dec 31 21:13:54 fedora-vm-1 systemd[1]: Started The nginx HTTP and reverse proxy server.</pre>
    </div>
    <br/>
    <div id="section-div">
      <p>Hands-on with firewalld</p>
    </div>
    <div id="para-div">
      <p>The main configuration file <span class="hi-yellow">firewalld.conf</span> for <span class="bold">firewalld</span> is
        located in the directory <span class="hi-yellow">/etc/firewalld</span>.</p>
    </div>
    <div id="para-div">
      <p><span class="bold">firewalld</span> uses the following two constructs for defining the filtering rules:</p>
    </div>
    <ul id="blue-sqr-ul">
      <li>
        <p><span class="hi-yellow">service</span>(s) :: is a grouping for ports and protocols and is used for managing filtering
          rules</p>
      </li>
      <li>
        <p><span class="hi-yellow">zone</span>(s) :: used for categorizing the incoming traffic based on the network interface
          and source address. They are used for grouping and managing a set of packet filtering rules using a set of
          <span class="bold">service</span>(s)</p>
      </li>
    </ul>
    <div id="para-div">
      <p>So, how does the <span class="bold">firewalld</span> really work ???</p>
      <p>At a very high level, when a network packet arrives in the machine, <span class="bold">firewalld</span> checks the
        source address to determine the <span class="bold">zone</span> it belongs to. If <span class="hi-green">found</span>,
        the packet is filtered by the rules of the determined <span class="bold">zone</span>. If <span class="hi-yellow">not
        found</span>, <span class="bold">firewalld</span> checks to determine the <span class="bold">zone</span> based on the
        network interface through which the packet arrived. If <span class="hi-green">found</span>, the packet is filtered by
        the rules of the determined <span class="bold">zone</span>. Again, if <span class="hi-yellow">not found</span>, the
        packet is filtered by the rules of the <span class="underbold">default</span> <span class="bold">zone</span>.</p>
    </div>
    <div id="para-div">
      <p>To list all the system default <span class="bold">service</span>(s), execute the following command:</p>
    </div>
    <div id="cmd-div">
      <p>$ firewall-cmd --get-services</p>
    </div>
    <div id="para-div">
      <p>The following would be a typical output:</p>
    </div>
    <div id="out-div">
      <h4>Output.5</h4>
      <pre>RH-Satellite-6 amanda-client amanda-k5-client amqp amqps apcupsd audit bacula bacula-client bb bgp bitcoin bitcoin-rpc bitcoin-testnet bitcoin-testnet-rpc bittorrent-lsd ceph ceph-mon cfengine cockpit condor-collector ctdb dhcp dhcpv6 dhcpv6-client distcc dns dns-over-tls docker-registry docker-swarm dropbox-lansync elasticsearch etcd-client etcd-server finger freeipa-4 freeipa-ldap freeipa-ldaps freeipa-replication freeipa-trust ftp ganglia-client ganglia-master git grafana gre high-availability http https imap imaps ipp ipp-client ipsec irc ircs iscsi-target isns jenkins kadmin kdeconnect kerberos kibana klogin kpasswd kprop kshell ldap ldaps libvirt libvirt-tls lightning-network llmnr managesieve matrix mdns memcache minidlna mongodb mosh mountd mqtt mqtt-tls ms-wbt mssql murmur mysql nfs nfs3 nmea-0183 nrpe ntp nut openvpn ovirt-imageio ovirt-storageconsole ovirt-vmconsole plex pmcd pmproxy pmwebapi pmwebapis pop3 pop3s postgresql privoxy prometheus proxy-dhcp ptp pulseaudio puppetmaster quassel radius rdp redis redis-sentinel rpc-bind rsh rsyncd rtsp salt-master samba samba-client samba-dc sane sip sips slp smtp smtp-submission smtps snmp snmptrap spideroak-lansync spotify-sync squid ssdp ssh steam-streaming svdrp svn syncthing syncthing-gui synergy syslog syslog-tls telnet tentacle tftp tftp-client tile38 tinc tor-socks transmission-client upnp-client vdsm vnc-server wbem-http wbem-https wsman wsmans xdmcp xmpp-bosh xmpp-client xmpp-local xmpp-server zabbix-agent zabbix-server</pre>
    </div>
    <div id="para-div">
      <p>The Output.5 above lists all the pre-defined system <span class="bold">service</span>(s) whose definitions are located
        in the directory <span class="hi-yellow">/usr/lib/firewalld/services</span>.</p>
    </div>
    <div id="para-div">
      <p>The following table describes some of the pre-defined system <span class="bold">services</span>(s) listed in Output.5
        above:</p>
    </div>
    <table id="col2-table">
      <thead><tr>
        <th>Service</th>
        <th>Description</th>
      </tr>
      </thead> <tbody>
        <tr>
          <td class="col2-c1-odd"><span class="bold">dhcpv6-client</span></td>
          <td class="col2-c2-odd">allow traffic for DHCPv6 client service on port 546 (udp)</td>
        </tr>
        <tr>
          <td class="col2-c1-even"><span class="bold">ipp-client</span></td>
          <td class="col2-c2-even">allow traffic for local printing server service on port 631 (udp)</td>
        </tr>
        <tr>
          <td class="col2-c1-odd"><span class="bold">mdns</span></td>
          <td class="col2-c2-odd">allow traffic for Multicast DNS local link service on port 5353 (udp)</td>
        </tr>
        <tr>
          <td class="col2-c1-even"><span class="bold">samba-client</span></td>
          <td class="col2-c2-even">allow traffic for local Windows files and printer sharing service on port 137 (udp) and
            138 (udp)</td>
        </tr>
        <tr>
          <td class="col2-c1-odd"><span class="bold">ssh</span></td>
          <td class="col2-c2-odd">allow traffic for local SSH Server service on port 22 (tcp)</td>
        </tr>
      </tbody>
    </table>
    <div id="para-div">
      <p>For example, to display the <span class="bold">service</span> definition for <span class="bold">ssh</span>, execute
        the following command:</p>
    </div>
    <div id="cmd-div">
      <p>$ cat /usr/lib/firewalld/services/ssh.xml</p>
    </div>
    <div id="para-div">
      <p>The following would be a typical output:</p>
    </div>
    <div id="out-div">
      <h4>Output.6</h4>
      <pre>&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;service&gt;
  &lt;short&gt;SSH&lt;/short&gt;
  &lt;description&gt;Secure Shell (SSH) is a protocol for logging into and executing commands on remote machines. It provides secure encrypted communications. If you plan on accessing your machine remotely via SSH over a firewalled interface, enable this option. You need the openssh-server package installed for this option to be useful.&lt;/description&gt;
  &lt;port protocol="tcp" port="22"/&gt;
&lt;/service&gt;</pre>
    </div>
    <div id="para-div">
      <p>The Output.6 above defines the <span class="bold">ssh</span> network <span class="bold">service</span> that uses
        the <span class="underbold">tcp</span> protocol on port <span class="underbold">22</span>.</p>
    </div>
    <div id="para-div">
      <p>Let us look at another example. Display the <span class="bold">service</span> definition for <span class="bold">dns
        </span> by executing the following command:</p>
    </div>
    <div id="cmd-div">
      <p>$ cat /usr/lib/firewalld/services/dns.xml</p>
    </div>
    <div id="para-div">
      <p>The following would be a typical output:</p>
    </div>
    <div id="out-div">
      <h4>Output.7</h4>
      <pre>&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;service&gt;
  &lt;short&gt;DNS&lt;/short&gt;
  &lt;description&gt;The Domain Name System (DNS) is used to provide and request host and domain names. Enable this option, if you plan to provide a domain name service (e.g. with bind).&lt;/description&gt;
  &lt;port protocol="tcp" port="53"/&gt;
  &lt;port protocol="udp" port="53"/&gt;
&lt;/service&gt;</pre>
    </div>
    <div id="para-div">
      <p>From the Output.7 above, we see multiple definitions for protocol and port groupings (not just one).</p>
    </div>
    <div id="para-div">
      <p>To list all the the system default <span class="bold">zone</span>(s), execute the following command:</p>
    </div>
    <div id="cmd-div">
      <p>$ firewall-cmd --get-zones</p>
    </div>
    <div id="para-div">
      <p>The following would be a typical output:</p>
    </div>
    <div id="out-div">
      <h4>Output.8</h4>
      <pre>FedoraServer FedoraWorkstation block dmz drop external home internal libvirt public trusted work</pre>
    </div>
    <div id="para-div">
      <p>The Output.8 above lists all the pre-defined system <span class="bold">zone</span>(s) whose definitions are located
        in the directory <span class="hi-yellow">/usr/lib/firewalld/zones</span>.</p>
    </div>
    <div id="para-div">
      <p>The following table describes some of the pre-defined system <span class="bold">zone</span>(s) listed in Output.5
        above:</p>
    </div>
    <table id="col2-table">
      <thead><tr>
        <th>Zone</th>
        <th>Description</th>
      </tr>
      </thead> <tbody>
        <tr>
          <td class="col2-c1-odd"><span class="bold">trusted</span></td>
          <td class="col2-c2-odd">allows all incoming traffic</td>
        </tr>
        <tr>
          <td class="col2-c1-even"><span class="bold">home</span></td>
          <td class="col2-c2-even">customized for home network. It allows incoming traffic from the following services: ssh,
            mdns, ipp-client, samba-client and dhcpv6-client</td>
        </tr>
        <tr>
          <td class="col2-c1-odd"><span class="bold">internal</span></td>
          <td class="col2-c2-odd">similar to home zone but it is customized for internal network. It allows incoming traffic
            from the following services: ssh, mdns, ipp-client, samba-client and dhcpv6-client</td>
        </tr>
        <tr>
          <td class="col2-c1-even"><span class="bold">work</span></td>
          <td class="col2-c2-even">customized for work network. It allows incoming traffic from the following services: ssh,
            ipp-client and dhcpv6-client</td>
        </tr>
        <tr>
          <td class="col2-c1-odd"><span class="bold">public</span></td>
          <td class="col2-c2-odd">customized for public network. It allows incoming traffic from the following services: ssh
            and dhcpv6-client</td>
        </tr>
        <tr>
          <td class="col2-c1-even"><span class="bold">external</span></td>
          <td class="col2-c2-even">customized for masquerading. It allows incoming traffic from ssh service only</td>
        </tr>
        <tr>
          <td class="col2-c1-odd"><span class="bold">dmz</span></td>
          <td class="col2-c2-odd">customized to limit the access to internal network. It allows incoming traffic from ssh
            service only</td>
        </tr>
        <tr>
          <td class="col2-c1-even"><span class="bold">block</span></td>
          <td class="col2-c2-even">rejects all incoming traffic with “icmp-host-prohibited” message for IPv4 and
            "icmp6-adm-prohibited" for IPv6. Network connections initiated from within the machine are allowed</td>
        </tr>
        <tr>
          <td class="col2-c1-odd"><span class="bold">drop</span></td>
          <td class="col2-c2-odd">rejects all incoming traffic without sending any error message. Outgoing network
            connections are allowed</td>
        </tr>
      </tbody>
    </table>
    <div id="para-div">
      <p>One of the <span class="bold">zone</span>(s) is designated as the default active <span class="bold">zone</span>.</p>
    </div>
    <div id="para-div">
      <p>To find the default <span class="bold">zone</span> for the system, execute the following command:</p>
    </div>
    <div id="cmd-div">
      <p>$ firewall-cmd --get-default-zone</p>
    </div>
    <div id="para-div">
      <p>The following would be a typical output:</p>
    </div>
    <div id="out-div">
      <h4>Output.9</h4>
      <pre>FedoraWorkstation</pre>
    </div>
    <div id="para-div">
      <p>To display the <span class="bold">zone</span> definition for <span class="bold">FedoraWorkstation</span>, execute
        the following command:</p>
    </div>
    <div id="cmd-div">
      <p>$ cat /usr/lib/firewalld/zones/FedoraWorkstation.xml</p>
    </div>
    <div id="para-div">
      <p>The following would be a typical output:</p>
    </div>
    <div id="out-div">
      <h4>Output.10</h4>
      <pre>&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;zone&gt;
  &lt;short&gt;Fedora Workstation&lt;/short&gt;
  &lt;description&gt;Unsolicited incoming network packets are rejected from port 1 to 1024, except for select network services. Incoming packets that are related to outgoing network connections are accepted. Outgoing network connections are allowed.&lt;/description&gt;
  &lt;service name="dhcpv6-client"/&gt;
  &lt;service name="ssh"/&gt;
  &lt;service name="samba-client"/&gt;
  &lt;port protocol="udp" port="1025-65535"/&gt;
  &lt;port protocol="tcp" port="1025-65535"/&gt;
&lt;/zone&gt;</pre>
    </div>
    <div id="para-div">
      <p>From the Output.10 above, we see the <span class="bold">FedoraWorkstation</span> system <span class="bold">zone</span>
        allows traffic for the system <span class="bold">service</span>(s) such as <span class="bold">dhcpv6-client</span>,
        <span class="bold">ssh</span>, <span class="bold">samba-client</span>, OR any <span class="underbold">tcp</span> /
        <span class="underbold">udp</span> traffic for ports in the range <span class="underbold">1025</span> through
        <span class="underbold">65535</span>.</p>
    </div>
    <div id="para-div">
      <p>In other words, each of the pre-defined <span class="bold">zone</span>(s) allow only a set of pre-defined
        <span class="bold">service</span>(s) to pass through while denying others.</p>
    </div>
    <div id="para-div">
      <p>Each network interface is associated with a <span class="bold">zone</span> so one can control what network traffic
        would be allowed for that interface.</p>
    </div>
    <div id="para-div">
      <p>To find the network interface(s) associated with the different active <span class="bold">zone</span> for the system,
        execute the following command:</p>
    </div>
    <div id="cmd-div">
      <p>$ firewall-cmd --get-active-zones</p>
    </div>
    <div id="para-div">
      <p>The following would be a typical output:</p>
    </div>
    <div id="out-div">
      <h4>Output.11</h4>
      <pre>FedoraWorkstation
  interfaces: enp0s3
libvirt
  interfaces: virbr0</pre>
    </div>
    <div id="para-div">
      <p>To display all the pertinent information for <span class="bold">FedoraWorkstation</span> in one go, the current default
        active <span class="bold">zone</span>, execute the following command:</p>
    </div>
    <div id="cmd-div">
      <p>$ firewall-cmd --list-all --zone="FedoraWorkstation"</p>
    </div>
    <div id="para-div">
      <p>The following would be a typical output:</p>
    </div>
    <div id="out-div">
      <h4>Output.12</h4>
      <pre>FedoraWorkstation (active)
  target: default
  icmp-block-inversion: no
  interfaces: enp0s3
  sources: 
  services: dhcpv6-client mdns samba-client ssh
  ports: 1025-65535/udp 1025-65535/tcp
  protocols: 
  masquerade: no
  forward-ports: 
  source-ports: 
  icmp-blocks: 
  rich rules: </pre>
    </div>
    <div id="para-div">
      <p>To display all the permitted <span class="bold">service</span>(s) on the machine, execute the following command:</p>
    </div>
    <div id="cmd-div">
      <p>$ firewall-cmd --list-services</p>
    </div>
    <div id="para-div">
      <p>The following would be a typical output:</p>
    </div>
    <div id="out-div">
      <h4>Output.13</h4>
      <pre>dhcpv6-client mdns samba-client ssh</pre>
    </div>
    <div id="para-div">
      <p>To display all the port(s) through which traffic is permitted on the machine, execute the following command:</p>
    </div>
    <div id="cmd-div">
      <p>$ firewall-cmd --list-ports</p>
    </div>
    <div id="para-div">
      <p>The following would be a typical output:</p>
    </div>
    <div id="out-div">
      <h4>Output.14</h4>
      <pre>1025-65535/udp 1025-65535/tcp</pre>
    </div>
    <div id="para-div">
      <p>From both the outputs Output.13 and Output.14, we see neither the <span class="bold">service</span> called
        <span class="bold">http</span> nor the <span class="underbold">tcp</span> port <span class="underbold">80</span>
        enabled. This means access to the <span class="bold">nginx</span> webserver will be DENIED !!!</p>
    </div>
    <div id="para-div">
      <p>To determine the <span class="bold">ip</span> address for the network interface <span class="bold">enp0s3</span>
        of the virtual machine, execute the following command:</p>
    </div>
    <div id="cmd-div">
      <p>$ ip addr show enp0s3</p>
    </div>
    <div id="para-div">
      <p>The following would be a typical output:</p>
    </div>
    <div id="out-div">
      <h4>Output.15</h4>
      <pre>2: enp0s3: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP group default qlen 1000
    link/ether 08:00:27:ba:dc:6c brd ff:ff:ff:ff:ff:ff
    inet 192.168.1.237/24 brd 192.168.1.255 scope global dynamic noprefixroute enp0s3
       valid_lft 65094sec preferred_lft 65094sec
    inet6 fe80::7ccc:eac8:6297:cfef/64 scope link noprefixroute 
       valid_lft forever preferred_lft forever</pre>
    </div>
    <div id="para-div">
      <p>From the Output.15 above, we see the <span class="bold">ip</span> address as <span class="bold">192.168.1.237</span>.</p>
    </div>
    <div id="para-div">
      <p>To access the <span class="bold">nginx</span> webserver running on the address <span class="bold">192.168.1.237</span>,
        execute the following command:</p>
    </div>
    <div id="cmd-div">
      <p>$ curl http://192.168.1.237</p>
    </div>
    <div id="para-div">
      <p>The following would be a typical output:</p>
    </div>
    <div id="out-div">
      <h4>Output.16</h4>
      <pre>curl: (7) Failed to connect to 192.168.1.237 port 80: No route to host</pre>
    </div>
    <div id="para-div">
      <p>From the Output.16 above, we see access to the <span class="bold">nginx</span> webserver is DENIED !!!</p>
    </div>
    <div id="para-div">
      <p>Let us display the <span class="bold">service</span> definition for <span class="bold">http</span> by executing the
        following command:</p>
    </div>
    <div id="cmd-div">
      <p>$ cat /usr/lib/firewalld/services/http.xml</p>
    </div>
    <div id="para-div">
      <p>The following would be a typical output:</p>
    </div>
    <div id="out-div">
      <h4>Output.17</h4>
      <pre>&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;service&gt;
  &lt;short&gt;WWW (HTTP)&lt;/short&gt;
  &lt;description&gt;HTTP is the protocol used to serve Web pages. If you plan to make your Web server publicly available, enable this option. This option is not required for viewing pages locally or developing Web pages.&lt;/description&gt;
  &lt;port protocol="tcp" port="80"/&gt;
&lt;/service&gt;</pre>
    </div>
    <div id="para-div">
      <p>To enable the <span class="bold">service</span> for <span class="bold">http</span> on the active <span class="bold">
        zone</span> (<span class="bold">FedoraWorkstation</span>), execute the following command:</p>
    </div>
    <div id="cmd-div">
      <p>$ sudo firewall-cmd --zone=FedoraWorkstation --add-service=http</p>
    </div>
    <div id="para-div">
      <p>The following would be a typical output:</p>
    </div>
    <div id="out-div">
      <h4>Output.18</h4>
      <pre>success</pre>
    </div>
    <div id="para-div">
      <p>Once again, to access the <span class="bold">nginx</span> webserver running on the address <span class="bold">192.168.1.237
        </span>, execute the following command:</p>
    </div>
    <div id="cmd-div">
      <p>$ curl http://192.168.1.237</p>
    </div>
    <div id="para-div">
      <p>The following would be a typical output:</p>
    </div>
    <div id="out-div">
      <h4>Output.19</h4>
      <pre>&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"&gt;

&lt;html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"&gt;
&lt;head&gt;
  &lt;title&gt;Test Page for the HTTP Server on Fedora&lt;/title&gt;
  &lt;meta http-equiv="Content-Type" content="text/html; charset=us-ascii" /&gt;
  &lt;style type="text/css"&gt;
    /*&lt;![CDATA[*/
    body {
      background-color: #fff;
      color: #000;
      font-size: 0.9em;
      font-family: sans-serif,helvetica;
      margin: 0;
      padding: 0;
    }
    :link {
      color: #c00;
    }
    :visited {
      color: #c00;
    }
    a:hover {
      color: #f50;
    }
    h1 {
      text-align: center;
      margin: 0;
      padding: 0.6em 2em 0.4em;
      background-color: #22437f;
      color: #fff;
      font-weight: normal;
      font-size: 1.75em;
      border-bottom: 2px solid #000;
    }
    h1 strong {
      font-weight: bold;
    }
    h2 {
      font-size: 1.1em;
      font-weight: bold;
    }
    hr {
      display: none;
    }
    .content {
      padding: 1em 5em;
    }
    .content-columns {
      /* Setting relative positioning allows for absolute positioning for sub-classes */
      position: relative;
      padding-top: 1em;
    }
    .content-column-left {
      /* Value for IE/Win; will be overwritten for other browsers */
      width: 47%;
      padding-right: 3%;
      float: left;
      padding-bottom: 2em;
    }
    .content-column-left hr {
      display: none;
    }
    .content-column-right {
      /* Values for IE/Win; will be overwritten for other browsers */
      width: 47%;
      padding-left: 3%;
      float: left;
      padding-bottom: 2em;
    }
    .content-columns&gt;.content-column-left, .content-columns&gt;.content-column-right {
      /* Non-IE/Win */
    }
    img {
      border: 2px solid #fff;
      padding: 2px;
      margin: 2px;
    }
    a:hover img {
      border: 2px solid #f50;
    }
    /*]]&gt;*/
  &lt;/style&gt;
&lt;/head&gt;

&lt;body&gt;
  &lt;h1&gt;Fedora Webserver &lt;strong&gt;Test Page&lt;/strong&gt;&lt;/h1&gt;

  &lt;div class="content"&gt;
    &lt;div class="content-middle"&gt;
      &lt;p&gt;This page is used to test the proper operation of the
      Fedora HTTP server after it has been installed. If you can
      read this page, it means that the web server installed at
      this site is working properly, but has not yet been
      configured.&lt;/p&gt;
    &lt;/div&gt;
    &lt;hr /&gt;

    &lt;div class="content-columns"&gt;
      &lt;div class="content-column-left"&gt;
        &lt;h2&gt;If you are a member of the general public:&lt;/h2&gt;

        &lt;p&gt;The fact that you are seeing this page indicates that
        the website you just visited is either experiencing
        problems or undergoing routine maintenance.&lt;/p&gt;

        &lt;p&gt;If you would like to let the administrators of this
        website know that you've seen this page instead of the page
        you expected, you should send them e-mail. In general, mail
        sent to the name "webmaster" and directed to the website's
        domain should reach the appropriate person.&lt;/p&gt;

        &lt;p&gt;For example, if you experienced problems while visiting
        www.example.com, you should send e-mail to "webmaster@example.com".&lt;/p&gt;

        &lt;p&gt;Fedora is a distribution of Linux, a popular computer
        operating system. It is commonly used by hosting companies
        because it is free, and includes free web server software.
        Many times, they do not set up their web server correctly,
        and it displays this "test page" instead of the expected
        website.&lt;/p&gt;

        &lt;p&gt;Accordingly, please keep these facts in mind:&lt;/p&gt;

        &lt;ul&gt;
          &lt;li&gt;Neither the Fedora Project or Red Hat has any
          affiliation with any website or content hosted from this
          server (unless otherwise explicitly stated).&lt;/li&gt;

          &lt;li&gt;Neither the Fedora Project or Red Hat has "hacked"
          this webserver, this test page is an included component
          of the Fedora webserver software.&lt;/li&gt;
        &lt;/ul&gt;

        &lt;p&gt;For more information about Fedora, please visit the
        &lt;a href="https://getfedora.org/"&gt;Fedora Project website&lt;/a&gt;.&lt;/p&gt;
        &lt;hr /&gt;
      &lt;/div&gt;

      &lt;div class="content-column-right"&gt;
        &lt;h2&gt;If you are the website administrator:&lt;/h2&gt;

        &lt;p&gt;You may now add content to the webroot directory. Note
        that until you do so, people visiting your website will see
        this page, and not your content.&lt;/p&gt;

        &lt;p&gt;For systems using
        &lt;a href="https://docs.fedoraproject.org/en-US/quick-docs/getting-started-with-apache-http-server/index.html"&gt; &lt;strong&gt;Apache Webserver&lt;/strong&gt;&lt;/a&gt;:
        You may now add content to the directory &lt;code&gt;/var/www/html/&lt;/code&gt;.
        Note that until you do so, people visiting your website will see
        this page, and not your content. To prevent this page from
        ever being used, follow the instructions in the file
        &lt;code&gt;/etc/httpd/conf.d/welcome.conf&lt;/code&gt;.&lt;/p&gt;

        &lt;p&gt;For systems using
        &lt;a href="https://fedoraproject.org/wiki/Nginx"&gt;&lt;strong&gt;Nginx&lt;/strong&gt;&lt;/a&gt;:
        You should now put your content in a location of your
        choice and edit the &lt;code&gt;root&lt;/code&gt; configuration directive
        in the &lt;strong&gt;nginx&lt;/strong&gt; configuration file
        &lt;code&gt;/etc/nginx/nginx.conf&lt;/code&gt;.&lt;/p&gt;
      &lt;/div&gt;

      &lt;div class="logos"&gt;
        &lt;a href="https://getfedora.org/"&gt;&lt;img src= "/icons/poweredby.png" alt="[ Powered by Fedora ]" /&gt;&lt;/a&gt; &lt;!-- Fedora --&gt;
        &lt;img src="poweredby.png" /&gt;&lt;/a&gt; &lt;!-- webserver --&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
    </div>
    <div id="para-div">
      <p><span class="bold">BINGO</span> !!! The traffic from <span class="underbold">tcp</span> port <span class="underbold">
        80</span> is now ALLOWED !!!</p>
      <p><span class="caution">NOTE</span> :: the added <span class="bold">service</span> for <span class="bold">http</span>
        is temporary meaning it will be removed if the virtual machine reboots.</p>
    </div>
    <div id="para-div">
      <p>To permanently add the <span class="bold">service</span> for <span class="bold">http</span> on the current active
        <span class="bold">zone</span> (<span class="bold">FedoraWorkstation</span>), execute the following command:</p>
    </div>
    <div id="cmd-div">
      <p>$ sudo firewall-cmd --zone=FedoraWorkstation --permanent --add-service=http</p>
    </div>
    <div id="para-div">
      <p>The following would be a typical output:</p>
    </div>
    <div id="out-div">
      <h4>Output.20</h4>
      <pre>success</pre>
    </div>
    <div id="para-div">
      <p>To reload the updated <span class="bold">firewalld</span> rules, execute the following command:</p>
    </div>
    <div id="cmd-div">
      <p>$ sudo firewall-cmd --reload</p>
    </div>
    <div id="para-div">
      <p>The following would be a typical output:</p>
    </div>
    <div id="out-div">
      <h4>Output.21</h4>
      <pre>success</pre>
    </div>
    <div id="para-div">
      <p>To permanently remove the <span class="bold">service</span> for <span class="bold">http</span> on the current active
        <span class="bold">zone</span> (<span class="bold">FedoraWorkstation</span>), execute the following command:</p>
    </div>
    <div id="cmd-div">
      <p>$ sudo firewall-cmd --zone=FedoraWorkstation --permanent --remove-service=http</p>
    </div>
    <div id="para-div">
      <p>The following would be a typical output:</p>
    </div>
    <div id="out-div">
      <h4>Output.22</h4>
      <pre>success</pre>
    </div>
    <div id="para-div">
      <p>The <span class="bold">firewalld</span> rules need to be reloaded after the updated.</p>
    </div>
    <div id="section-div">
      <p>References</p>
    </div>
    <div id="para-div">
      <p><a href="https://firewalld.org/documentation/" target="_blank"><span class="bold">Firewalld Documentation</span></a></p>
    </div>
    <br/>
    <hr class="line-hr" />
    <div>
      <a id="footer-a" href="https://polarsparc.github.io/">&copy;&nbsp;PolarSPARC</a>
    </div>
  </body>
</html>
