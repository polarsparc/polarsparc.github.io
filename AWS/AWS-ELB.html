<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
  <head>
    <meta http-equiv="content-type" content="application/xhtml+xml; charset=windows-1252" />
    <meta name="author" content="Bhaskar.S">
    <meta name="description" content="AWS Elastic Load Balancer (ELB) - Quick Notes">
    <meta name="subject" content="AWS Elastic Load Balancer (ELB) - Quick Notes">
    <meta name="keywords" content="aws, cloud">
    <meta name="robots" content="index, follow">
    <meta name="googlebot" content="index, follow">
    <title>AWS Elastic Load Balancer (ELB) - Quick Notes</title>
    <link href="../css/polarsparc-v2.4.css" type="text/css" rel="stylesheet" />
  </head>
  <body>
    <br/>
    <table borber="0">
      <tr>
        <td valign="bottom"><span id="ps-home"></span></td>
        <td valign="bottom"><span id="home-a"><a id="home-a" href="https://polarsparc.github.io/">PolarSPARC</a></span></td>
      </tr>
    </table>
    <br/>
    <div id="title-div">
      <p>AWS Elastic Load Balancer (ELB) - Quick Notes</p>
    </div>
    <br />
    <table id="ad-table">
      <tbody>
        <tr>
          <td class="author-td">Bhaskar S</td>
          <td class="date-td">12/16/2023</td>
        </tr>
      </tbody>
    </table>
    <hr class="line-hr" />
    <br/>
    <div id="section-div">
      <p>AWS Elastic Load Balancing</p>
    </div>
    <br/>
    <div id="para-div">
      <p>AWS <span class="hi-yellow">Elastic Load Balancing</span>, also referred to as <span class="hi-yellow">ELB</span>, is a cloud
        service automatically distributes the incoming traffic across multiple targets, such as EC2 instances, containers, and IP
        addresses, in one or more Availability Zones. It monitors the health of its registered targets and routes traffic only to
        the healthy targets.</p>
    </div>
    <div id="para-div">
      <p>The following is the summary of the various features/capabilities of ELB:</p>
      <ul id="blue-sqr-ul">
        <li><p>Is a managed service with AWS responsible for upgrades and maintenance</p></li>
        <li><p>Increases the availability and fault tolerance of user applications</p></li>
        <li><p>Exposes a single point of contact for an application</p></li>
        <li><p>Seamlessly handle failures of the target Instances</p></li>
        <li><p>Must select at least two Availability Zones</p></li>
        <li><p>High Availability across Availability Zones</p></li>
        <li><p>Enables one to separate the public traffic from the private traffic</p></li>
        <li><p>Default Security Group allows all incoming traffic via HTTP (80) or HTTPS (443)</p></li>
        <li><p>Provides support for SSL Termination</p></li>
        <li><p>Enforce stickiness with cookies</p></li>
        <li><p>Fixed DNS name - &lt;NAME&gt;.&lt;REGION&gt;.elb.amazonaws.com</p></li>
      </ul>
    </div>
    <div id="para-div">
      <p>ELB supports the following types of <span class="hi-vanila">Load Balancer</span>s:</p>
      <div id="step-div">
        <p>Application Load Balancer (ALB)</p>
      </div>
      <ul id="blue-sqr-ul">
        <li><p>Operates at the Application Layer (Layer 7) of the OSI model</p></li>
        <li><p>Support protocols HTTP/2, HTTPS, gRPC, WebSocket</p></li>
        <li><p>Support for redirecting requests from one URL to another</p></li>
        <li><p>Load balancing across multiple <span class="hi-vanila">Target Group</span>s (group of EC2 Instances)</p></li>
        <li><p>Load balancing to multiple applications in the same EC2 Instance (containers)</p></li>
        <li><p>Support for routing based on URI path</p></li>
        <li><p>Support for routing based on hostname in the URL</p></li>
        <li><p>Support for routing based on HTTP headers or query string</p></li>
        <li><p>Support for Sticky Sessions (Session Affinity)</p></li>
        <li><p>Health checks HTTP, HTTPS, gRPC</p></li>
      </ul>
      <div id="step-div">
        <p>Network Load Balancer (NLB)</p>
      </div>
      <ul id="blue-sqr-ul">
        <li><p>Operates at the Transport Layer (Layer 4) of the OSI model</p></li>
        <li><p>Support protocols TCP, UDP, TLS</p></li>
        <li><p>Can handles millions of requests per sec</p></li>
        <li><p>Support for one fixed static IP address (or Elastic IP) per Availability Zone</li>
        <li><p>Support for registering targets by IP address, including targets outside the load balancer</p></li>
        <li><p>Health checks TCP, HTTP, HTTPS</p></li>
      </ul>
      <div id="step-div">
        <p>Gateway Load Balancer (GWLB)</p>
      </div>
      <ul id="blue-sqr-ul">
        <li><p>Operates at the Network Layer (Layer 3) of the OSI model</p></li>
        <li><p>Listens for all IP packets across all ports and routes traffic to specific targets</p></li>
        <li><p>Used to inetgrate with third party network appliances (ex: firewall, intrusion detection, packet inspection, etc)</p></li>
        <li><p>Uses the <span class="hi-vanila">GENEVE</span> protocol on port 6081 to communicate</p></li>
        <li><p>Health checks TCP, HTTP, HTTPS</p></li>
      </ul>
      <div id="step-div">
        <p>Classic Load Balancer (CLB)</p>
      </div>
      <ul id="blue-sqr-ul">
        <li><p>Older generation and <span class="underbold">DEPRECATED</span></p></li>
        <li><p>Support protocols HTTP, HTTPS, TCP, SSL</p></li>
        <li><p>Support for routing based on URL to an application running across Instances</p></li>
        <li><p>Health checks TCP, SSL, HTTP, HTTPS</p></li>
      </ul>
    </div>
    <div id="section-div">
      <p>EC2 Auto Scaling</p>
    </div>
    <div id="para-div">
      <p><span class="hi-vanila">EC2 Auto Scaling</span> helps ensure that the correct number of EC2 Instances available to handle
        the needs of the application.</p>
      <p>The following are some of the features:</p>
      <ul id="blue-sqr-ul">
        <li><p>Create a collection of EC2 Instances called a <span class="hi-vanila">Auto Scaling Group</span></p></li>
        <li><p>One needs to specify the minimum, desired, and maximum number of EC2 Instances</p></li>
        <li><p>Uses a <span class="hi-vanila">Launch Template</span> (specifies the Instance configuration) to start new EC2 Instances</p></li>
        <li><p>Automatically monitors the health and availability of Instances using Health Checks and replaces terminated or impaired
          Instances</p></li>
        <li><p>One can specify multiple Availability Zones for high availability and resiliency</p></li>
        <li><p>One can specify <span class="hi-vanila">Scaling Policies</span> to launch or terminate Instances based on demand</p></li>
      </ul>
    </div>
    <div id="section-div">
      <p>Scaling Policies</p>
    </div>
    <div id="para-div">
      <p><span class="bold">Scaling</span> is the ability to increase or decrease the compute capacity of the application. Scaling
        starts with an scaling trigger, which instructs an Auto Scaling Group to either launch or terminate EC2 Instances.</p>
      <p>The following are the four types of Scaling Policies:</p>
      <div id="step-div">
        <p>Manual</p>
      </div>
      <ul id="blue-sqr-ul">
        <li><p>One can scale an existing Auto Scaling Group by attaching new Instances</p></li>
        <li><p>For simple workloads</p></li>
      </ul>
      <div id="step-div">
        <p>Scheduled</p>
      </div>
      <ul id="blue-sqr-ul">
        <li><p>Set up scaling schedule according to predictable usage patterns</p></li>
        <li><p>Scaling action sets the desired, minimum, and maximum capacity settings based on a specified the date and time</p></li>
        <li><p>By default schedules are in Universal Time (UTC), which can be changed to specific time zone</p></li>
        <li><p>Schedules are per Auto Scale Group</p></li>
      </ul>
      <div id="step-div">
        <p>Dynamic</p>
      </div>
      <div id="para-div">
        <p>Scales the capacity of the Auto Scaling Group based on changes to the application traffic.</p>
        <p>The following are the three types of Dynamic Scaling Policies:</p>
      </div>
      <ul id="blue-sqr-ul">
        <li><p><span class="hi-vanila">Target Tracking Scaling</span> - Increase or decrease the current capacity of the Auto Scaling
          Group based on a monitoring metric and a target value</p></li>
        <li><p><span class="hi-vanila">Step Scaling</span> - Increase or decrease the current capacity of the Auto Scaling Group
          based on an Alarm (Ex: if CPU &gt; 70%, increase by 2 Instance and if CPU &lt; 30, decrease by 2 Instances)</p></li>
        <li><p><span class="hi-vanila">Simple Scaling</span> - Similar to Step Scaling, but with a <span class="bold">Cool Down</span>
          period (Default is 5 mins and no scaling during this period even if there is an Alarm)</p></li>
      </ul>
      <div id="step-div">
        <p>Predictive</p>
      </div>
      <ul id="blue-sqr-ul">
        <li><p>For situations that have cyclical pattern, such as high usage during regular business hours and low usage during
          evenings and weekends</p></li>
        <li><p>Scales capacity in advance based on the forecasted daily and weekly patterns</p></li>
        <li><p>Uses <span class="bold">Machine Learning</span> to predict capacity requirements based on historical usage data</p></li>
      </ul>
    </div>
    <div id="section-div">
      <p>Sticky Sessions</p>
    </div>
    <div id="para-div">
      <p>A <span class="hi-vanila">Sticky Session</span> (also known as <span class="hi-vanila">Session Affinity</span>) implies
        that traffic from the same client should be consistently routed to the same target EC2 Instance. This option can be enabled
        either for the <span class="bold">Application Load Balancer</span> or the <span class="bold">Classic Load Balancer</span>.
        Sticky Session can be achieved using a HTTP <span class="bold">Cookie</span>, which can be generated either by the Load
        Balancer or the application.</p>
      <p>The following are the two cases:</p>
      <div id="step-div">
        <p>Load Balancer generated Cookie</p>
      </div>
      <ul id="blue-sqr-ul">
        <li><p>Cookie name used is AWSALB</p></li>
        <li><p>Cookie has an expiry of 7 days and is not configurable</p></li>
      </ul>
      <div id="step-div">
        <p>Application generated Cookie</p>
      </div>
      <ul id="blue-sqr-ul">
        <li><p>Flexibility to set a custom cookie for client-target stickiness</p></li>
        <li><p>Cookie name must be registered in the Load Balancer and cannot be the names AWSALB, AWSALBAPP, AWSALBTG</p></li>
        <li><p>Cookie expiry can be between 1 sec to 7 days</p></li>
        <li><p>The custom cookie can include any of the cookie attributes required by the application</p></li>
      </ul>
    </div>
    <div id="section-div">
      <p>Cross-Zone Load Balancing</p>
    </div>
    <div id="para-div">
      <p>By default, each Load Balancer instance distributes traffic across the registered targets in its Availability Zone only.
        If the <span class="hi-vanila">Cross-Zone Load Balancing</span> option is enabled, then each of the load balancer instances
        will evenly distribute the traffic across the registered targets in all enabled Availability Zones.</p>
      <p>The following is the summary of the features:</p>
      <ul id="blue-sqr-ul">
        <li><p>For Application Load Balancer, this option is always enabled (cannot be disabled) and no charges will be incurred for
          the inter Availability Zone data transfers</p></li>
        <li><p>For Network Load Balancer, this option is disabled by default. If enabled, <span class="underbold">WILL</span> incur
          charges for the inter Availability Zone data transfers</p></li>
        <li><p>For Classic Load Balancer, this option is disabled by default. If enabled, <span class="underbold">NO</span> charges
          will be incurred for the inter Availability Zone data transfers</p></li>
      </ul>
    </div>
    <br/>
    <div id="section-div">
      <p>References</p>
    </div>
    <div id="para-div">
      <p><a href="https://docs.aws.amazon.com/elasticloadbalancing/" target="_blank"><span class="bold">Official AWS ELB Documentation</span></a></p>
      <p><a href="https://docs.aws.amazon.com/elasticloadbalancing/latest/application/introduction.html" target="_blank"><span class="bold">Application Load Balancer</span></a></p>
      <p><a href="https://docs.aws.amazon.com/elasticloadbalancing/latest/network/introduction.html" target="_blank"><span class="bold">Network Load Balancer</span></a></p>
      <p><a href="https://docs.aws.amazon.com/elasticloadbalancing/latest/gateway/introduction.html" target="_blank"><span class="bold">Gateway Load Balancer</span></a></p>
      <p><a href="https://docs.aws.amazon.com/autoscaling/ec2/userguide/what-is-amazon-ec2-auto-scaling.html" target="_blank"><span class="bold">EC2 Auto Scaling</span></a></p>
      <p><a href="https://docs.aws.amazon.com/elasticloadbalancing/latest/application/sticky-sessions.html" target="_blank"><span class="bold">Sticky Sessions</span></a></p>
    </div>
    <hr class="line-hr" />
    <div>
      <a id="footer-a" href="https://polarsparc.github.io/">&copy;&nbsp;PolarSPARC</a>
    </div>
  </body>
</html>
