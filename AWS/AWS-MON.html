<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
  <head>
    <meta http-equiv="content-type" content="application/xhtml+xml; charset=windows-1252" />
    <meta name="author" content="Bhaskar.S">
    <meta name="description" content="AWS Logging and Monitoring - Quick Notes">
    <meta name="subject" content="AWS Logging and Monitoring - Quick Notes">
    <meta name="keywords" content="aws, cloud">
    <meta name="robots" content="index, follow">
    <meta name="googlebot" content="index, follow">
    <title>AWS Logging and Monitoring - Quick Notes</title>
    <link href="../css/polarsparc-v2.4.css" type="text/css" rel="stylesheet" />
  </head>
  <body>
    <br/>
    <table borber="0">
      <tr>
        <td valign="bottom"><span id="ps-home"></span></td>
        <td valign="bottom"><span id="home-a"><a id="home-a" href="https://polarsparc.github.io/">PolarSPARC</a></span></td>
      </tr>
    </table>
    <br/>
    <div id="title-div">
      <p>AWS Logging and Monitoring - Quick Notes</p>
    </div>
    <br />
    <table id="ad-table">
      <tbody>
        <tr>
          <td class="author-td">Bhaskar S</td>
          <td class="date-td">01/23/2024</td>
        </tr>
      </tbody>
    </table>
    <hr class="line-hr" />
    <br/>
    <div id="section-div">
      <p>Amazon CloudWatch</p>
    </div>
    <div id="para-div">
      <p>The following is the summary of the various features/capabilities of <span class="hi-yellow">CloudWatch</span>:</p>
      <ul id="blue-sqr-ul">
        <li><p>Is used for performance monitoring, trigger alarms, log collection, and automated actions</p></li>
        <li><p>Can create alarms that watch metrics and send notifications or automatically make changes to the resources that are
          monitored when a threshold is breached</p></li>
        <li><p>Can also collect metrics from on-prem systems</p></li>
        <li><p>One can automate responses to operational changes to improve operational performance and resource optimization (Ex:
          monitor the CPU usage on EC2 instances and use that metric to determine if additional need to be launched to handle increased
          load)</p></li>
        <li><p>Derive actionable insights from logs</p></li>
        <li>
          <p>The following are some of the categories under CloudWatch:</p>
          <div id="step-div">
            <p>CloudWatch Metrics</p>
          </div>
          <ul id="blue-arw-ul">
            <li><p>Provides various metrics for the various AWS services for monitoring purposes</p></li>
            <li><p>Services send time sequenced metrics data points</p></li>
            <li><p>EC2 metrics sent every <span class="hi-red">5</span> mins by default</li>
            <li><p>One can enable detailed monitoring (incurs cost) for sending EC2 metrics every <span class="hi-red">1</span> min</p></li>
            <li><p><span class="hi-vanila">Unified CloudWatch Agent</span> can send system level metrics (memory and disk usage)
              for EC2 Instances as well as on-prem servers when installed</p></li>
            <li><p>Unified CloudWatch Agent can be used to send custom metrics from applications using statsd or collectd protocols</p></li>
            <li><p>Default EC2 metrics does <span class="underbold">NOT</span> include memory and disk metrics</p></li>
            <li><p>One can create Dashboards from the metrics</p></li>
            <li><p>One can also create custom metrics and publish via CLI or API</p></li>
            <li><p>One can stream metrics using <span class="bold">Kinesis Data Firehose</span> (and from there to other destinations)
              with near real-time delivery and low latency</p></li>
          </ul>
          <div id="step-div">
            <p>CloudWatch Alarms</p>
          </div>
          <ul id="blue-arw-ul">
            <li><p>Used to initiate actions when a metric breaches some threshold</p></li>
            <li><p>There are two types - <span class="hi-vanila">Metric Alarm</span> and <span class="hi-vanila">Composite Alarm</span></p></li>
            <li><p><span class="bold">Metric Alarm</span> means perform one or more actions based on a single metric</p></li>
            <li><p><span class="bold">Composite Alarm</span> uses a rule expression (with AND and OR conditions) and works on multiple
              other alarms</p></li>
            <li><p>Has three states - <span class="bold">OK</span> (within threshold), <span class="bold">INSUFFICIENT_DATA</span>
              (not enough data), <span class="bold">ALARM</span> (threshold breached)</p></li>
            <li>
              <p>Have three action targets for EC2 Instances</p>
              <ol>
                <li><p>Stop, Terminate, Reboot</p></li>
                <li><p>Auto scaling action</p></li>
                <li><p>Send notification to SNS</p></li>
              </ol>
            </li>
          </ul>
          <div id="step-div">
            <p>CloudWatch Logs</p>
          </div>
          <ul id="blue-arw-ul">
            <li><p>Centralized place to collect and store system and application logs</p></li>
            <li><p>Can define log expiration policies (never expire, 1 day to 10 years, etc)</p></li>
            <li><p>Are encrypted by default</p></li>
            <li><p>Can be sent to various destinations - S3 (via export), Kinesis Data Streams, Kinesis Data Firehose, Lambda,
              OpenSearch</p></li>
            <li><p>Unified CloudWatch Agent when installed on EC2 Instance or on-prem server, can send logs to CloudWatch</p></li>
            <li><p>Ability to query multiple <span class="bold">Log Groups</span> across AWS services for AWS accounts</p></li>
            <li><p>Subscription Filters allow one to stream the log events in real-time which can be sent to Kinesis Data Streams,
              Kinesis Data Firehose, or Lambda for further processing</span></p></li>
            <li><p>Can be used when we want to move Exabytes of data</p></li>
            <li><p>Ability to stream log events from across AWS accounts and different Regions</p></li>
          </ul>
          <div id="step-div">
            <p>CloudWatch Events (aka EventBridge)</p>
          </div>
          <ul id="blue-arw-ul">
            <li><p>Stream of system events describing changes to AWS resources which can be used to trigger actions</span></p></li>
          </ul>
          <div id="step-div">
            <p>CloudWatch Insights</p>
          </div>
          <ul id="blue-arw-ul">
            <li><p><span class="hi-vanila">Container Insights</span> - Collect, aggregate, summarize metrics and logs from containers
              (ECS, EKS, K8S on EC2, Fargate)</span></p></li>
            <li><p><span class="hi-vanila">Lambda Insights</span> - Monitoring and troubleshooting for serverless applications running
              on AWS Lambda by collecting, aggregating, summarizing system-level metrics as well as diagnostic information on cold
              starts and shutdowns</span></p></li>
            <li><p><span class="hi-vanila">Contributor Insights</span> - Analyze log data for creating a time series, which can be
              used to identify the top-N contributors (services or hosts) impacting the system performance</span></p></li>
          </ul>
        </li>
      </ul>
    </div>
    <div id="section-div">
      <p>Amazon CloudTrail</p>
    </div>
    <div id="para-div">
      <p>The following is the summary of the various features/capabilities of <span class="hi-yellow">CloudTrail</span>:</p>
      <ul id="blue-sqr-ul">
        <li><p>Enables one to perform operational and risk auditing, governance, and compliance of their AWS account</p></li>
        <li><p>Any API actions taken by a user, role, AWS service, SDK, CLI, or Console are recorded as events</p></li>
        <li><p>Allows one to figure who did what, when, and on what resources</p></li>
        <li><p>It is enabled by default</p></li>
        <li><p>One can get a history of all the events made within an AWS account for the past <span class="hi-red">90</span> days</p></li>
        <li><p>One can move the logs into CloudWatch Logs or S3 bucket if one wants a retention period greater than 90 days</p></li>
        <li><p>A Trail can be applied to all Regions (default) or a single Region</p></li>
        <li><p>Events can be triggered based on API calls</p></li>
        <li><p>Events can also be streamed to CloudWatch Logs</p></li>
        <li>
          <p>The following are three types of Events:</p>
          <div id="step-div">
            <p>Management Events</p>
          </div>
          <ul id="blue-arw-ul">
            <li><p>Any management operations (read or write) performed on the resources in an AWS account is captured as an event</p></li>
            <li><p>Examples - launching or terminating EC2 Instances, configuring security, creating subnet, configuring rules for
              routing in a subnet, etc</p></li>
          </ul>
          <div id="step-div">
            <p>Data Events</p>
          </div>
          <ul id="blue-arw-ul">
            <li><p>By default are <span class="underbold">NOT</span> logged</p></li>
            <li><p>Examples - S3 object level operations, Lambda function executions, etc</p></li>
          </ul>
          <div id="step-div">
            <p>Insights Events</p>
          </div>
          <ul id="blue-arw-ul">
            <li><p>Are <span class="underbold">NOT</span> enabled by default and one has to pay for the capability</p></li>
            <li><p>Enables one to detect unusual activity in an AWS account</p></li>
            <li><p>Examples - inaccurate resource provisioning, hitting service limits, burst of IAM actions, gaps in periodic
              maintenance activity, etc</p></li>
          </ul>
        </li>
      </ul>
    </div>
    <br/>
    <div id="section-div">
      <p>References</p>
    </div>
    <div id="para-div">
      <p><a href="https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/WhatIsCloudWatch.html" target="_blank"><span class="bold">Official AWS CloudWatch Documentation</span></a></p>
      <p><a href="https://docs.aws.amazon.com/awscloudtrail/latest/userguide/cloudtrail-user-guide.html" target="_blank"><span class="bold">Official AWS CloudTrail Documentation</span></a></p>
    </div>
    <hr class="line-hr" />
    <div>
      <a id="footer-a" href="https://polarsparc.github.io/">&copy;&nbsp;PolarSPARC</a>
    </div>
  </body>
</html>
