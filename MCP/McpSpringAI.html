<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="content-type" content="application/xhtml+xml; charset=windows-1252" />
    <meta name="author" content="Bhaskar.S">
    <meta name="description" content="Hands-on MCP using Spring AI">
    <meta name="subject" content="Hands-on MCP using Spring AI">
    <meta name="keywords" content="java, ollama, llm, mcp, spring-ai">
    <meta name="robots" content="index, follow">
    <meta name="googlebot" content="index, follow">
    <title>Hands-on MCP using Spring AI</title>
    <link href="../css/polarsparc-v2.4.css" type="text/css" rel="stylesheet" />
  </head>
  <body>
    <br/>
    <table borber="0">
      <tr>
        <td valign="bottom"><span id="ps-home"></span></td>
        <td valign="bottom"><span id="home-a"><a id="home-a" href="https://polarsparc.github.io/">PolarSPARC</a></span></td>
      </tr>
    </table>
    <br/>
    <div id="title-div">
      <p>Hands-on MCP using Spring AI</p>
    </div>
    <br/>
    <table id="ad-table">
      <tbody>
        <tr>
          <td class="author-td">Bhaskar S</td>
          <td class="date-td">01/10/2026</td>
        </tr>
      </tbody>
    </table>
    <hr class="line-hr"/>
    <br/>
    <div id="section-div">
      <p>Overview</p>
    </div>
    <div id="para-div">
      <p><a href="https://modelcontextprotocol.io/docs/getting-started/intro" target="_blank"><span class="hi-yellow">Model Context
        Protocol</span></a> (or <span class="hi-vanila">MCP</span> for short) is an open protocol that enables seamless integration
        between the LLM apps and the external systems (databases, files, etc) and tools (github, servicenow, etc).</p>
    </div>
    <div id="para-div">
      <p>The <span class="bold">MCP</span> specification consists of the following core components:</p>
      <ul id="blue-sqr-ul">
        <li><span class="hi-vanila">MCP Server</span>: connects to various external as well as internal data sources and tools for
          exposing specific capabilities to the agentic LLM apps. Think of these as service providers</li>
        <li><span class="hi-vanila">MCP Client</span>: connects and interacts with the MCP Server(s) in a standardized manner</li>
        <li><span class="hi-vanila">MCP Host</span>: the LLM app(s) that use the MCP Client to access the MCP Server(s)</li>
      </ul>
    </div>
    <div id="para-div">
      <p>The intent of this article is <span class="underbold">NOT</span> to be exhaustive, but a primer to get started quickly.</p>
    </div>
    <br/>
    <div id="section-div">
      <p>Installation and Setup</p>
    </div>
    <div id="para-div">
      <p>The installation and setup will be on a <span class="bold">Ubuntu 24.04 LTS</span> based Linux desktop. Ensure that <span
        class="bold">Ollama</span> is installed and setup on the desktop (see <a href="http://polarsparc.github.io/GenAI/Ollama.html"
        target="_blank"><span class="bold">instructions</span></a>).</p>
    </div>
    <div id="para-div">
      <p>Further, ensure at least <span class="bold">Java 21</span> or above is installed and setup. In addition, ensure <a href=
        "http://maven.apache.org/" target="_blank"><span class="hi-yellow">Apache Maven</span></a> is installed and setup.</p>
      <p>We will use <span class="bold">Spring AI</span></a> with <span class="bold">Spring Boot</span> for the demonstrations in
        this article.</p>
    </div>
    <div id="para-div">
      <p>From the <span class="bold">MCP Inspector</span> github <a href="https://https://github.com/modelcontextprotocol/inspector"
        target="_blank">RESPOSITORY</a>, one can identify the current release version of the inspector. At the time of this article,
        the release version was <span class="hi-red">0.18.0</span>.</p>
      <p>To pull and download the docker image for the <span class="bold">MCP Inspector</span>, execute the following command in a
        terminal window:</p>
    </div>
    <br/>
    <div id="cmd-div">
      <p>$ docker pull ghcr.io/modelcontextprotocol/inspector:0.18.0/p>
    </div>
    <br/>
    <div id="para-div">
      <p>The following should be the typical output:</p>
    </div>
    <br/>
    <div id="out-div">
      <h4>Output.1</h4>
      <pre>0.18.0: Pulling from modelcontextprotocol/inspector
ae4ce04d0e1c: Pull complete 
85ce34a7f114: Pull complete 
21f205f4b728: Pull complete 
172c9e1a3e90: Pull complete 
79cdc6cbeb68: Pull complete 
6e09ae90c8ab: Pull complete 
839c794e5436: Pull complete 
9e7ac5986a8a: Pull complete 
3ab50c87739e: Pull complete 
700895ffb7ba: Pull complete 
bf2ae1961a4c: Pull complete 
d4f0be0e8239: Pull complete 
cac4aec1f27c: Pull complete 
b93054334b26: Pull complete 
f58d87d1235b: Pull complete 
b42421530f57: Pull complete 
Digest: sha256:d4fda7b69cb8ae4cd9d3ac5b24bea59defc0555b59f90c9b5197c92968f65af1
Status: Downloaded newer image for ghcr.io/modelcontextprotocol/inspector:0.18.0
ghcr.io/modelcontextprotocol/inspector:0.18.0</pre>
    </div>
    <br/>
    <div id="para-div">
      <p>Assuming that the ip address on the Linux desktop is <span class="hi-grey">192.168.1.25</span>, start the <span class="bold">
        Ollama</span> platform by executing the following command in the terminal window:</p>
    </div>
    <br/>
    <div id="cmd-div">
      <p>$ docker run --rm --name ollama -p 192.168.1.25:11434:11434 -v $HOME/.ollama:/root/.ollama ollama/ollama:0.13.5</p>
    </div>
    <br/>
    <div id="para-div">
      <p>If the linux desktop has <span class="hi-green">Nvidia GPU</span> with decent amount of VRAM (at least 16 GB) and has been
        enabled for use with <span class="bold">docker</span> (see <a href="https://polarsparc.github.io/Docker/DockerNVidia.html"
        target="_blank"><span class="bold">instructions</span></a>), then execute the following command instead to start <span class
        ="bold">Ollama</span>:</p>
    </div>
    <br/>
    <div id="cmd-div">
      <p>$ docker run --rm --name ollama --gpus=all -p 192.168.1.25:11434:11434 -v $HOME/.ollama:/root/.ollama ollama/ollama:0.13.5</p>
    </div>
    <br/>
    <div id="para-div">
      <p>For the LLM models, we will be using the <span class="hi-purple">IBM Granite 4 Micro</span> model for the tools execution.</p>
    </div>
    <div id="para-div">
      <p>Open a new terminal window and execute the following <span class="bold">docker</span> command to download the IBM Granite 4
        Micro model:</p>
    </div>
    <br/>
    <div id="cmd-div">
      <p>$ docker exec -it ollama ollama run granite4:micro</p>
    </div>
    <br/>
    <div id="para-div">
      <p>After the model download, to exit the user input, execute the following user prompt:</p>
    </div>
    <br/>
    <div id="cmd-div">
      <p>&gt;&gt;&gt; /bye</p>
    </div>
    <br/>
    <div id="para-div">
      <p>Let us assume the root directory for the <span class="bold">Java</span> project <span class="bold">$HOME/java/SpringAIMCP
        </span>.</p>
    </div>
    <div id="para-div">
      <p>The following is the listing for the parent <span class="bold">Maven</span> project file <span class="hi-green">pom.xml</span>:</p>
    </div>
    <br/>
    <div id="src-outer-div-1">
      <div class="src-cap-1">pom.xml</div>
      <div class="src-body-1">
<pre>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;
  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;

  &lt;name&gt;SpringAIMCP&lt;/name&gt;
  &lt;description&gt;SpringAIMCP&lt;/description&gt;
  &lt;groupId&gt;com.polarsparc&lt;/groupId&gt;
  &lt;artifactId&gt;SpringAIMCP&lt;/artifactId&gt;
  &lt;version&gt;1.0&lt;/version&gt;
  &lt;packaging&gt;pom&lt;/packaging&gt;

  &lt;parent&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;
    &lt;version&gt;3.5.9&lt;/version&gt;
    &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;
  &lt;/parent&gt;

  &lt;properties&gt;
    &lt;java.version&gt;21&lt;/java.version&gt;
    &lt;spring-ai.version&gt;1.1.2&lt;/spring-ai.version&gt;
  &lt;/properties&gt;

  &lt;dependencies&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
      &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;
      &lt;scope&gt;test&lt;/scope&gt;
    &lt;/dependency&gt;
  &lt;/dependencies&gt;

  &lt;dependencyManagement&gt;
    &lt;dependencies&gt;
      &lt;dependency&gt;
        &lt;groupId&gt;org.springframework.ai&lt;/groupId&gt;
        &lt;artifactId&gt;spring-ai-bom&lt;/artifactId&gt;
        &lt;version&gt;${spring-ai.version}&lt;/version&gt;
        &lt;type&gt;pom&lt;/type&gt;
        &lt;scope&gt;import&lt;/scope&gt;
      &lt;/dependency&gt;
    &lt;/dependencies&gt;
  &lt;/dependencyManagement&gt;

  &lt;build&gt;
    &lt;plugins&gt;
      &lt;plugin&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
      &lt;/plugin&gt;
    &lt;/plugins&gt;
  &lt;/build&gt;
&lt;/project&gt;</pre>
      </div>
    </div>
    <br/>
    <div id="para-div">
      <p>This completes all the system installation and setup for the MCP using Spring AI hands-on demonstration.</p>
    </div>
    <br/>
    <div id="section-div">
      <p>Hands-on with MCP using Spring AI</p>
    </div>
    <div id="para-div">
      <p>We will first implement the <span class="bold">MCP Server</span> that will expose two interest calculator tools - one for
        simple interest and the other for compound interest.</p>
    </div>
    <div id="step-div">
      <p>MCP Server</p>
    </div>
    <br/>
    <div id="para-div">
      <p>Let us assume the top directory for the MCP server is <span class="bold">$HOME/java/SpringAIMCP/InterestMcpServer</span>.</p>
    </div>
    <div id="para-div">
      <p>The following is the listing for the <span class="bold">Maven</span> project file <span class="hi-green">pom.xml</span> that
        will be used by the MCP server:</p>
    </div>
    <br/>
    <div id="src-outer-div-1">
      <div class="src-cap-1">pom.xml</div>
      <div class="src-body-1">
<pre>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;
  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;

  &lt;name&gt;InterestMcpServer&lt;/name&gt;
  &lt;description&gt;InterestMcpServer&lt;/description&gt;
  &lt;artifactId&gt;InterestMcpServer&lt;/artifactId&gt;

  &lt;parent&gt;
    &lt;groupId&gt;com.polarsparc&lt;/groupId&gt;
    &lt;artifactId&gt;SpringAIMCP&lt;/artifactId&gt;
    &lt;version&gt;1.0&lt;/version&gt;
  &lt;/parent&gt;

  &lt;dependencies&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.springframework.ai&lt;/groupId&gt;
      &lt;artifactId&gt;spring-ai-starter-mcp-server-webmvc&lt;/artifactId&gt;
    &lt;/dependency&gt;
  &lt;/dependencies&gt;
&lt;/project&gt;</pre>
      </div>
    </div>
    <br/>
    <div id="para-div">
      <p>The following is the listing for the logger properties file <span class="hi-green">simplelogger.properties</span> located
        in the directory <span class="bold">src/main/resources</span>:</p>
    </div>
    <br/>
    <div id="src-outer-div-1">
      <div class="src-cap-1">simplelogger.properties</div>
      <div class="src-body-1">
<pre>#
### SLF4J Simple Logger properties
#
org.slf4j.simpleLogger.defaultLogLevel=info
org.slf4j.simpleLogger.showDateTime=true
org.slf4j.simpleLogger.dateTimeFormat=yyyy-MM-dd HH:mm:ss:SSS
org.slf4j.simpleLogger.showThreadName=true</pre>
      </div>
    </div>
    <br/>
    <div id="para-div">
      <p>The following is the listing for the <span class="bold">Spring Boot</span> application properties file <span class="hi-green">
        application.properties</span> located in the directory <span class="bold">src/main/resources</span>:</p>
    </div>
    <br/>
    <div id="src-outer-div-1">
      <div class="src-cap-1">application.properties</div>
      <div class="src-body-1">
<pre>spring.main.banner-mode=off
spring.application.name=InterestMcpServer
server.port=8000
spring.ai.mcp.server.name=interest-calculator
spring.ai.mcp.server.version=1.0
spring.ai.mcp.server.annotation-scanner.enabled=true
spring.ai.mcp.server.type=sync
spring.ai.mcp.server.protocol=streamable
spring.ai.mcp.server.streamable-http.keep-alive-interval=30s</pre>
      </div>
    </div>
    <br/>
    <div id="para-div">
      <p>The following is the main <span class="bold">Spring Boot</span> application to start-up the <span class="bold">MCP</span>
        server:</p>
    </div>
    <br/>
    <div id="src-outer-div-1">
      <div class="src-cap-1">Listing.1</div>
      <div class="src-body-1">
<pre>/*
 * Name:   InterestMcpServerApplication
 * Author: Bhaskar S
 * Date:   01/09/2026
 * Blog:   https://polarsparc.github.io
 */

package com.polarsparc.interestmcpserver;

import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;

@SpringBootApplication
public class InterestMcpServerApplication {
  public static void main(String[] args) {
    SpringApplication.run(InterestMcpServerApplication.class, args);
  }
}</pre>
      </div>
    </div>
    <br/>
    <div id="para-div">
      <p>The following is the Spring Boot service class that defines the two interest calculator tools (one for simple interest and
        the other for compound interest):</p>
    </div>
    <br/>
    <div id="src-outer-div-1">
      <div class="src-cap-1">Listing.2</div>
      <div class="src-body-1">
<pre>/*
 * Name:   InterestServerService
 * Author: Bhaskar S
 * Date:   01/09/2026
 * Blog:   https://polarsparc.github.io
 */

package com.polarsparc.interestmcpserver.service;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.ai.tool.annotation.Tool;
import org.springframework.ai.tool.annotation.ToolParam;
import org.springframework.stereotype.Service;

@Service
public class InterestServerService {
  private static final Logger LOGGER = LoggerFactory.getLogger(InterestServerService.class);

  @Tool(name="Simple-Interest", description="Tool to compute simple interest rate for a year.")
  public float annualSimpleInterest(@ToolParam(description="Principal Amount", required=true) float principal,
                                    @ToolParam(description="Interest Rate", required=true) float rate) {
    LOGGER.info("Simple interest -&gt; Principal: {}, Rate: {}", principal, rate);
    return principal * rate / 100.00f;
  }

  @Tool(name="Compound-Interest", description="Tool to compute compound interest rate for a year.")
  public float annualCompoundInterest(@ToolParam(description="Principal Amount", required=true) float principal,
                                      @ToolParam(description="Interest Rate", required=true) float rate) {
    LOGGER.info("Compound interest -&gt; Principal: {}, Rate: {}", principal, rate);
    return principal * (1 + rate / 100.0f);
  }
}</pre>
      </div>
    </div>
    <br/>
    <div id="para-div">
      <p>Note that the annotation <span class="hi-yellow">@Tool</span> declaratively exposes Java methods as external tool(s) for
        the LLM model to call on.</p>
    </div>
    <div id="para-div">
      <p>The following is the Spring Boot configuration class, which registers tool provider beans (instances of type <span class=
        "hi-yellow">ToolCallback</span>) with Spring so that to LLM models can discover and execute external tools:</p>
    </div>
    <br/>
    <div id="src-outer-div-1">
      <div class="src-cap-1">Listing.3</div>
      <div class="src-body-1">
<pre>/*
 * Name:   InterestServerConfig
 * Author: Bhaskar S
 * Date:   01/09/2026
 * Blog:   https://polarsparc.github.io
 */

package com.polarsparc.interestmcpserver.config;

import com.polarsparc.interestmcpserver.service.InterestServerService;
import org.springframework.ai.tool.ToolCallbackProvider;
import org.springframework.ai.tool.method.MethodToolCallbackProvider;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

@Configuration
public class InterestServerConfig {
  @Bean
  public ToolCallbackProvider interestCalculatorTools(InterestServerService interestCalculatorService) {
    return MethodToolCallbackProvider.builder().toolObjects(interestCalculatorService).build();
  }
}</pre>
      </div>
    </div>
    <br/>
    <div id="para-div">
      <p>Note that the tool provider implementation <span class="hi-yellow">MethodToolCallbackProvider</span> looks at classes for
        methods with the <span class="bold">@Tool</span> annotation to identify external tool(s).</p>
    </div>
    <div id="para-div">
      <p>To start the MCP server exposing the interest calculator tools, open a terminal window and run the following commands:</p>
    </div>
    <br/>
    <div id="cmd-div">
      <p>$ cd $HOME/java/SprinAIMCP/InterestMcpServer</p>
      <p>$ mvn spring-boot:run</p>
    </div>
    <br/>
    <div id="para-div">
      <p>The following should be the typical output:</p>
    </div>
    <br/>
    <div id="out-div">
      <h4>Output.2</h4>
      <pre>[INFO] Scanning for projects...
[INFO] 
[INFO] ------------------&lt; com.polarsparc:InterestMcpServer &gt;------------------
[INFO] Building InterestMcpServer 1.0
[INFO]   from pom.xml
[INFO] --------------------------------[ jar ]---------------------------------
[INFO] 
[INFO] &gt;&gt;&gt; spring-boot:3.5.9:run (default-cli) &gt; test-compile @ InterestMcpServer &gt;&gt;&gt;
[INFO] 
[INFO] --- resources:3.3.1:resources (default-resources) @ InterestMcpServer ---
[INFO] Copying 1 resource from src/main/resources to target/classes
[INFO] Copying 1 resource from src/main/resources to target/classes
[INFO] 
[INFO] --- compiler:3.14.1:compile (default-compile) @ InterestMcpServer ---
[INFO] Nothing to compile - all classes are up to date.
[INFO] 
[INFO] --- resources:3.3.1:testResources (default-testResources) @ InterestMcpServer ---
[INFO] skip non existing resourceDirectory /home/polarsparc/java/SpringAIMCP/InterestMcpServer/src/test/resources
[INFO] 
[INFO] --- compiler:3.14.1:testCompile (default-testCompile) @ InterestMcpServer ---
[INFO] Nothing to compile - all classes are up to date.
[INFO] 
[INFO] &lt;&lt;&lt; spring-boot:3.5.9:run (default-cli) &lt; test-compile @ InterestMcpServer &lt;&lt;&lt;
[INFO] 
[INFO] --- spring-boot:3.5.9:run (default-cli) @ InterestMcpServer ---
[INFO] Attaching agents: []
2026-01-09T20:25:18.268-05:00  INFO 19837 --- [InterestMcpServer] [           main] c.p.i.InterestMcpServerApplication       : Starting InterestMcpServerApplication using Java 25 with PID 19837 (/home/polarsparc/java/SpringAIMCP/InterestMcpServer/target/classes started by bswamina in /home/polarsparc/java/SpringAIMCP/InterestMcpServer)
2026-01-09T20:25:18.270-05:00  INFO 19837 --- [InterestMcpServer] [           main] c.p.i.InterestMcpServerApplication       : No active profile set, falling back to 1 default profile: "default"
2026-01-09T20:25:18.626-05:00  WARN 19837 --- [InterestMcpServer] [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.ai.mcp.server.common.autoconfigure.annotations.McpServerAnnotationScannerAutoConfiguration' of type [org.springframework.ai.mcp.server.common.autoconfigure.annotations.McpServerAnnotationScannerAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected/applied to a currently created BeanPostProcessor [serverAnnotatedMethodBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies/advisors. If this bean does not have to be post-processed, declare it with ROLE_INFRASTRUCTURE.
2026-01-09T20:25:18.626-05:00  WARN 19837 --- [InterestMcpServer] [           main] trationDelegate$BeanPostProcessorChecker : Bean 'serverAnnotatedBeanRegistry' of type [org.springframework.ai.mcp.server.common.autoconfigure.annotations.McpServerAnnotationScannerAutoConfiguration$ServerMcpAnnotatedBeans] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected/applied to a currently created BeanPostProcessor [serverAnnotatedMethodBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies/advisors. If this bean does not have to be post-processed, declare it with ROLE_INFRASTRUCTURE.
2026-01-09T20:25:18.633-05:00  WARN 19837 --- [InterestMcpServer] [           main] trationDelegate$BeanPostProcessorChecker : Bean 'spring.ai.mcp.server.annotation-scanner-org.springframework.ai.mcp.server.common.autoconfigure.annotations.McpServerAnnotationScannerProperties' of type [org.springframework.ai.mcp.server.common.autoconfigure.annotations.McpServerAnnotationScannerProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected/applied to a currently created BeanPostProcessor [serverAnnotatedMethodBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies/advisors. If this bean does not have to be post-processed, declare it with ROLE_INFRASTRUCTURE.
2026-01-09T20:25:18.754-05:00  INFO 19837 --- [InterestMcpServer] [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8000 (http)
2026-01-09T20:25:18.763-05:00  INFO 19837 --- [InterestMcpServer] [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2026-01-09T20:25:18.763-05:00  INFO 19837 --- [InterestMcpServer] [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.50]
2026-01-09T20:25:18.788-05:00  INFO 19837 --- [InterestMcpServer] [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2026-01-09T20:25:18.789-05:00  INFO 19837 --- [InterestMcpServer] [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 489 ms
2026-01-09T20:25:19.123-05:00  WARN 19837 --- [InterestMcpServer] [           main] o.s.m.provider.tool.SyncMcpToolProvider  : No tool methods found in the provided tool objects: []
2026-01-09T20:25:19.128-05:00  INFO 19837 --- [InterestMcpServer] [           main] o.s.a.m.s.c.a.McpServerAutoConfiguration : Enable tools capabilities, notification: true
2026-01-09T20:25:19.129-05:00  INFO 19837 --- [InterestMcpServer] [           main] o.s.a.m.s.c.a.McpServerAutoConfiguration : Registered tools: 2
2026-01-09T20:25:19.129-05:00  INFO 19837 --- [InterestMcpServer] [           main] o.s.a.m.s.c.a.McpServerAutoConfiguration : Enable resources capabilities, notification: true
2026-01-09T20:25:19.129-05:00  INFO 19837 --- [InterestMcpServer] [           main] o.s.a.m.s.c.a.McpServerAutoConfiguration : Enable resources templates capabilities, notification: true
2026-01-09T20:25:19.130-05:00  INFO 19837 --- [InterestMcpServer] [           main] o.s.a.m.s.c.a.McpServerAutoConfiguration : Enable prompts capabilities, notification: true
2026-01-09T20:25:19.130-05:00  INFO 19837 --- [InterestMcpServer] [           main] o.s.a.m.s.c.a.McpServerAutoConfiguration : Enable completions capabilities
2026-01-09T20:25:19.201-05:00  INFO 19837 --- [InterestMcpServer] [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8000 (http) with context path '/'
2026-01-09T20:25:19.206-05:00  INFO 19837 --- [InterestMcpServer] [           main] c.p.i.InterestMcpServerApplication       : Started InterestMcpServerApplication in 1.153 seconds (process running for 1.31)</pre>
    </div>
    <br/>
    <div id="para-div">
      <p>To validate the just started MCP server using the MCP Inspector, open a terminal window and run the following command:</p>
    </div>
    <br/>
    <div id="cmd-div">
      <p>$ docker run --rm --name mcp-inspector --network host ghcr.io/modelcontextprotocol/inspector:0.18.0</p>
    </div>
    <br/>
    <div id="para-div">
      <p>The following should be the typical output:</p>
    </div>
    <br/>
    <div id="out-div">
      <h4>Output.3</h4>
      <pre>> @modelcontextprotocol/inspector@0.18.0 start
> node client/bin/start.js

Starting MCP inspector...
  Proxy server listening on localhost:6277
    Session token: ec1d1ab6762ddc410c04f93b931a72c4598dea43f775ace908446151df152c6c
    Use this token to authenticate requests or set DANGEROUSLY_OMIT_AUTH=true to disable auth

    MCP Inspector is up and running at:
    http://localhost:6274/?MCP_PROXY_AUTH_TOKEN=ec1d1ab6762ddc410c04f93b931a72c4598dea43f775ace908446151df152c6c</pre>
    </div>
    <br/>
    <div id="para-div">
      <p>Make a note of the session token <span class="hi-grey">ec1d1ab6762ddc410c04f93b931a72c4598dea43f775ace908446151df152c6c</span>
        as we will to use it to enter in the browser.</p>
    </div>
    <div id="para-div">
      <p>Open a browser window and paste the <span class="bold">MCP Inspector</span> URL from above.</p>
    </div>
    <div id="para-div">
      <p>The following screenshot depicts the illustration of the MCP Inspector web application:</p>
    </div>
    <br/>
    <div id="img-outer-div"> <img alt="MCP Inspector" class="img-cls" src="./images/mcp-inspector-1.png" />
      <div class="img-cap">Figure.1</div>
    </div>
    <br/>
    <div id="para-div">
      <p>Click on the Authentication drop-down and it will open the <span class="bold">Custom Headers</span> section as depicted
        in the illustration below:</p>
    </div>
    <br/>
    <div id="img-outer-div"> <img alt="Custom Headers" class="img-cls" src="./images/mcp-inspector-2.png" />
      <div class="img-cap">Figure.2</div>
    </div>
    <br/>
    <div id="para-div">
      <p>Replace the token string next to word <span class="bold">Bearer</span> with the session token and click on the <span class
        ="bold">Connect</span> button as depicted in the illustration below:</p>
    </div>
    <br/>
    <div id="img-outer-div"> <img alt="Replace Bearer" class="img-cls" src="./images/mcp-inspector-3.png" />
      <div class="img-cap">Figure.3</div>
    </div>
    <br/>
    <div id="para-div">
      <p>After successful connection, click on the <span class="bold">Tools</span>, and then on <span class="bold">Compound-Interest
        </span> tool to display the option to execute the tool on the right will as depicted in the illustration below:</p>
    </div>
    <br/>
    <div id="img-outer-div"> <img alt="MCP Tools" class="img-cls" src="./images/mcp-inspector-4.png" />
      <div class="img-cap">Figure.4</div>
    </div>
    <br/>
    <div id="para-div">
      <p><span class="bold">BOOM</span> !!! The MCP Inspector has successfully detected the tools exposed by the MCP Server.</p>
    </div>
    <div id="para-div">
      <p>Next, we will implement the <span class="bold">MCP Client</span>, which will allow the <span class="bold">Ollama</span> LLM
        app to access the interest calculator tools when needed.</p>
    </div>
    <br/>
    <div id="step-div">
      <p>MCP Client</p>
    </div>
    <br/>
    <div id="para-div">
      <p>Let us assume the top directory for the MCP client is <span class="bold">$HOME/java/SpringAIMCP/InterestMcpClient</span>.</p>
    </div>
    <div id="para-div">
      <p>The following is the listing for the <span class="bold">Maven</span> project file <span class="hi-green">pom.xml</span> that
        will be used by the MCP client:</p>
    </div>
    <br/>
    <div id="src-outer-div-1">
      <div class="src-cap-1">pom.xml</div>
      <div class="src-body-1">
<pre>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;
  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;

  &lt;name&gt;InterestMcpClient&lt;/name&gt;
  &lt;description&gt;InterestMcpClient&lt;/description&gt;
  &lt;artifactId&gt;InterestMcpClient&lt;/artifactId&gt;

  &lt;parent&gt;
    &lt;groupId&gt;com.polarsparc&lt;/groupId&gt;
    &lt;artifactId&gt;SpringAIMCP&lt;/artifactId&gt;
    &lt;version&gt;1.0&lt;/version&gt;
  &lt;/parent&gt;

  &lt;dependencies&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
      &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.springframework.ai&lt;/groupId&gt;
      &lt;artifactId&gt;spring-ai-starter-mcp-client&lt;/artifactId&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.springframework.ai&lt;/groupId&gt;
      &lt;artifactId&gt;spring-ai-starter-model-ollama&lt;/artifactId&gt;
    &lt;/dependency&gt;
  &lt;/dependencies&gt;
&lt;/project&gt;</pre>
      </div>
    </div>
    <br/>
    <div id="para-div">
      <p>The following is the listing for the logger properties file <span class="hi-green">simplelogger.properties</span> located
        in the directory <span class="bold">src/main/resources</span>:</p>
    </div>
    <br/>
    <div id="src-outer-div-1">
      <div class="src-cap-1">simplelogger.properties</div>
      <div class="src-body-1">
<pre>#
### SLF4J Simple Logger properties
#
org.slf4j.simpleLogger.defaultLogLevel=info
org.slf4j.simpleLogger.showDateTime=true
org.slf4j.simpleLogger.dateTimeFormat=yyyy-MM-dd HH:mm:ss:SSS
org.slf4j.simpleLogger.showThreadName=true</pre>
      </div>
    </div>
    <br/>
    <div id="para-div">
      <p>The following is the listing for the <span class="bold">Spring Boot</span> application properties file <span class="hi-green">
        application.properties</span> located in the directory <span class="bold">src/main/resources</span>:</p>
    </div>
    <br/>
    <div id="src-outer-div-1">
      <div class="src-cap-1">application.properties</div>
      <div class="src-body-1">
<pre>spring.main.banner-mode=off
spring.application.name=InterestMcpClient
spring.ai.ollama.base-url=http://192.168.1.25:11434
spring.ai.ollama.chat.model=granite4:micro
spring.ai.ollama.chat.options.temperature=0.2
spring.ai.mcp.client.streamable-http.connections.server1.url=http://localhost:8000
spring.ai.mcp.client.streamable-http.connections.server1.endpoint=/mcp</pre>
      </div>
    </div>
    <br/>
    <div id="para-div">
      <p>The following is the Spring Boot configuration class that defines the <span class="bold">Ollama</span> specific ChatClient
        container bean with an ability to discover external tool(s) from MCP server(s) via the tool provider callback class <span
        class="hi-vanila">SyncMcpToolCallbackProvider</span>:</p>
    </div>
    <br/>
    <div id="src-outer-div-1">
      <div class="src-cap-1">Listing.4</div>
      <div class="src-body-1">
<pre>/*
 * Name:   OllamaChatConfig
 * Author: Bhaskar S
 * Date:   01/09/2026
 * Blog:   https://polarsparc.github.io
 */

package com.polarsparc.interestmcpclient.config;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.ai.chat.client.ChatClient;
import org.springframework.ai.mcp.SyncMcpToolCallbackProvider;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

@Configuration
public class OllamaChatConfig {
  private static final Logger LOGGER = LoggerFactory.getLogger(OllamaChatConfig.class);

  private final SyncMcpToolCallbackProvider toolsCallbackProvider;

  public OllamaChatConfig(SyncMcpToolCallbackProvider syncMcpToolCallbackProvider) {
    this.toolsCallbackProvider = syncMcpToolCallbackProvider;
  }

  @Bean
  public ChatClient getOllamaChatClient(ChatClient.Builder chatClientBuilder) {
    if (toolsCallbackProvider == null) {
      LOGGER.warn("ToolCallbackProvider is null !!!");

      return chatClientBuilder.build(); // Without tools
    }

    ToolCallback[] tools = toolsCallbackProvider.getToolCallbacks();
    for (ToolCallback tool : tools) {
      LOGGER.info("\t---&gt; {}", tool.getToolDefinition().toString());
    }

    return chatClientBuilder
            .defaultToolCallbacks(tools)
            .build();
  }
}</pre>
      </div>
    </div>
    <br/>
    <div id="para-div">
      <p>The following is the Spring Boot service class that exposes a method to interact with the LLM model running on the <span
        class="bold">Ollama</span> platform:</p>
    </div>
    <br/>
    <div id="src-outer-div-1">
      <div class="src-cap-1">Listing.5</div>
      <div class="src-body-1">
<pre>/*
 * Name:   InterestClientService
 * Author: Bhaskar S
 * Date:   01/09/2026
 * Blog:   https://polarsparc.github.io
 */

package com.polarsparc.interestmcpclient.service;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.ai.chat.client.ChatClient;
import org.springframework.stereotype.Service;

@Service
public class InterestClientService {
  private static final Logger LOGGER = LoggerFactory.getLogger(InterestClientService.class);

  private final ChatClient chatClient;

  public InterestClientService(ChatClient chatClient) {
    this.chatClient = chatClient;
  }

  public String calculateInterest(String prompt) {
    LOGGER.info("User provided prompt for using tools: {}",  prompt);
    
    if (chatClient != null) {
      String response = chatClient.prompt()
              .user(prompt)
              .call()
              .content();

      LOGGER.info("Response from chat using tools: {}", response);

      return response;
    } else {
      LOGGER.warn("Chat client NOT initialized !!!");
    }

    return "No Response";
  }
}</pre>
      </div>
    </div>
    <br/>
    <div id="para-div">
      <p>The following is the Spring Boot controller class that exposes a REST endpoint <span class="bold">/api/v1/mcpchat</span> to
        invoke the service method:</p>
    </div>
    <br/>
    <div id="src-outer-div-1">
      <div class="src-cap-1">Listing.6</div>
      <div class="src-body-1">
<pre>/*
 * Name:   InterestClientController
 * Author: Bhaskar S
 * Date:   01/09/2026
 * Blog:   https://polarsparc.github.io
 */

package com.polarsparc.interestmcpclient.controller;

import com.polarsparc.interestmcpclient.service.InterestClientService;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

@RestController
@RequestMapping("/api/v1")
public class InterestClientController {
  private static final Logger LOGGER = LoggerFactory.getLogger(InterestClientController.class);

  private final InterestClientService interestClientService;

  public InterestClientController(InterestClientService interestClientService) {
    this.interestClientService = interestClientService;
  }

  @PostMapping("/mcpchat")
  public ResponseEntity<String> mcpChat(@RequestBody String message) {
    LOGGER.info("Received request for mcpchat: {}", message);

    String response = interestClientService.calculateInterest(message);
    return ResponseEntity.ok(response);
  }
}</pre>
      </div>
    </div>
    <br/>
    <div id="para-div">
      <p>The following is the main <span class="bold">Spring Boot</span> application to start-up the <span class="bold">MCP</span>
        client:</p>
    </div>
    <br/>
    <div id="src-outer-div-1">
      <div class="src-cap-1">Listing.7</div>
      <div class="src-body-1">
<pre>/*
 * Name:   InterestMcpClientApplication
 * Author: Bhaskar S
 * Date:   01/09/2026
 * Blog:   https://polarsparc.github.io
 */

package com.polarsparc.interestmcpclient;

import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;

@SpringBootApplication
public class InterestMcpClientApplication {
  public static void main(String[] args) {
    SpringApplication.run(InterestMcpClientApplication.class, args);
  }
}</pre>
      </div>
    </div>
    <br/>
    <div id="para-div">
      <p>To start the MCP client Java application, open a terminal window and run the following commands:</p>
    </div>
    <br/>
    <div id="cmd-div">
      <p>$ cd $HOME/java/SprinAIMCP/InterestMcpClient</p>
      <p>$ mvn spring-boot:run</p>
    </div>
    <br/>
    <div id="para-div">
      <p>To test the <span class="bold">Ollama</span> chat model with access to MCP tools, execute the following command:</p>
    </div>
    <br/>
    <div id="cmd-div">
      <p>$ curl -s -X POST http://localhost:8080/api/v1/mcpchat -d "what is the simple interest for the principal amount 1000 at a rate of 4.65"</p>
    </div>
    <br/>
    <div id="para-div">
      <p>The following would be the typical output:</p>
    </div>
    <br/>
    <div id="out-div">
      <h4>Output.4</h4>
      <pre>The simple interest for a principal amount of 1000 at an interest rate of 4.65 is **46.5**.</pre>
    </div>
    <br/>
    <div id="para-div">
      <p>Again, to test the <span class="bold">Ollama</span> chat model with access to MCP tools, execute the following command:</p>
    </div>
    <br/>
    <div id="cmd-div">
      <p>$ curl -s -X POST http://localhost:8080/api/v1/mcpchat -d "what is the compound interest for the principal amount 1500 at a rate of 3.75"</p>
    </div>
    <br/>
    <div id="para-div">
      <p>The following would be the typical output:</p>
    </div>
    <br/>
    <div id="out-div">
      <h4>Output.5</h4>
      <pre>The compound interest for a principal amount of 1500 at an annual rate of 3.75% is **$1,556.25**. This means the total amount after one year would be $1,556.25 (principal + interest).</pre>
    </div>
    <br/>
    <div id="para-div">
      <p><span class="bold">BINGO</span> !!! With this, we conclude the hands-on demonstration of the <span class="bold">MCP</span>
        server and the client using <span class="bold">Spring AI</span> !!!</p>
    </div>
    <br/>
    <div id="section-div">
      <p>References</p>
    </div>
    <div id="para-div">
      <p><a target="_blank" href="https://docs.spring.io/spring-ai/reference/index.html"><span class="bold">Spring AI Documentation</span></a></p>
    </div>
    <br/>
    <hr class="line-hr" />
    <div>
      <a id="footer-a" href="https://polarsparc.github.io/">&copy;&nbsp;PolarSPARC</a>
    </div>
  </body>
</html>
