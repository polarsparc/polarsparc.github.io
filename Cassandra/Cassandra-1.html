<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
  <head>
    <meta http-equiv="content-type" content="application/xhtml+xml; charset=windows-1252" />
    <meta name="author" content="Bhaskar.S">
    <meta name="description" content="Cassandra Quick Notes :: Part - 1">
    <meta name="subject" content="Cassandra Quick Notes :: Part - 1">
    <meta name="keywords" content="apache-cassandra, cassandra, nosql">
    <meta name="robots" content="index, follow">
    <meta name="googlebot" content="index, follow">
    <title>Cassandra Quick Notes :: Part - 1</title>
    <link href="../css/polarsparc-v2.4.css" type="text/css" rel="stylesheet" />
  </head>
  <body>
    <br/>
    <table borber="0">
      <tr>
        <td valign="bottom"><span id="ps-home"></span></td>
        <td valign="bottom"><span id="home-a"><a id="home-a" href="https://polarsparc.github.io/">PolarSPARC</a></span></td>
      </tr>
    </table>
    <br/>
    <div id="title-div">
      <p>Cassandra Quick Notes :: Part - 1</p>
    </div>
    <br />
    <table id="ad-table">
      <tbody>
        <tr>
          <td class="author-td">Bhaskar S</td>
          <td class="date-td"><span class="hi-yellow">*UPDATED*</span>11/24/2023</td>
        </tr>
      </tbody>
    </table>
    <hr class="line-hr" />
    <br/>
    <div id="gen-step-div">
      <p>Overview</p>
    </div>
    <br/>
    <div id="para-div">
      <p>Cassandra is a proven open-source NoSQL database with the following capabilities:</p>
      <ul id="blue-sqr-ul">
        <li>
          <p>Distributed</p>
        </li>
        <li>
          <p>Decentralized</p>
        </li>
        <li>
          <p>Highly Scalable</p>
        </li>
        <li>
          <p>Fault Tolerant</p>
        </li>
        <li>
          <p>Column Oriented</p>
        </li>
      </ul>
    </div>
    <br/>
    <div id="gen-step-div">
      <p>Installation and Setup</p>
    </div>
    <br/>
    <div id="para-div">
      <p>We will assume that the installation will be on a <span class="bold">Ubuntu 22.04 LTS</span> based Linux desktop. Also,
        assuming the logged in user is <span class="bold">polarsparc</span> with the home directory located at <span class="bold">
        /home/polarsparc</span>.</p>
      <p>Ensure <span class="bold">Docker</span> is installed and setup. Else, refer to this article for further instructions <a href=
        "http://polarsparc.github.io/Docker/Docker.html" target="_blank"><span class="bold">Introduction to Docker</span></a>.</p>
    </div>
    <div id="para-div">
      <p>We will setup a directory structure by executing the following commands from the users home directory:</p>
    </div>
    <br/>
    <div id="cmd-div">
      <p>$ mkdir -p cassandra/data</p>
      <p>$ mkdir -p cassandra/logs</p>
      <p>$ mkdir -p cassandra/etc/cassandra</p>
    </div>
    <br/>
    <div id="para-div">
      <p>We will refer to the directory <span class="bold">/home/polarsparc/cassandra</span> using the environment variable called
        <span class="hi-yellow">CASSANDRA_HOME</span> set as follows:</p>
    </div>
    <br/>
    <div id="cmd-div">
      <p>$ export CASSANDRA_HOME=/home/polarsparc/cassandra</p>
    </div>
    <br/>
    <div id="para-div">
      <p>To run a single node <span class="bold">Apache Cassandra</span> cluster, we need to download few configuration files to the
        directory <span class="bold">$CASSANDRA_HOME/etc/cassandra</span> by executing the following commands:</p>
    </div>
    <br/>
    <div id="cmd-div">
      <p>$ cd $CASSANDRA_HOME/etc/cassandra</p>
      <p>$ wget https://github.com/apache/cassandra/raw/trunk/conf/cassandra-env.sh</p>
      <p>$ wget https://github.com/apache/cassandra/raw/trunk/conf/cassandra.yaml</p>
      <p>$ wget https://github.com/apache/cassandra/raw/trunk/conf/jvm-server.options</p>
      <p>$ wget https://github.com/apache/cassandra/raw/trunk/conf/jvm17-server.options</p>
      <p>$ wget https://github.com/apache/cassandra/raw/trunk/conf/logback.xml</p>
      <p>$ cd $CASSANDRA_HOME</p>
    </div>
    <br/>
    <div id="para-div">
      <p>Edit the file <span class="hi-blue">$CASSANDRA_HOME/etc/cassandra/cassandra-env.sh</span> to uncomment and replace the
        following line:</p>
      <p>&nbsp;&nbsp;&nbsp;&nbsp;<span class="bold"># JVM_OPTS=&quot;$JVM_OPTS -Djava.rmi.server.hostname=&lt;public name&gt;&quot;</span></p>
      <p>with the line:</p>
      <p>&nbsp;&nbsp;&nbsp;&nbsp;<span class="bold">JVM_OPTS=&quot;$JVM_OPTS -Djava.rmi.server.hostname=127.0.0.1&quot;</span></p>
    </div>
    <div id="para-div">
      <p>For our exploration, we will be downloading and using the official docker image <a href="https://hub.docker.com/_/cassandra"
        target="_blank"><span class="hi-yellow">cassandra</span></a> for <span class="bold">Apache Cassandra</span>.</p>
    </div>
    <div id="para-div">
      <p>To pull and download the docker image for <span class="bold">cassandra</span>, execute the following command:</p>
    </div>
    <br/>
    <div id="cmd-div">
      <p>$ docker pull cassandra:5.0</p>
    </div>
    <br/>
    <div id="para-div">
      <p>The following should be the typical output:</p>
    </div>
    <br/>
    <div id="out-div">
      <h4>Output.1</h4>
      <pre>5.0: Pulling from library/cassandra
7a2c55901189: Pull complete 
875b30e249cd: Pull complete 
cabab1ce7888: Pull complete 
a993c8646506: Pull complete 
f9c0e45100d9: Pull complete 
2614e7ad90d5: Pull complete 
3d7a82bb0214: Pull complete 
2f49febc123d: Pull complete 
37fb126206c6: Pull complete 
3accb547e8fc: Pull complete 
Digest: sha256:41aedccbe44efc557044df7c7b56d1fbb17c750c501df81f08b13a48c6826ce2
Status: Downloaded newer image for cassandra:5.0
docker.io/library/cassandra:5.0</pre>
    </div>
    <br/>
    <div id="para-div">
      <p>To create a docker network for <span class="bold">cassandra</span>, execute the following command:</p>
    </div>
    <br/>
    <div id="cmd-div">
      <p>$ docker network create cassandra-db-net</p>
    </div>
    <br/>
    <div id="para-div">
      <p>The following would be the typical output:</p>
    </div>
    <br/>
    <div id="out-div">
      <h4>Output.2</h4>
      <pre>be0f828bc6843dd9270c991dab06ee18935c20477003a7bf6fb96076fa984f7f</pre>
    </div>
    <br/>
    <div id="para-div">
      <p>To start a single node <span class="bold">Apache Cassandra</span> cluster, execute the following command:</p>
    </div>
    <br/>
    <div id="cmd-div">
      <p>$ docker run --rm --name cas-node-1 --hostname cas-node-1 --network cassandra-db-net -p 7199:7199 -p 9042:9042 -u $(id -u $USER):$(id -g $USER) -v $CASSANDRA_HOME/data:/var/lib/cassandra/data -v $CASSANDRA_HOME/etc/cassandra:/etc/cassandra -v $CASSANDRA_HOME/logs:/opt/cassandra/logs cassandra:5.0</p>
    </div>
    <br/>
    <div id="para-div">
      <p>The following would be the typical trimmed output:</p>
    </div>
    <br/>
    <div id="out-div">
      <h4>Output.3</h4>
      <pre>INFO  [main] 2023-11-23 17:43:32,926 YamlConfigurationLoader.java:101 - Configuration location: file:/etc/cassandra/cassandra.yaml
... [ SNIP ] ...
INFO  [main] 2023-11-23 17:43:33,444 CassandraDaemon.java:601 - Hostname: cas-node-1:7000:7001
INFO  [main] 2023-11-23 17:43:33,445 CassandraDaemon.java:608 - JVM vendor/version: OpenJDK 64-Bit Server VM/17.0.9
... [ SNIP ] ...
INFO  [main] 2023-11-23 17:43:33,889 Keyspace.java:366 - Creating replication strategy system params KeyspaceParams{durable_writes=true, replication=ReplicationParams{class=org.apache.cassandra.locator.LocalStrategy}}
INFO  [main] 2023-11-23 17:43:33,908 ColumnFamilyStore.java:495 - Initializing system.IndexInfo
INFO  [main] 2023-11-23 17:43:34,430 ColumnFamilyStore.java:495 - Initializing system.batches
INFO  [main] 2023-11-23 17:43:34,433 ColumnFamilyStore.java:495 - Initializing system.paxos
INFO  [main] 2023-11-23 17:43:34,437 SecondaryIndexManager.java:225 - Index [PaxosUncommittedIndex] registered and writable.
INFO  [SecondaryIndexManagement:1] 2023-11-23 17:43:34,440 SecondaryIndexManager.java:1824 - Index [PaxosUncommittedIndex] became queryable after successful build.
INFO  [main] 2023-11-23 17:43:34,442 ColumnFamilyStore.java:495 - Initializing system.paxos_repair_history
INFO  [main] 2023-11-23 17:43:34,445 ColumnFamilyStore.java:495 - Initializing system.local
INFO  [main] 2023-11-23 17:43:34,448 ColumnFamilyStore.java:495 - Initializing system.peers_v2
INFO  [main] 2023-11-23 17:43:34,450 ColumnFamilyStore.java:495 - Initializing system.peers
INFO  [main] 2023-11-23 17:43:34,453 ColumnFamilyStore.java:495 - Initializing system.peer_events_v2
INFO  [main] 2023-11-23 17:43:34,456 ColumnFamilyStore.java:495 - Initializing system.peer_events
INFO  [main] 2023-11-23 17:43:34,460 ColumnFamilyStore.java:495 - Initializing system.compaction_history
INFO  [main] 2023-11-23 17:43:34,464 ColumnFamilyStore.java:495 - Initializing system.sstable_activity
INFO  [main] 2023-11-23 17:43:34,467 ColumnFamilyStore.java:495 - Initializing system.sstable_activity_v2
INFO  [main] 2023-11-23 17:43:34,471 ColumnFamilyStore.java:495 - Initializing system.size_estimates
INFO  [main] 2023-11-23 17:43:34,475 ColumnFamilyStore.java:495 - Initializing system.table_estimates
INFO  [main] 2023-11-23 17:43:34,479 ColumnFamilyStore.java:495 - Initializing system.available_ranges_v2
INFO  [main] 2023-11-23 17:43:34,482 ColumnFamilyStore.java:495 - Initializing system.available_ranges
INFO  [main] 2023-11-23 17:43:34,486 ColumnFamilyStore.java:495 - Initializing system.transferred_ranges_v2
INFO  [main] 2023-11-23 17:43:34,489 ColumnFamilyStore.java:495 - Initializing system.transferred_ranges
INFO  [main] 2023-11-23 17:43:34,493 ColumnFamilyStore.java:495 - Initializing system.view_builds_in_progress
INFO  [main] 2023-11-23 17:43:34,498 ColumnFamilyStore.java:495 - Initializing system.built_views
INFO  [main] 2023-11-23 17:43:34,501 ColumnFamilyStore.java:495 - Initializing system.prepared_statements
INFO  [main] 2023-11-23 17:43:34,505 ColumnFamilyStore.java:495 - Initializing system.repairs
INFO  [main] 2023-11-23 17:43:34,508 ColumnFamilyStore.java:495 - Initializing system.top_partitions
INFO  [main] 2023-11-23 17:43:34,525 QueryProcessor.java:127 - Initialized prepared statement caches with 62 MiB
INFO  [main] 2023-11-23 17:43:34,567 Keyspace.java:366 - Creating replication strategy system_schema params KeyspaceParams{durable_writes=true, replication=ReplicationParams{class=org.apache.cassandra.locator.LocalStrategy}}
INFO  [main] 2023-11-23 17:43:34,569 ColumnFamilyStore.java:495 - Initializing system_schema.keyspaces
INFO  [main] 2023-11-23 17:43:34,574 ColumnFamilyStore.java:495 - Initializing system_schema.tables
INFO  [main] 2023-11-23 17:43:34,578 ColumnFamilyStore.java:495 - Initializing system_schema.columns
INFO  [main] 2023-11-23 17:43:34,581 ColumnFamilyStore.java:495 - Initializing system_schema.column_masks
INFO  [main] 2023-11-23 17:43:34,585 ColumnFamilyStore.java:495 - Initializing system_schema.triggers
INFO  [main] 2023-11-23 17:43:34,588 ColumnFamilyStore.java:495 - Initializing system_schema.dropped_columns
INFO  [main] 2023-11-23 17:43:34,591 ColumnFamilyStore.java:495 - Initializing system_schema.views
INFO  [main] 2023-11-23 17:43:34,595 ColumnFamilyStore.java:495 - Initializing system_schema.types
INFO  [main] 2023-11-23 17:43:34,598 ColumnFamilyStore.java:495 - Initializing system_schema.functions
INFO  [main] 2023-11-23 17:43:34,601 ColumnFamilyStore.java:495 - Initializing system_schema.aggregates
INFO  [main] 2023-11-23 17:43:34,604 ColumnFamilyStore.java:495 - Initializing system_schema.indexes
... [ SNIP ] ...
INFO  [main] 2023-11-23 17:44:21,938 Keyspace.java:366 - Creating replication strategy system_auth params KeyspaceParams{durable_writes=true, replication=ReplicationParams{class=org.apache.cassandra.locator.SimpleStrategy, replication_factor=1}}
INFO  [main] 2023-11-23 17:44:21,940 ColumnFamilyStore.java:495 - Initializing system_auth.roles
INFO  [main] 2023-11-23 17:44:21,942 ColumnFamilyStore.java:495 - Initializing system_auth.role_members
INFO  [main] 2023-11-23 17:44:21,945 ColumnFamilyStore.java:495 - Initializing system_auth.role_permissions
INFO  [main] 2023-11-23 17:44:21,947 ColumnFamilyStore.java:495 - Initializing system_auth.resource_role_permissons_index
INFO  [main] 2023-11-23 17:44:21,950 ColumnFamilyStore.java:495 - Initializing system_auth.network_permissions
INFO  [main] 2023-11-23 17:44:21,952 ColumnFamilyStore.java:495 - Initializing system_auth.cidr_permissions
INFO  [main] 2023-11-23 17:44:21,955 ColumnFamilyStore.java:495 - Initializing system_auth.cidr_groups
INFO  [main] 2023-11-23 17:44:21,957 ColumnFamilyStore.java:495 - Initializing system_auth.identity_to_role
INFO  [main] 2023-11-23 17:44:21,960 StorageService.java:1961 - JOINING: Finish joining ring
... [ SNIP ] ...
INFO  [main] 2023-11-23 17:44:30,110 PipelineConfigurator.java:131 - Starting listening for CQL clients on /0.0.0.0:9042 (unencrypted)...
INFO  [main] 2023-11-23 17:44:30,113 CassandraDaemon.java:743 - Startup complete
... [ SNIP ] ...</pre>
    </div>
    <br/>
    <div id="para-div">
      <p>At this point a single node <span class="bold">Apache Cassandra</span> cluster should be ready for use.</p>
    </div>
    <br/>
    <div id="gen-step-div">
      <p>Concepts - Level I</p>
    </div>
    <br/>
    <div id="para-div">
      <p>This section will cover some basic concepts of Cassandra:</p>
      <ul id="blue-sqr-ul">
        <li>
          <p>A <span class="hi-yellow">Column</span> (or a <span class="hi-vanila">Cell</span>) is the most basic unit of data in
            Cassandra. It has a name and an associated value</p>
        </li>
        <li>
          <p>A <span class="hi-yellow">Row</span> is a container of ordered <span class="bold">Column</span>s. Each <span class="bold">
            Row</span> has an associated unique <span class="hi-yellow">Primary Key</span> (or <span class="hi-vanila">Row Key</span>)</p>
        </li>
        <li>
          <p>A <span class="hi-yellow">Table</span> (or a <span class="hi-vanila">Column Family</span>) is a container of ordered <span
            class="bold">Row</span>s</p>
        </li>
        <li>
          <p>A <span class="hi-yellow">Keyspace</span> is a container of <span class="bold">Table</span>s. Think of it as analogous
            to a <span class="bold">Schema</span> from the relational database world</p>
        </li>
        <li>
          <p><span class="hi-yellow">CQL</span> (or <span class="hi-vanila">Cassandra Query Language</span>) is <span class="bold">
            SQL</span> like interface for working with Cassandra</p>
        </li>
        <li>
          <p><span class="bold">CQL</span> uses <span class="bold">SQL</span> like statements (create, alter, drop) to either define,
            change, or delete <span class="bold">Table</span>s in Cassandra</p>
        </li>
        <li>
          <p><span class="bold">CQL</span> uses <span class="bold">SQL</span> like statements (insert, update, select, delete) to
            either create, change, or delete <span class="bold">Row</span>s in Cassandra <span class="bold">Table</span>s</p>
        </li>
        <li>
          <p>Cassandra is different from any Relational database in the sense that there is no concept of table joins and hence
          <span class="bold">CQL</span> does not have <span class="bold">JOIN</span>s unlike <span class="bold">SQL</span></p>
        </li>
        <li>
          <p><span class="bold">CQL</span> supports the following data types for <span class="bold">Column</span> values:</p>
        </li>
        <ul id="blue-disc-ul">
          <li><p><span class="hi-vanila">boolean</span> :: true or false</p></li>
          <li><p><span class="hi-vanila">int</span> :: 32-bit integer</p></li>
          <li><p><span class="hi-vanila">bigint</span> :: 64-bit integer</p></li>
          <li><p><span class="hi-vanila">varint</span> :: Arbitrary precision integer</p></li>
          <li><p><span class="hi-vanila">float</span> :: 4-byte float</p></li>
          <li><p><span class="hi-vanila">double</span> :: 8-byte float</p></li>
          <li><p><span class="hi-vanila">decimal</span> :: Arbitrary precision decimal</p></li>
          <li><p><span class="hi-vanila">blob</span> :: Bytes in Hexadecimal. This is the default type</p></li>
          <li><p><span class="hi-vanila">ascii</span> :: ASCII encoded string</p></li>
          <li><p><span class="hi-vanila">varchar</span> :: UTF8 encoded string</p></li>
          <li><p><span class="hi-vanila">text</span> :: UTF8 encoded string</p></li>
          <li><p><span class="hi-vanila">timestamp</span> :: 8-byte date plus time as seconds since epoch</p></li>
          <li><p><span class="hi-vanila">uuid</span> :: 4-byte uuid</p></li>
        </ul>
      </ul>
    </div>
    <br/>
    <div id="gen-step-div">
      <p>Hands-on with Cassandra - I</p>
    </div>
    <br/>
    <div id="para-div">
      <p>The best way to explore Cassandra is to use the Cassandra <span class="bold">CQL</span> command-line interface called <span
        class="hi-green">cqlsh</span>.</p>
      <p>To work with <span class="bold">CQL</span>, execute the following command:</p>
    </div>
    <br/>
    <div id="cmd-div">
      <p>$ docker run -it --rm --name cassandra-client --network cassandra-db-net cassandra:5.0 cqlsh cas-node-1</p>
    </div>
    <br/>
    <div id="para-div">
    <p>The following will be the output:</p>
    </div>
    <br/>
    <div id="out-div">
      <h4>Output.4</h4>
      <pre>WARNING: cqlsh was built against 5.0-alpha2, but this server is 5.0.  All features may not work!
Connected to Cassandra Cluster at cas-node-1:9042
[cqlsh 6.2.0 | Cassandra 5.0-alpha2 | CQL spec 3.4.7 | Native protocol v5]
Use HELP for help.
cqlsh></pre>
    </div>
    <br/>
    <div id="para-div">
      <p>On success, <span class="bold">CQL</span> will change the command prompt to "<span class="hi-grey">cqlsh&gt;</span>".</p>
    </div>
    <div id="para-div">
      <p>To exit <span class="bold">CQL</span>, input the following command at the "<span class="bold">cqlsh&gt;</span>" prompt:</p>
    </div>
    <br/>
    <div id="cmd-div">
      <p>cqlsh&gt; exit;</p>
    </div>
    <br/>
    <div id="para-div">
      <p>To get help at any time in <span class="bold">CQL</span>, input the following command at the "<span class="bold">cqlsh&gt;
        </span>" prompt:</p>
    </div>
    <br/>
    <div id="cmd-div">
      <p>cqlsh&gt; help</p>
    </div>
    <br/>
    <div id="para-div">
      <p>The following will be the output:</p>
    </div>
    <br/>
    <div id="out-div">
    <h4>Output.5</h4>
      <pre>Documented shell commands:
===========================
CAPTURE  CLS          COPY  DESCRIBE  EXPAND  HISTORY  PAGING  SHOW    TRACING
CLEAR    CONSISTENCY  DESC  EXIT      HELP    LOGIN    SERIAL  SOURCE  UNICODE

CQL help topics:
================
AGGREGATES               CREATE_KEYSPACE           DROP_TRIGGER      TEXT     
ALTER_KEYSPACE           CREATE_MATERIALIZED_VIEW  DROP_TYPE         TIME     
ALTER_MATERIALIZED_VIEW  CREATE_ROLE               DROP_USER         TIMESTAMP
ALTER_TABLE              CREATE_TABLE              FUNCTIONS         TRUNCATE 
ALTER_TYPE               CREATE_TRIGGER            GRANT             TYPES    
ALTER_USER               CREATE_TYPE               INSERT            UPDATE   
APPLY                    CREATE_USER               INSERT_JSON       USE      
ASCII                    DATE                      INT               UUID     
BATCH                    DELETE                    JSON            
BEGIN                    DROP_AGGREGATE            KEYWORDS        
BLOB                     DROP_COLUMNFAMILY         LIST_PERMISSIONS
BOOLEAN                  DROP_FUNCTION             LIST_ROLES      
COUNTER                  DROP_INDEX                LIST_USERS      
CREATE_AGGREGATE         DROP_KEYSPACE             PERMISSIONS     
CREATE_COLUMNFAMILY      DROP_MATERIALIZED_VIEW    REVOKE          
CREATE_FUNCTION          DROP_ROLE                 SELECT          
CREATE_INDEX             DROP_TABLE                SELECT_JSON</pre>
    </div>
    <br/>
    <div id="para-div">
      <p>To create a <span class="bold">Keyspace</span> called <span class="hi-yellow">mytestks</span>, input the following command
        at the "<span class="bold">cqlsh&gt;</span>" prompt:</p>
    </div>
    <br/>
    <div id="cmd-div">
      <p>cqlsh&gt; CREATE KEYSPACE IF NOT EXISTS mytestks WITH replication = {'class': 'SimpleStrategy', 'replication_factor': 1};</p>
    </div>
    <br/>
    <div id="para-div">
      <p>There will be no output.</p>
    </div>
    <div id="para-div">
      <p>Once a <span class="bold">Keyspace</span> is created, one needs to select the <span class="bold">Keyspace</span> for use.
        To use the <span class="bold">Keyspace</span> called <span class="hi-yellow">mytestks</span>, input the following command
        at the "<span class="bold">cqlsh&gt;</span>" prompt:</p>
    </div>
    <br/>
    <div id="cmd-div">
      <p>cqlsh&gt; USE mytestks;</p>
    </div>
    <br/>
    <div id="para-div">
      <p>There will be no output and the input prompt would change to "<span class="hi-grey">cqlsh:mytestks&gt;</span>".</p>
    </div>
    <div id="para-div">
      <p>To create a <span class="bold">Table</span> called <span class="hi-yellow">book_catalog</span>, input the following command
        at the "<span class="bold">cqlsh:mytestks&gt;</span>" prompt:</p>
    </div>
    <br/>
    <div id="cmd-div">
      <p>cqlsh:mytestks&gt; CREATE TABLE IF NOT EXISTS book_catalog (isbn text, title text, year int, price float, PRIMARY KEY (isbn));</p>
    </div>
    <br/>
    <div id="para-div">
      <p>There will be no output.</p>
    </div>
    <div id="para-div">
      <p>To insert a row into the table <span class="bold">book_catalog</span>, input the following command at the "<span class="bold">
        cqlsh:mytestks&gt;</span>" prompt:</p>
    </div>
    <br/>
    <div id="cmd-div">
      <p>cqlsh:mytestks&gt; INSERT INTO book_catalog (isbn) VALUES ('ISBN-111');</p>
    </div>
    <br/>
    <div id="para-div">
      <p>There will be no output.</p>
    </div>
    <div id="para-div">
      <p>With the <span class="bold">INSERT</span> statement, the first column name in parenthesis after the column family name has
      to be the row key (primary key) column. In our example, the primary key is the column <span class="bold">isbn</span>.</p>
    </div>
    <div id="para-div">
      <p>To select all the rows from the table <span class="bold">book_catalog</span>, input the following command at the "<span class
        ="bold">cqlsh:mytestks&gt;</span>" prompt:</p>
    </div>
    <br/>
    <div id="cmd-div">
      <p>SELECT * FROM book_catalog;</p>
    </div>
    <br/>
    <div id="para-div">
      <p>The following will be the output:</p>
    </div>
    <br/>
    <div id="out-div">
      <h4>Output.6</h4>
      <pre> isbn     | price | title | year
 ---------+-------+-------+------
 ISBN-111 |  null |  null | null

(1 rows)</pre>
    </div>
    <br/>
    <div id="para-div">
      <p>Let us try to update the values of the columns <span class="bold">price</span>, <span class="bold">title</span>, and <span
        class="bold">year</span> for the row in <span class="bold">book_catalog</span> whose primary key has a value of <span class
        ="bold">ISBN-111</span>. To do that, input the following command at the "<span class="bold">cqlsh:mytestks&gt;</span>" prompt:</p>
    </div>
    <br/>
    <div id="cmd-div">
      <p>cqlsh:mytestks&gt; UPDATE book_catalog SET price = 2.99, title = 'Cassandra Quick Notes', year = 2023 WHERE isbn = 'ISBN-111';</p>
    </div>
    <br/>
    <div id="para-div">
      <p>There will be no output.</p>
    </div>
    <div id="para-div">
      <p>Let us insert 2 more rows into the table <span class="bold">book_catalog</span> by inputting the following commands at the
        "<span class="bold">cqlsh:mytestks&gt;</span>" prompt:</p>
    </div>
    <br/>
    <div id="cmd-div">
      <p>cqlsh:mytestks&gt; INSERT INTO book_catalog (isbn, title, year, price) VALUES ('ISBN-222', 'Cassandra Guide', 2021, 4.99);</p>
      <p>cqlsh:mytestks&gt; INSERT INTO book_catalog (isbn, title, year, price) VALUES ('ISBN-333', 'Cassandra For Developers', 2019, 3.99);</p>
    </div>
    <br/>
    <div id="para-div">
      <p>There will be no output.</p>
    </div>
    <div id="para-div">
      <p>To select all the rows from the table <span class="bold">book_catalog</span>, input the following command at the "<span class
        ="bold">cqlsh:mytestks&gt;</span>" prompt:</p>
    </div>
    <br/>
    <div id="cmd-div">
      <p>cqlsh:mytestks&GT; SELECT * FROM book_catalog;</p>
    </div>
    <br/>
    <div id="para-div">
      <p>The following will be the output:</p>
    </div>
    <br/>
    <div id="out-div">
      <h4>Output.7</h4>
      <pre> isbn     | price | title                    | year
----------+-------+--------------------------+------
 ISBN-333 |  3.99 | Cassandra For Developers | 2019
 ISBN-111 |  2.99 |    Cassandra Quick Notes | 2023
 ISBN-222 |  4.99 |          Cassandra Guide | 2021

(3 rows)</pre>
    </div>
    <br/>
    <div id="para-div">
      <p>By default, the select of all the rows from a table returns upto <span class="underbold">10000</span> rows. To limit the
        number of rows returned, use the <span class="bold">LIMIT</span> clause. To SELECT all the rows from the table <span class=
        "bold">book_catalog</span> with a limit of 1 row, input the following command at the "<span class="bold">cqlsh:mytestks&gt;
        </span>" prompt:</p>
    </div>
    <br/>
    <div id="cmd-div">
      <p>cqlsh:mytestks&gt; SELECT * FROM book_catalog LIMIT 1;</p>
    </div>
    <br/>
    <div id="para-div">
      <p>The following will be the output:</p>
    </div>
    <br/>
    <div id="out-div">
      <h4>Output.8</h4>
      <pre> isbn     | price | title                    | year
----------+-------+--------------------------+------
 ISBN-333 |  3.99 | Cassandra For Developers | 2019

(1 rows)</pre>
    </div>
    <br/>
    <div id="para-div">
      <p>To select just the columns <span class="bold">title</span> and <span class="bold">price</span> for all the rows from the table
        <span class="bold">book_catalog</span>, input the following command at the "<span class="bold">cqlsh:mytestks&gt;</span>" prompt:</p>
    </div>
    <br/>
    <div id="cmd-div">
      <p>cqlsh:mytestks&gt; SELECT title, price FROM book_catalog;</p>
    </div>
    <br/>
    <div id="para-div">
      <p>The following will be the output:</p>
    </div>
    <br/>
    <div id="out-div">
      <h4>Output.9</h4>
      <pre> title                    | price
--------------------------+-------
 Cassandra For Developers |  3.99
    Cassandra Quick Notes |  2.99
          Cassandra Guide |  4.99

(3 rows)</pre>
    </div>
    <br/>
    <div id="para-div">
      <p>To add a new column called <span class="hi-blue">publisher</span> of type <span class="bold">text</span> to the table <span
        class="bold">book_catalog</span>, input the following command at the "<span class="bold">cqlsh:mytestks&gt;</span>" prompt:</p>
    </div>
    <br/>
    <div id="cmd-div">
      <p>cqlsh:mytestks&gt; ALTER TABLE book_catalog ADD publisher text;</p>
    </div>
    <br/>
    <div id="para-div">
      <p>There will be no output.</p>
    </div>
    <div id="para-div">
      <p>To check if the column <span class="bold">publisher</span> has been added to the table <span class="bold">book_catalog</span>,
        input the following command at the "<span class="bold">cqlsh:mytestks&gt;</span>" prompt:</p>
    </div>
    <br/>
    <div id="cmd-div">
      <p>cqlsh:mytestks&gt; DESCRIBE TABLE book_catalog;</p>
    </div>
    <br/>
    <div id="para-div">
      <p>The following will be the output:</p>
    </div>
    <br/>
    <div id="out-div">
      <h4>Output.10</h4>
      <pre>CREATE TABLE mytestks.book_catalog (
    isbn text PRIMARY KEY,
    price float,
    publisher text,
    title text,
    year int
) WITH additional_write_policy = '99p'
    AND allow_auto_snapshot = true
    AND bloom_filter_fp_chance = 0.01
    AND caching = {'keys': 'ALL', 'rows_per_partition': 'NONE'}
    AND cdc = false
    AND comment = ''
    AND compaction = {'class': 'org.apache.cassandra.db.compaction.SizeTieredCompactionStrategy', 'max_threshold': '32', 'min_threshold': '4'}
    AND compression = {'chunk_length_in_kb': '16', 'class': 'org.apache.cassandra.io.compress.LZ4Compressor'}
    AND memtable = 'default'
    AND crc_check_chance = 1.0
    AND default_time_to_live = 0
    AND extensions = {}
    AND gc_grace_seconds = 864000
    AND incremental_backups = true
    AND max_index_interval = 2048
    AND memtable_flush_period_in_ms = 0
    AND min_index_interval = 128
    AND read_repair = 'BLOCKING'
    AND speculative_retry = '99p';</pre>
    </div>
    <br/>
    <div id="para-div">
      <p>Now let us SELECT all the rows to check the value of the column <span class="bold">publisher</span> that was added to the
        table <span class="bold">book_catalog</span>. To do that, input the following command at the "<span class="bold">cqlsh:mytestks&gt;
        </span>" prompt:</p>
    </div>
    <br/>
    <div id="cmd-div">
      <p>cqlsh:mytestks&gt; SELECT * FROM book_catalog;</p>
    </div>
    <br/>
    <div id="para-div">
      <p>The following will be the output:</p>
    </div>
    <br/>
    <div id="out-div">
      <h4>Output.11</h4>
      <pre> isbn     | price | publisher  | title                    | year
----------+-------+------------+--------------------------+------
 ISBN-333 |  3.99 |       null | Cassandra For Developers | 2019
 ISBN-111 |  2.99 | Polarsparc |    Cassandra Quick Notes | 2023
 ISBN-222 |  4.99 |       null |          Cassandra Guide | 2021

(3 rows)</pre>
    </div>
    <br/>
    <div id="para-div">
      <p>As we can see, the output shows null value for each row of the column <span class="bold">publisher</span>.</p>
    </div>
    <div id="para-div">
      <p>Let us try to update the value of the column <span class="bold">publisher</span> for all the rows in the table <span class
        ="bold">book_catalog</span>. To do that, input the following command at the "<span class="bold">cqlsh:mytestks&gt;</span>"
        prompt:</p>
    </div>
    <br/>
    <div id="cmd-div">
      <p>cqlsh:mytestks&gt; UPDATE book_catalog SET publisher = 'Polarsparc';</p>
    </div>
    <br/>
    <div id="para-div">
      <p>The following will be the output:</p>
    </div>
    <br/>
    <div id="out-div">
      <h4>Output.12</h4>
      <pre>SyntaxException: line 1:48 mismatched input ';' expecting K_WHERE</pre>
    </div>
    <br/>
    <div id="para-div">
      <p>In Cassandra, one has to update a column value for each row specifying the primary key. This makes sense as Cassandra is a
        column-oriented distributed database and not all rows need to have all the columns unlike Relational databases.</p>
    </div>
    <div id="para-div">
      <p>To update the value of the column <span class="bold">publisher</span> for the row with <span class="bold">isbn</span> =
        '<span class="bold">ISBN-111</span>' in the table <span class="bold">book_catalog</span>, input the following command at the
        "<span class="bold">cqlsh:mytestks&gt;</span>" prompt:</p>
    </div>
    <br/>
    <div id="cmd-div">
      <p>cqlsh:mytestks&gt; UPDATE book_catalog SET publisher = 'Polarsparc' WHERE isbn = 'ISBN-111';</p>
    </div>
    <br/>
    <div id="para-div">
      <p>There will be no output.</p>
    </div>
    <div id="para-div">
      <p>Let us now try to SELECT all the rows from the table <span class="bold">book_catalog</span>. To do that, input the following
        command at the "<span class="bold">cqlsh:mytestks&gt;</span>" prompt:</p>
    </div>
    <br/>
    <div id="cmd-div">
      <p>cqlsh:mytestks&gt; SELECT * FROM book_catalog;</p>
    </div>
    <br/>
    <div id="para-div">
      <p>The following will be the output:</p>
    </div>
    <br/>
    <div id="out-div">
      <h4>Output.13</h4>
      <pre> isbn     | price | publisher  | title                    | year
----------+-------+------------+--------------------------+------
 ISBN-333 |  3.99 |       null | Cassandra For Developers | 2019
 ISBN-111 |  2.99 | Polarsparc |    Cassandra Quick Notes | 2023
 ISBN-222 |  4.99 |       null |          Cassandra Guide | 2021

(3 rows)</pre>
    </div>
    <br/>
    <div id="para-div">
      <p>Let us now try to SELECT all the rows with the condition <span class="hi-green">year = 2021</span> from the table <span class
        ="bold">book_catalog</span>. To do that, input the following command at the "<span class="bold">cqlsh:mytestks&gt;</span>"
        prompt:</p>
    </div>
    <br/>
    <div id="cmd-div">
      <p>cqlsh:mytestks&gt; SELECT * FROM book_catalog WHERE year = 2021;</p>
    </div>
    <br/>
    <div id="para-div">
      <p>The following will be the output:</p>
    </div>
    <br/>
    <div id="out-div">
      <h4>Output.14</h4>
      <pre>InvalidRequest: Error from server: code=2200 [Invalid query] message="Cannot execute this query as it might involve data filtering and thus may have unpredictable performance. If you want to execute this query despite the performance unpredictability, use ALLOW FILTERING"</pre>
    </div>
    <br/>
    <div id="para-div">
      <p>The error indicates that we have not created an index on the column <span class="bold">year</span>.</p>
    </div>
    <div id="para-div">
      <p>To create a seconadry index on the column <span class="bold">year</span> called <span class="hi-green">year_idx</span> for
        the table <span class="bold">book_catalog</span>, input the following command at the "<span class="bold">cqlsh:mytestks&gt;
        </span>" prompt:</p>
    </div>
    <br/>
    <div id="cmd-div">
      <p>cqlsh:mytestks&gt; CREATE INDEX year_idx ON book_catalog (year);</p>
    </div>
    <br/>
    <div id="para-div">
      <p>There will be no output.</p>
    </div>
    <div id="para-div">
      <p>Now let us re-execute the SELECT of all the rows with the condition <span class="bold">year = 2021</span> from the table
        <span class="bold">book_catalog</span>. To do that, input the following command at the "<span class="bold">cqlsh:mytestks&gt;
        </span>" prompt:</p>
    </div>
    <br/>
    <div id="cmd-div">
      <p>cqlsh:mytestks&gt; SELECT * FROM book_catalog WHERE year = 2021;</p>
    </div>
    <br/>
    <div id="para-div">
      <p>The following will be the output:</p>
    </div>
    <br/>
    <div id="out-div">
      <h4>Output.15</h4>
      <pre> isbn     | price | publisher | title           | year
----------+-------+-----------+-----------------+------
 ISBN-222 |  4.99 |      null | Cassandra Guide | 2021

(1 rows)</pre>
    </div>
    <br/>
    <div id="para-div">
      <p>To drop the column <span class="bold">publisher</span> from the table <span class="bold">book_catalog</span>, input the
        following command at the "<span class="bold">cqlsh:mytestks&gt;</span>" prompt:</p>
    </div>
    <br/>
    <div id="cmd-div">
      <p>cqlsh:mytestks&gt; ALTER TABLE book_catalog DROP publisher;</p>
    </div>
    <br/>
    <div id="para-div">
      <p>There will be no output.</p>
    </div>
    <div id="para-div">
      <p>To drop the secondary index called <span class="bold">year_idx</span> on the column <span class="bold">year</span> from
        the table <span class="bold">book_catalog</span>, input the following command at the "<span class="bold">cqlsh:mytestks&gt;
        </span>" prompt:</p>
    </div>
    <br/>
    <div id="cmd-div">
      <p>cqlsh:mytestks&gt; DROP INDEX year_idx;</p>
    </div>
    <br/>
    <div id="para-div">
      <p>There will be no output.</p>
    </div>
    <div id="para-div">
      <p>To INSERT a new row into the table <span class="bold">book_catalog</span> with values for the columns <span class="bold">
        isbn</span> and <span class="bold">year</span> that will be alive for only <span class="underbold">30 seconds</span>, input
        the following command at the "<span class="bold">cqlsh:mytestks&gt;</span>" prompt:</p>
    </div>
    <br/>
    <div id="cmd-div">
      <p>cqlsh:mytestks&gt; INSERT INTO book_catalog (isbn, year) VALUES ('ISBN-555', 2022) USING TTL 30;</p>
    </div>
    <br/>
    <div id="para-div">
      <p>There will be no output.</p>
    </div>
    <div id="para-div">
      <p>Now let us SELECT all the rows from the table <span class="bold">book_catalog</span>. To do that, input the following command
        at the "<span class="bold">cqlsh:mytestks&gt;</span>" prompt:</p>
    </div>
    <br/>
    <div id="cmd-div">
      <p>cqlsh:mytestks&gt; SELECT * FROM book_catalog;</p>
    </div>
    <br/>
    <div id="para-div">
      <p>The following will be the output:</p>
    </div>
    <br/>
    <div id="out-div">
      <h4>Output.16</h4>
      <pre> isbn     | price | title                    | year
----------+-------+--------------------------+------
 ISBN-333 |  3.99 | Cassandra For Developers | 2019
 ISBN-111 |  2.99 |    Cassandra Quick Notes | 2023
 ISBN-555 |  null |                     null | 2022
 ISBN-222 |  4.99 |          Cassandra Guide | 2021

(4 rows)</pre>
    </div>
    <br/>
    <div id="para-div">
      <p>Wait for about 30 seconds and re-execute the above SELECT command from the table <span class="bold">book_catalog</span>. To
        do that, input the following command at the "<span class="bold">cqlsh:mytestks&gt;</span>" prompt:</p>
    </div>
    <br/>
    <div id="cmd-div">
      <p>cqlsh:mytestks&gt; SELECT * FROM book_catalog;</p>
    </div>
    <br/>
    <div id="para-div">
      <p>The following will be the output:</p>
    </div>
    <br/>
    <div id="out-div">
      <h4>Output.17</h4>
      <pre> isbn     | price | title                    | year
----------+-------+--------------------------+------
 ISBN-333 |  3.99 | Cassandra For Developers | 2019
 ISBN-111 |  2.99 |    Cassandra Quick Notes | 2023
 ISBN-222 |  4.99 |          Cassandra Guide | 2021

(3 rows)</pre>
    </div>
    <br/>
    <div id="para-div">
      <p>To delete one or more columns from the table <span class="bold">book_catalog</span>, input the following command at the
        "<span class="bold">cqlsh:mytestks&gt;</span>" prompt:</p>
    </div>
    <br/>
    <div id="cmd-div">
      <p>cqlsh:mytestks&gt; DELETE price, year FROM book_catalog WHERE isbn = 'ISBN-333';</p>
    </div>
    <br/>
    <div id="para-div">
      <p>There will be no output.</p>
    </div>
    <div id="para-div">
      <p>Now let us SELECT all the rows from the table <span class="bold">book_catalog</span>. To do that, input the following command
        at the "<span class="bold">cqlsh:mytestks&gt;</span>" prompt:</p>
    </div>
    <br/>
    <div id="cmd-div">
      <p>cqlsh:mytestks&gt; SELECT * FROM book_catalog;</p>
    </div>
    <br/>
    <div id="para-div">
      <p>The following will be the output:</p>
    </div>
    <br/>
    <div id="out-div">
      <h4>Output.18</h4>
      <pre> isbn     | price | title                    | year
----------+-------+--------------------------+------
 ISBN-333 |  null | Cassandra For Developers | null
 ISBN-111 |  2.99 |    Cassandra Quick Notes | 2023
 ISBN-222 |  4.99 |          Cassandra Guide | 2021

(3 rows)</pre>
    </div>
    <br/>
    <div id="para-div">
      <p>To delete the entire row for the primary key <span class="bold">isbn</span> with a value of "<span class="bold">ISBN-333</span>"
        from the table <span class="bold">book_catalog</span>, input the following command at the "<span class="bold">cqlsh:mytestks&gt;
        </span>" prompt:</p>
    </div>
    <br/>
    <div id="cmd-div">
      <p>cqlsh:mytestks&gt; DELETE FROM book_catalog WHERE isbn = 'ISBN-333';</p>
    </div>
    <br/>
    <div id="para-div">
      <p>There will be no output.</p>
    </div>
    <div id="para-div">
      <p>Now let us SELECT all the rows from the table <span class="bold">book_catalog</span>. To do that, input the following command
        at the "<span class="bold">cqlsh:mytestks&gt;</span>" prompt:</p>
    </div>
    <br/>
    <div id="cmd-div">
      <p>cqlsh:mytestks&gt; SELECT * FROM book_catalog;</p>
    </div>
    <br/>
    <div id="para-div">
      <p>The following will be the output:</p>
    </div>
    <br/>
    <div id="out-div">
      <h4>Output.19</h4>
      <pre> isbn     | price | title                    | year
----------+-------+--------------------------+------
 ISBN-111 |  2.99 |    Cassandra Quick Notes | 2023
 ISBN-222 |  4.99 |          Cassandra Guide | 2021

(2 rows)</pre>
    </div>
    <br/>
    <div id="para-div">
      <p>To drop the entire table <span class="bold">book_catalog</span>, input the following command at the "<span class="bold">
        cqlsh:mytestks&gt;</span>" prompt:</p>
    </div>
    <div id="cmd-div">
      <p>cqlsh:mytestks&gt; DROP TABLE book_catalog;</p>
    </div>
    <br/>
    <div id="para-div">
      <p>There will be no output.</p>
    </div>
    <div id="para-div">
      <p>Now let us SELECT all the rows from the table <span class="bold">book_catalog</span>. To do that, input the following command
        at the "<span class="bold">cqlsh:mytestks&gt;</span>" prompt:</p>
    </div>
    <br/>
    <div id="cmd-div">
      <p>cqlsh:mytestks&gt; SELECT * FROM book_catalog;</p>
    </div>
    <br/>
    <div id="para-div">
      <p>The following will be the output:</p>
    </div>
    <br/>
    <div id="out-div">
      <h4>Output.20</h4>
      <pre>InvalidRequest: Error from server: code=2200 [Invalid query] message="table book_catalog does not exist"</pre>
    </div>
    <br/>
    <div id="para-div">
      <p>To drop the entire keyspace <span class="bold">mytestks</span>, input the following command at the "<span class="bold">
        cqlsh:mytestks&gt;</span>" prompt:</p>
    </div>
    <br/>
    <div id="cmd-div">
      <p>cqlsh:mytestks&gt; DROP KEYSPACE mytestks;</p>
    </div>
    <br/>
    <div id="para-div">
      <p>There will be no output.</p>
    </div>
    <div id="para-div">
      <p>Now let us try to gather information about the keyspace <span class="bold">mytestks</span>. To do that, input the following
        command at the "<span class="bold">cqlsh:mytestks&gt;</span>" prompt:</p>
    </div>
    <br/>
    <div id="cmd-div">
      <p>cqlsh:mytestks&gt; DESCRIBE mytestks;</p>
    </div>
    <br/>
    <div id="para-div">
      <p>The following will be the output:</p>
    </div>
    <br/>
    <div id="out-div">
      <h4>Output.21</h4>
      <pre>'mytestks' not found in keyspaces</pre>
    </div>
    <br/>
    <div id="para-div">
      <p>To exit the <span class="bold">CQL</span> command-line interface, input the following command at the "<span class="bold">
        cqlsh:mytestks&gt;</span>" prompt:</p>
    </div>
    <br/>
    <div id="cmd-div">
      <p>cqlsh:mytestks&gt; exit;</p>
    </div>
    <br/>
    <div id="para-div">
      <p>There will be no output.</p>
    </div>
    <div id="para-div">
      <p>This concludes the hands-on demonstration for this part in setting and using a single-node <span class="bold">Apache Cassandra
        </span> !!!</p>
    </div>
    <br/>
    <div id="section-div">
      <p>References</p>
    </div>
    <div id="para-div">
      <p><a href="https://cassandra.apache.org/doc/latest/cassandra/getting-started/index.html" target="_blank"><span class="bold">
        Apache Cassandra - Getting Started</span></a></p>
      <p><a href="https://cassandra.apache.org/doc/latest/cassandra/developing/cql/index.html" target="_blank"><span class="bold">
        The Cassandra Query Language</span></a></p>
    </div>
    <hr class="line-hr" />
    <div>
      <a id="footer-a" href="https://polarsparc.github.io/">&copy;&nbsp;PolarSPARC</a>
    </div>
  </body>
</html>
